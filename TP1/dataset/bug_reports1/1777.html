<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
<meta property="og:type" content="website">
<meta property="og:title" content="1777 - [TEXT] 'text-decoration' should not be drawn by children (underline) [INLINE]">
<meta property="og:url" content="https://bugzilla.mozilla.org/show_bug.cgi?id=1777">
<meta property="og:description"
      content="VERIFIED (esben) in Core - Layout: Text and Fonts. Last updated 2014-04-26.">
<meta name="twitter:label1" value="Type">
<meta name="twitter:data1" value="defect">
<meta name="twitter:label2" value="Priority">
<meta name="twitter:data2" value="P3">

    <meta name="viewport" content="width=1024">
    <meta name="color-scheme" content="dark light">
    <meta name="generator" content="Bugzilla 20200805.1">
    <meta name="bugzilla-global" content="dummy"
        id="bugzilla-global" data-bugzilla="{&quot;api_token&quot;:&quot;&quot;,&quot;config&quot;:{&quot;basepath&quot;:&quot;\/&quot;},&quot;constant&quot;:{&quot;COMMENT_COLS&quot;:80},&quot;param&quot;:{&quot;maxattachmentsize&quot;:&quot;10240&quot;,&quot;maxusermatches&quot;:&quot;50&quot;,&quot;splinter_base&quot;:&quot;\/page.cgi?id=splinter.html&amp;ignore=\/&quot;},&quot;string&quot;:{&quot;bug_type_required&quot;:&quot;You must select a Type for this bug&quot;,&quot;component_required&quot;:&quot;You must select a Component for this bug&quot;,&quot;description_required&quot;:&quot;You must enter a Description for this bug&quot;,&quot;short_desc_required&quot;:&quot;You must enter a Summary for this bug&quot;,&quot;version_required&quot;:&quot;You must select a Version for this bug&quot;},&quot;user&quot;:{&quot;is_new&quot;:1,&quot;login&quot;:&quot;&quot;}}">
    <title>1777 - [TEXT] 'text-decoration' should not be drawn by children (underline) [INLINE]</title>

<link rel="Top" href="/">

  


  
    <link rel="Show" title="Dependency Tree"
          href="/showdependencytree.cgi?id=1777&amp;hide_resolved=1">
      <link rel="Show" title="Dependency Graph"
            href="/showdependencygraph.cgi?id=1777">

      <link rel="Show" title="Bug Activity"
            href="/show_activity.cgi?id=1777">

<link href="https://bugzilla.mozilla.org/static/v20200805.1/skins/yui.css" rel="stylesheet" type="text/css"><link href="https://bugzilla.mozilla.org/static/v20200805.1/skins/standard/global.css" rel="stylesheet" type="text/css"><link href="https://bugzilla.mozilla.org/static/v20200805.1/extensions/BugModal/web/bug_modal.css" rel="stylesheet" type="text/css"><link href="https://bugzilla.mozilla.org/static/v20200805.1/js/jquery/plugins/contextMenu/contextMenu.css" rel="stylesheet" type="text/css"><link href="https://bugzilla.mozilla.org/static/v20200805.1/extensions/BMO/web/styles/bug_modal.css" rel="stylesheet" type="text/css"><link href="https://bugzilla.mozilla.org/static/v20200805.1/extensions/EditComments/web/styles/inline-editor.css" rel="stylesheet" type="text/css"><link href="https://bugzilla.mozilla.org/static/v20200805.1/js/jquery/ui/jquery-ui-min.css" rel="stylesheet" type="text/css"><link href="https://bugzilla.mozilla.org/static/v20200805.1/js/jquery/ui/jquery-ui-structure-min.css" rel="stylesheet" type="text/css"><link href="https://bugzilla.mozilla.org/static/v20200805.1/js/jquery/ui/jquery-ui-theme-min.css" rel="stylesheet" type="text/css"><link href="https://bugzilla.mozilla.org/static/v20200805.1/skins/lib/prism.css" rel="stylesheet" type="text/css"><link href="https://bugzilla.mozilla.org/static/v20200805.1/extensions/Needinfo/web/styles/needinfo.css" rel="stylesheet" type="text/css"><link href="https://bugzilla.mozilla.org/static/v20200805.1/extensions/Review/web/styles/badge.css" rel="stylesheet" type="text/css">



    
<script nonce="ATLs7KOpi0TFvWI9DDduhW6NeB6Q9jHhlGTOpmNIvJfGvgOe" src="https://bugzilla.mozilla.org/static/v20200805.1/js/jquery/jquery-min.js"></script><script nonce="ATLs7KOpi0TFvWI9DDduhW6NeB6Q9jHhlGTOpmNIvJfGvgOe" src="https://bugzilla.mozilla.org/static/v20200805.1/js/jquery/ui/jquery-ui-min.js"></script><script nonce="ATLs7KOpi0TFvWI9DDduhW6NeB6Q9jHhlGTOpmNIvJfGvgOe" src="https://bugzilla.mozilla.org/static/v20200805.1/js/yui.js"></script><script nonce="ATLs7KOpi0TFvWI9DDduhW6NeB6Q9jHhlGTOpmNIvJfGvgOe" src="https://bugzilla.mozilla.org/static/v20200805.1/js/jquery/plugins/contextMenu/contextMenu-min.js"></script><script nonce="ATLs7KOpi0TFvWI9DDduhW6NeB6Q9jHhlGTOpmNIvJfGvgOe" src="https://bugzilla.mozilla.org/static/v20200805.1/js/jquery/plugins/devbridgeAutocomplete/devbridgeAutocomplete-min.js"></script><script nonce="ATLs7KOpi0TFvWI9DDduhW6NeB6Q9jHhlGTOpmNIvJfGvgOe" src="https://bugzilla.mozilla.org/static/v20200805.1/js/global.js"></script><script nonce="ATLs7KOpi0TFvWI9DDduhW6NeB6Q9jHhlGTOpmNIvJfGvgOe" src="https://bugzilla.mozilla.org/static/v20200805.1/js/util.js"></script><script nonce="ATLs7KOpi0TFvWI9DDduhW6NeB6Q9jHhlGTOpmNIvJfGvgOe" src="https://bugzilla.mozilla.org/static/v20200805.1/js/dropdown.js"></script>

      <script nonce="ATLs7KOpi0TFvWI9DDduhW6NeB6Q9jHhlGTOpmNIvJfGvgOe">
          YAHOO.namespace('bugzilla');
          if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
              YAHOO.util.Event._simpleRemove(window, "unload",
                                             YAHOO.util.Event._unload);
          }BUGZILLA.value_descs = JSON.parse('{\"bug_status\":{},\"resolution\":{\"\":\"---\"}}');

  
    var tracking_flags_str = "{\"comments\":{\"cf_tracking_firefox_relnote\":{\"?\":\"Release Note Request (optional, but appreciated)\\n[Why is this notable]:\\n[Affects Firefox for Android]:\\n[Suggested wording]:\\n[Links (documentation, blog post, etc)]:\"},\"cf_tracking_firefox80\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox82\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_sumo\":{\"none-needed\":\"Release Note Request (optional, but appreciated)\\n[Why is this notable]:\\n[Affects Firefox for Android]:\\n[Suggested wording]:\\n[Links (documentation, blog post, etc)]:\"},\"cf_tracking_firefox_esr78\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox81\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_esr68\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_a11y_review_project_flag\":{\"requested\":\"Description:\\nPlease provide an explanation of the feature or change. Include a description of the user scenario in which it would be used and how the user would complete the task(s).\\nScreenshots and visual UI specs are welcome, but please include sufficient accompanying explanation so that blind members of the accessibility team are able to understand the feature\/change.\\n\\nHow do we test this?\\nIf there is an implementation to test, please provide instructions for testing it; e.g. setting preferences, other preparation, how to trigger the UI, etc.\\n\\nWhen will this ship?\\nTracking bug\/issue:\\nDesign documents (e.g. Product Requirements Document, UI spec):\\nEngineering lead:\\nProduct manager:\\n\\nAll user interface additions and changes must meet the Mozilla Accessibility Release Requirements:\\nhttps:\/\/wiki.mozilla.org\/Accessibility\/Requirements\\nPlease describe the accessibility requirements you considered and what steps you\'ve taken to address them:\\n\\nDescribe any areas of concern to which you want the accessibility team to give special attention:\"},\"cf_tracking_firefox79\":{\"?\":\"[Tracking Requested - why for this release]:\"}},\"types\":[\"tracking\"],\"flags\":{\"tracking\":{\"cf_status_firefox_esr68\":\"---\",\"cf_tracking_firefox_esr68\":\"---\",\"cf_tracking_thunderbird_esr78\":\"---\",\"cf_status_thunderbird_esr78\":\"---\",\"cf_tracking_firefox_relnote\":\"---\",\"cf_status_firefox82\":\"---\",\"cf_status_firefox81\":\"---\",\"cf_status_firefox79\":\"---\",\"cf_tracking_thunderbird_esr68\":\"---\",\"cf_status_thunderbird_esr68\":\"---\",\"cf_tracking_firefox79\":\"---\",\"cf_tracking_firefox81\":\"---\",\"cf_tracking_firefox_esr78\":\"---\",\"cf_status_firefox80\":\"---\",\"cf_tracking_firefox80\":\"---\",\"cf_tracking_firefox82\":\"---\",\"cf_status_firefox_esr78\":\"---\"},\"project\":{\"cf_root_cause\":\"---\",\"cf_tracking_firefox_sumo\":\"---\",\"cf_fission_milestone\":\"---\",\"cf_a11y_review_project_flag\":\"---\",\"cf_webcompat_priority\":\"---\"}}}";
    var TrackingFlags = $.parseJSON(tracking_flags_str);

  

  
  BUGZILLA.bug_id = 1777;
  BUGZILLA.bug_title = '1777 - [TEXT] \'text-decoration\' should not be drawn by children (underline) [INLINE]';
  BUGZILLA.bug_summary = '[TEXT] \'text-decoration\' should not be drawn by children (underline) [INLINE]';
  BUGZILLA.bug_url = 'https:\/\/bugzilla.mozilla.org\/show_bug.cgi?id=1777';
  BUGZILLA.bug_keywords = 'css1, testcase',
  BUGZILLA.user = {
    id: 0,
    login: '',
    is_insider: false,
    is_timetracker: false,
    can_tag: false,
    timezone: 'America\/Los_Angeles',
    settings: {
      quote_replies: 'quoted_reply',
      zoom_textareas: true,
      remember_collapsed: true,
      inline_attachments: true,
      autosize_comments: false
    }
  };

  BUGZILLA.bug_secure = false;
      </script>
<script nonce="ATLs7KOpi0TFvWI9DDduhW6NeB6Q9jHhlGTOpmNIvJfGvgOe" src="https://bugzilla.mozilla.org/static/v20200805.1/extensions/BugModal/web/autosize.min.js"></script><script nonce="ATLs7KOpi0TFvWI9DDduhW6NeB6Q9jHhlGTOpmNIvJfGvgOe" src="https://bugzilla.mozilla.org/static/v20200805.1/extensions/ProdCompSearch/web/js/prod_comp_search.js"></script><script nonce="ATLs7KOpi0TFvWI9DDduhW6NeB6Q9jHhlGTOpmNIvJfGvgOe" src="https://bugzilla.mozilla.org/static/v20200805.1/extensions/BugModal/web/bug_modal.js"></script><script nonce="ATLs7KOpi0TFvWI9DDduhW6NeB6Q9jHhlGTOpmNIvJfGvgOe" src="https://bugzilla.mozilla.org/static/v20200805.1/extensions/BugModal/web/comments.js"></script><script nonce="ATLs7KOpi0TFvWI9DDduhW6NeB6Q9jHhlGTOpmNIvJfGvgOe" src="https://bugzilla.mozilla.org/static/v20200805.1/extensions/ComponentWatching/web/js/overlay.js"></script><script nonce="ATLs7KOpi0TFvWI9DDduhW6NeB6Q9jHhlGTOpmNIvJfGvgOe" src="https://bugzilla.mozilla.org/static/v20200805.1/js/bugzilla-readable-status-min.js"></script><script nonce="ATLs7KOpi0TFvWI9DDduhW6NeB6Q9jHhlGTOpmNIvJfGvgOe" src="https://bugzilla.mozilla.org/static/v20200805.1/js/field.js"></script><script nonce="ATLs7KOpi0TFvWI9DDduhW6NeB6Q9jHhlGTOpmNIvJfGvgOe" src="https://bugzilla.mozilla.org/static/v20200805.1/js/comments.js"></script><script nonce="ATLs7KOpi0TFvWI9DDduhW6NeB6Q9jHhlGTOpmNIvJfGvgOe" src="https://bugzilla.mozilla.org/static/v20200805.1/extensions/TrackingFlags/web/js/flags.js"></script><script nonce="ATLs7KOpi0TFvWI9DDduhW6NeB6Q9jHhlGTOpmNIvJfGvgOe" src="https://bugzilla.mozilla.org/static/v20200805.1/extensions/BMO/web/js/firefox-crash-table.js"></script><script nonce="ATLs7KOpi0TFvWI9DDduhW6NeB6Q9jHhlGTOpmNIvJfGvgOe" src="https://bugzilla.mozilla.org/static/v20200805.1/js/lib/prism.js"></script><script nonce="ATLs7KOpi0TFvWI9DDduhW6NeB6Q9jHhlGTOpmNIvJfGvgOe" src="https://bugzilla.mozilla.org/static/v20200805.1/extensions/GoogleAnalytics/web/js/analytics.js"></script><script nonce="ATLs7KOpi0TFvWI9DDduhW6NeB6Q9jHhlGTOpmNIvJfGvgOe" src="https://bugzilla.mozilla.org/static/v20200805.1/js/lib/md5.min.js"></script><script nonce="ATLs7KOpi0TFvWI9DDduhW6NeB6Q9jHhlGTOpmNIvJfGvgOe" src="https://bugzilla.mozilla.org/static/v20200805.1/extensions/Review/web/js/badge.js"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla@Mozilla" href="/search_plugin.cgi"><link rel="shortcut icon" href="/extensions/BMO/web/images/favicon.ico">
<link rel="canonical" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1777">
<link rel="shorturl" href="https://bugzilla.mozilla.org/1777"><meta name="google-analytics" content="UA-36116321-3" data-location="https://bugzilla.mozilla.org/bug/show-modal" data-title="1777 - [TEXT] 'text-decoration' should not be drawn by children (underline) [INLINE]">
<script async src="https://www.google-analytics.com/analytics.js"></script><meta name="robots" content="noarchive">
  </head>



  <body
        class="bugzilla-mozilla-org
               skin-standard bug_modal yui-skin-sam">



<div id="wrapper">

<aside id="message-container" role="complementary">
  <noscript>
    <div class="noscript">
      <div class="inner">
        <p>Please enable JavaScript in your browser to use all the features on this site.</p>
      </div>
    </div>
  </noscript>
</aside>

<header id="header" role="banner">
  <div class="inner">
    <h1 id="header-title" class="title"><a href="https://bugzilla.mozilla.org/home" title="Go to home page">Bugzilla</a></h1>
    <form role="search" id="header-search" class="quicksearch" action="/buglist.cgi" data-no-csrf>
      <section class="searchbox-outer dropdown" role="combobox" aria-expanded="false" aria-haspopup="listbox"
               aria-labelledby="header-search-label" aria-owns="header-search-dropdown">
        <h2 id="header-search-label">Quick Search</h2>
        <span class="icon" aria-hidden="true"></span>
        <input role="searchbox" id="quicksearch_top" class="dropdown-button" name="quicksearch" autocomplete="off"
               value="" placeholder="Search Bugs"
               title="Enter a bug number or some search terms" aria-controls="header-search-dropdown"
               aria-label="Quick Search"><div id="header-search-dropdown" class="dropdown-content right" role="listbox" style="display: none;">
  <div id="header-search-dropdown-wrapper">
  </div>
</div>
      </section>
    </form>
    <nav id="header-nav">
      <ul class="links">
        <li class="link-browse">
          <a href="/describecomponents.cgi" title="Browse bugs by component">
            <span class="icon" aria-hidden="true"></span>
            <span class="label">Browse</span>
          </a>
        </li>
        <li class="link-search">
          <a href="/query.cgi?format=advanced" title="Search bugs using various criteria">
            <span class="icon" aria-hidden="true"></span>
            <span class="label">Advanced Search</span>
          </a>
        </li>
      </ul>
      <div class="dropdown">
        <button type="button" id="header-tools-menu-button" class="dropdown-button minor" title="More tools…"
                aria-label="More tools…" aria-expanded="false" aria-haspopup="true" aria-controls="header-tools-menu">
          <span class="icon" aria-hidden="true"></span>
        </button>
        <ul class="dropdown-content left" id="header-tools-menu" role="menu" style="display:none;">
          <li role="presentation">
            <a href="/report.cgi" role="menuitem" tabindex="-1">Reports</a>
          </li>
            <li role="separator"></li>
            <li role="presentation">
              <a href="https://bmo.readthedocs.io/en/latest/" role="menuitem" tabindex="-1">Documentation</a>
            </li>
        </ul>
      </div>
    </nav>
      <ul id="header-login" class="links">
          <li id="moz_new_account_container_top"><a href="/createaccount.cgi">New Account</a></li><li id="mini_login_container_top">
  <a id="login_link_top" href="/show_bug.cgi?id=1777&amp;GoAheadAndLogIn=1"
     class='show_mini_login_form' data-qs-suffix="_top">Log In</a>

  <div id="mini_login_top" class="mini-popup mini_login bz_default_hidden"><span id="github_mini_login_top" class="mini_login_top">
    <form method="post" action="/github.cgi">
      <input type="hidden" name="github_secret" value="uGPaeUpXcdI4B7zRGPMz323DV1MqR8aPx3ZWxyOnpnqXxoDezBNcLNXpLvDgLzWUQSGClGE0WhMugOpOY4gn4t0yCJVMT3HEURkLIqi8EFNyktxHLFJpvIcFbi7AE348Z8DoliJyQLkZ1pcZNy0vQ7hwymcPrxpKvyX7qH6rOHMmVw6MJIQanoVn6NI5Rc855WNTjrOSoevDOmuXM2vJNj2jwhXABfTNuw3gfrx4f0aIf0C8iTmrzSCdWwHclevY">
      <input type="hidden" name="target_uri" value="https://bugzilla.mozilla.org/show_bug.cgi?id=1777">
      <input type="image" src="/extensions/GitHubAuth/web/images/sign_in.png" height="22" width="75" align="absmiddle"
             alt="Sign in with GitHub"
             title="Sign in with GitHub"> or
    </form>
  </span>

  <form action="/show_bug.cgi?id=1777" method="POST"
        data-qs-suffix="_top">

    <input id="Bugzilla_login_top"
           class="bz_login"
           name="Bugzilla_login"
           title="Login"
           placeholder="Email"
           aria-label="Email"
           type="email"
           required
    >
    <input class="bz_password"
           id="Bugzilla_password_top"
           name="Bugzilla_password"
           type="password"
           title="Password"
           placeholder="Password"
           aria-label="Password"
           required
    >
    <input class="bz_password bz_default_hidden bz_mini_login_help" type="text"
           id="Bugzilla_password_dummy_top" value="password"
           title="Password"
    >
      <input type="checkbox" id="Bugzilla_remember_top"
             name="Bugzilla_remember" value="on" class="bz_remember"
                 checked>
      <label for="Bugzilla_remember_top">Remember</label>
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
           class="check_mini_login_fields"
            id="log_in_top">
    <a href="#" id="hide_mini_login_top" aria-label="Close"
       class="close-button hide_mini_login_form" data-qs-suffix="_top">
      <span class="icon" aria-hidden="true"></span>
    </a>
  </form>
  </div>
</li>
<li id="forgot_container_top">
  <a id="forgot_link_top" href="/show_bug.cgi?id=1777&amp;GoAheadAndLogIn=1#forgot"
     class='show_forgot_form'
     data-qs-suffix="_top">Forgot Password</a>
  <div id="forgot_form_top" class="mini-popup mini_forgot bz_default_hidden">
  <form action="/token.cgi" method="post">
    <input type="email" name="loginname" size="20" placeholder="Email" aria-label="Email" required>
    <input id="forgot_button_top" value="Reset Password"
           type="submit">
    <input type="hidden" name="a" value="reqpw">
    <input type="hidden" id="token_top" name="token" value="1598309363-AR7snbqo8rur1DjzXGTsNtLT4ImpcLdh-HZyJVsryRw">
    <a href="#" class="close-button hide_forgot_form" aria-label="Close" data-qs-suffix="_top">
      <span class="icon" aria-hidden="true"></span>
    </a>
  </form>
  </div>
</li>
      </ul><div id="header-external-links" class="dropdown first">
  <button type="button" id="header-external-menu-button" class="dropdown-button minor" title="Mozilla"
          aria-label="Mozilla" aria-expanded="false" aria-haspopup="true" aria-controls="header-external-menu">
    <img src="https://bugzilla.mozilla.org/static/v20200805.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg" width="32" height="32" alt="">
  </button>
  <ul class="dropdown-content right" id="header-external-menu" role="menu" style="display:none;">
    <li role="presentation">
      <a href="https://www.mozilla.org/" role="menuitem" tabindex="-1">Mozilla Home</a>
    </li>
    <li role="separator"></li>
    <li role="presentation">
      <a href="https://www.mozilla.org/privacy/websites/" role="menuitem" tabindex="-1">Privacy</a>
    </li>
    <li role="presentation">
      <a href="https://www.mozilla.org/privacy/websites/#cookies" role="menuitem" tabindex="-1">Cookies</a>
    </li>
    <li role="presentation">
      <a href="https://www.mozilla.org/about/legal/" role="menuitem" tabindex="-1">Legal</a>
    </li>
  </ul>
</div>
  </div>
</header> 


<main id="bugzilla-body" tabindex="-1">
<div id="main-inner">




<div role="toolbar" id="page-toolbar">
  <div role="group" class="buttons">
    <button type="button" id="copy-summary" class="secondary"
      title="Copy bug number and summary to your clipboard">Copy Summary</button>
    <div id="clip-container" style="display:none"><input type="text" id="clip"></div>
    <div class="dropdown">
      <button type="button" id="action-menu-btn" aria-haspopup="true" aria-label="View"
        aria-expanded="false" aria-controls="action-menu" class="dropdown-button secondary">View &#9662;</button>
      <ul class="dropdown-content left" id="action-menu" role="menu" style="display:none;">
        <li role="presentation">
          <a id="action-reset" role="menuitem" tabindex="-1">Reset Sections</a>
        </li>
        <li role="presentation">
          <a id="action-expand-all" role="menuitem" tabindex="-1">Expand All Sections</a>
        </li>
        <li role="presentation">
          <a id="action-collapse-all" role="menuitem" tabindex="-1">Collapse All Sections</a>
        </li>
        <li role="separator"></li>
        <li role="presentation">
          <a id="action-history" role="menuitem" tabindex="-1">History</a>
        </li>
        <li role="separator"></li>
        <li role="presentation">
          <a href="/rest/bug/1777" role="menuitem" tabindex="-1">JSON</a>
        </li>
        <li role="presentation">
          <a href="/show_bug.cgi?ctype=xml&amp;id=1777" role="menuitem" tabindex="-1">XML</a>
        </li>
      </ul>
    </div>
  </div>
</div>



<div role="status" id="io-error" style="display:none"></div>
<div role="status" id="floating-message" style="display:none">
  <div id="floating-message-text"></div>
</div>
<section class="module"
>
  <div class="module-content"
  >
  <div id="summary-container">
    <div class="field indent" id="field-status_summary"
>


  
    <div class=" container">
        <span id="field-value-status_summary">
      <span class="bug-status-label text" data-status="closed">Closed</span>
      <span id="field-value-bug_id">
        <a href="/show_bug.cgi?id=1777">Bug 1777</a>
      </span>
      <span>
        <span class="bug-time-label">Opened <span class="rel-time" title="1998-12-04 15:44 PST" data-time="912815060">22 years ago</span></span>
          <span class="bug-time-label">Closed <span class="rel-time" title="2002-12-11 07:59 PST" data-time="1039622392">18 years ago</span></span>
      </span>
        </span>
    </div>

  
</div>
<div class="field indent edit-hide"
>


  
    <div class=" container">
      

      <h1 id="field-value-short_desc">[TEXT] 'text-decoration' should not be drawn by children (underline) [INLINE]</h1>
    </div>

  
</div>

    <div class="field edit-show" id="field-short_desc" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc" id="short_desc-help-link" class="help">Summary:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-short_desc">
            [TEXT] 'text-decoration' should not be drawn by children (underline) [INLINE]

        </span>
    </div>

  
</div>
  </div>
  </div>
</section>


<section class="module" id="module-categories"
>
    <header id="module-categories-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Categories section"
           data-label-collapsed="Expand Categories section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-categories-content"
             aria-expanded="true"
             aria-labeledby="module-categories-title"
             aria-describedby="module-categories-subtitle"></div>
        <h2 class="module-title" id="module-categories-title">Categories</h2>
          <h3 class="module-subtitle" id="module-categories-subtitle">
            (Core :: Layout: Text and Fonts, defect, P3)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-categories-content"
  ><div class="fields-lhs">

    <div class="field" id="field-product"
>
    <div class="name">
        <a href="/describecomponents.cgi?product=Core" id="product-help-link" class="help">Product:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-product">
      <div class="name-info-outer dropdown">
        <span id="product-name" class="dropdown-button" tabindex="0" role="button"
             aria-haspopup="menu" aria-controls="product-info">Core
          <span class="icon" aria-hidden="true">&#x25BE;</span>
        </span>
        <aside id="product-info" class="name-info-popup dropdown-content right hover-display" hidden role="menu"
               aria-label="Product description and actions">
          <header>
            <div class="title">Core</div>
            <div class="description">Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the <a href="https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox">Firefox</a> product. (<a href="https://wiki.mozilla.org/Modules/All#Core">More info</a>)</div>
          </header>
          <li role="separator"></li>
          <div class="actions">
            <div><a href="/buglist.cgi?product=Core&amp;bug_status=__open__"
                    target="_blank" role="menuitem" tabindex="-1">See Open Bugs in This Product</a></div>
            <div><a href="/enter_bug.cgi?product=Core"
                    target="_blank" role="menuitem" tabindex="-1">File New Bug in This Product</a></div>
            <div><button disabled type="button" class="secondary component-watching" role="menuitem" tabindex="-1"
                         data-product="Core"
                         data-label-watch="Watch This Product" data-label-unwatch="Unwatch This Product"
                         data-source="BugModal">Watch This Product</button></div>
          </div>
        </aside>
      </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-component"
>
    <div class="name">
        <a href="/describecomponents.cgi?product=Core&component=Layout%3A%20Text%20and%20Fonts#Layout%3A%20Text%20and%20Fonts" id="component-help-link" class="help">Component:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-component">
      <div class="name-info-outer dropdown">
        <span id="component-name" class="dropdown-button" tabindex="0" role="button"
             aria-haspopup="menu" aria-controls="component-info">Layout: Text and Fonts
          <span class="icon" aria-hidden="true">&#x25BE;</span>
        </span>
        <aside id="component-info" class="name-info-popup dropdown-content right hover-display" hidden role="menu"
               aria-label="Component description and actions">
          <header>
            <div class="title">Core :: Layout: Text and Fonts</div>
            <div class="description"><p>Issues with CSS font selection, font loading, text shaping and glyph selection, breaking, text decorations, bidirectional text processing, and white space processing. For issues with glyph rendering and font format support, see the Graphics: Text component.</p>
<p>Example bugs:</p>
<ul>
  <li>line-breaking code does not handle supplementary-plane characters properly</li>
  <li>double or wavy decoration lines are not repainted correctly if specified on floating first letter</li>
</ul>
<p>Specifications covered:</p>
<ul>
  <li>CSS Fonts</li>
  <li>CSS Size Adjustment</li>
  <li>CSS Text</li>
  <li>CSS Text Decoration</li>
</ul></div>
          </header>
          <li role="separator"></li>
          <div class="actions">
            <div><a href="/buglist.cgi?product=Core&amp;component=Layout%3A%20Text%20and%20Fonts&amp;bug_status=__open__"
                    target="_blank" role="menuitem" tabindex="-1">See Open Bugs in This Component</a></div>
            <div><a href="/buglist.cgi?product=Core&amp;component=Layout%3A%20Text%20and%20Fonts&amp;chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__"
                    target="_blank" role="menuitem" tabindex="-1">Recently Fixed Bugs in This Component</a></div>
            <div><a href="/enter_bug.cgi?product=Core&amp;component=Layout%3A%20Text%20and%20Fonts"
                    target="_blank" role="menuitem" tabindex="-1">File New Bug in This Component</a></div>
            <div><button disabled type="button" class="secondary component-watching" role="menuitem" tabindex="-1"
                         data-product="Core" data-component="Layout: Text and Fonts"
                         data-label-watch="Watch This Component" data-label-unwatch="Unwatch This Component"
                         data-source="BugModal">Watch This Component</button></div>
          </div>
        </aside>
      </div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-version" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#version" id="version-help-link" class="help">Version:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-version">
            Trunk

        </span>
    </div>

  
</div>

    <div class="field edit-show" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform" id="-help-link" class="help">Platform:
        </a>
    </div>


  
    <div class=" container"><div class="field inline" id="field-rep_platform"
>


  
    <div class="value">
        <span id="field-value-rep_platform">
            All

        </span>
    </div>

  
</div><div class="field indent inline" id="field-op_sys"
>


  
    <div class="value">
        <span id="field-value-op_sys">
            All

        </span>
    </div>

  
</div><div class="field indent inline"
>


  
    <div class=" container">
    </div>

  
</div>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field contains-buttons" id="field-bug_type"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type" id="bug_type-help-link" class="help">Type:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_type">
      <span class="bug-type-label iconic-text" data-type="defect">
        <span class="icon" aria-hidden="true"></span>defect</span>
        </span>
    </div>

  
</div>

    <div class="field" id="field-importance"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority" id="importance-help-link" class="help">Priority:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-importance"><div class="field inline" id="field-priority"
>


  
    <div class="value">
        <span id="field-value-priority">P3
        </span>
    </div>

  
</div><div class="field inline" id="field-bug_severity"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity" id="bug_severity-help-link" class="help">Severity:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_severity">
            normal

        </span>
    </div>

  
</div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-cf_fx_points" style="display:none"
>
    <div class="name">Points:
    </div>


  
    <div class="value">
        <span id="field-value-cf_fx_points">
            ---

        </span>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-tracking"
>
    <header id="module-tracking-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Tracking section"
           data-label-collapsed="Expand Tracking section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-tracking-content"
             aria-expanded="true"
             aria-labeledby="module-tracking-title"
             aria-describedby="module-tracking-subtitle"></div>
        <h2 class="module-title" id="module-tracking-title">Tracking</h2>
          <h3 class="module-subtitle" id="module-tracking-subtitle">
            (<span id="readable-bug-status" data-readable-bug-status="{&quot;resolution&quot;:&quot;FIXED&quot;,&quot;cf_tracking_firefox80&quot;:&quot;---&quot;,&quot;priority&quot;:&quot;P3&quot;,&quot;flags&quot;:[{&quot;status&quot;:&quot;-&quot;,&quot;name&quot;:&quot;blocking1.3a&quot;}],&quot;cf_fission_milestone&quot;:&quot;---&quot;,&quot;cf_status_firefox_esr78&quot;:&quot;---&quot;,&quot;cf_status_thunderbird_esr68&quot;:&quot;---&quot;,&quot;cf_tracking_firefox79&quot;:&quot;---&quot;,&quot;cf_tracking_thunderbird_esr68&quot;:&quot;---&quot;,&quot;cf_tracking_firefox81&quot;:&quot;---&quot;,&quot;target_milestone&quot;:&quot;mozilla1.3beta&quot;,&quot;dupe_of&quot;:null,&quot;cf_status_thunderbird_esr78&quot;:&quot;---&quot;,&quot;keywords&quot;:[&quot;css1&quot;,&quot;testcase&quot;],&quot;cf_tracking_firefox_relnote&quot;:&quot;---&quot;,&quot;cf_status_firefox81&quot;:&quot;---&quot;,&quot;cf_status_firefox79&quot;:&quot;---&quot;,&quot;cf_status_firefox82&quot;:&quot;---&quot;,&quot;cf_tracking_firefox_esr68&quot;:&quot;---&quot;,&quot;id&quot;:1777,&quot;cf_tracking_firefox82&quot;:&quot;---&quot;,&quot;cf_tracking_firefox_esr78&quot;:&quot;---&quot;,&quot;cf_status_firefox80&quot;:&quot;---&quot;,&quot;status&quot;:&quot;VERIFIED&quot;,&quot;cf_webcompat_priority&quot;:&quot;---&quot;,&quot;cf_root_cause&quot;:&quot;---&quot;,&quot;cf_a11y_review_project_flag&quot;:&quot;---&quot;,&quot;cf_status_firefox_esr68&quot;:&quot;---&quot;,&quot;cf_tracking_thunderbird_esr78&quot;:&quot;---&quot;,&quot;cf_tracking_firefox_sumo&quot;:&quot;---&quot;}"></span>)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-tracking-content"
  ><div class="fields-lhs">

    <div class="field edit-hide" id="field-status-view"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugStatuses" id="status-view-help-link" class="help">Status:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-status-view">VERIFIED
        FIXED
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-status-edit" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugStatuses" id="status-edit-help-link" class="help">Status:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-status-edit"><div class="field inline" id="field-bug_status"
>


  
    <div class="value">
        <span id="field-value-bug_status">
            VERIFIED

        </span>
    </div>

  
</div><div class="field indent inline" id="field-resolution"
>


  
    <div class="value">
        <span id="field-value-resolution">
            FIXED

        </span>
    </div>

  
</div>
  <div id="status-action-buttons">
      <div id="assigned-container" style="display:none">
        <button type="button" class="secondary" id="mark-as-assigned-btn">
          Mark as Assigned
        </button>
      </div>
  </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-target_milestone"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone" id="target_milestone-help-link" class="help">Milestone:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-target_milestone">
            mozilla1.3beta

        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-cf_fx_iteration" style="display:none"
>
    <div class="name">Iteration:
    </div>


  
    <div class="value">
        <span id="field-value-cf_fx_iteration">
            ---

        </span>
    </div>

  
</div>


      <div class="field edit-show" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags" id="-help-link" class="help">Project Flags:
        </a>
    </div>


  
    <div class=" container"><div class="flags edit-show" style="display:none">
  <table class="layout-table tracking-flags">
      <tr>
        <td class="tracking-flag-name">Webcompat Priority</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_webcompat_priority-dirty">
  <select id="cf_webcompat_priority" name="cf_webcompat_priority">
        <option value="---"
          id="v4274_cf_webcompat_priority" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">Root Cause</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_root_cause-dirty">
  <select id="cf_root_cause" name="cf_root_cause">
        <option value="---"
          id="v4701_cf_root_cause" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">a11y-review</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_a11y_review_project_flag-dirty">
  <select id="cf_a11y_review_project_flag" name="cf_a11y_review_project_flag">
        <option value="---"
          id="v4876_cf_a11y_review_project_flag" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">user-doc-firefox</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_tracking_firefox_sumo-dirty">
  <select id="cf_tracking_firefox_sumo" name="cf_tracking_firefox_sumo">
        <option value="---"
          id="v4660_cf_tracking_firefox_sumo" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">Fission Milestone</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_fission_milestone-dirty">
  <select id="cf_fission_milestone" name="cf_fission_milestone">
        <option value="---"
          id="v4222_cf_fission_milestone" selected
        >---
        </option>
  </select></td>
      </tr>
  </table>
</div>
    </div>

  
</div>
</div><div class="fields-rhs">

      <div class="field edit-show" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags" id="-help-link" class="help">Tracking Flags:
        </a>
    </div>


  
    <div class=" container"><div class="flags edit-show" style="display:none">
  <table class="layout-table tracking-flags">
      <tr>
        <th></th>
        <th>Tracking</th>
        <th>Status</th>
      </tr>
      <tr>
        <td class="tracking-flag-name">relnote-firefox</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_tracking_firefox_relnote-dirty">
  <select id="cf_tracking_firefox_relnote" name="cf_tracking_firefox_relnote">
        <option value="---"
          id="v539_cf_tracking_firefox_relnote" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird_esr68</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_thunderbird_esr68-dirty">
  <select id="cf_tracking_thunderbird_esr68" name="cf_tracking_thunderbird_esr68">
        <option value="---"
          id="v4353_cf_tracking_thunderbird_esr68" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_esr68-dirty">
  <select id="cf_status_thunderbird_esr68" name="cf_status_thunderbird_esr68">
        <option value="---"
          id="v4347_cf_status_thunderbird_esr68" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird_esr78</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_thunderbird_esr78-dirty">
  <select id="cf_tracking_thunderbird_esr78" name="cf_tracking_thunderbird_esr78">
        <option value="---"
          id="v4823_cf_tracking_thunderbird_esr78" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_esr78-dirty">
  <select id="cf_status_thunderbird_esr78" name="cf_status_thunderbird_esr78">
        <option value="---"
          id="v4829_cf_status_thunderbird_esr78" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr68</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox_esr68-dirty">
  <select id="cf_tracking_firefox_esr68" name="cf_tracking_firefox_esr68">
        <option value="---"
          id="v4365_cf_tracking_firefox_esr68" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr68-dirty">
  <select id="cf_status_firefox_esr68" name="cf_status_firefox_esr68">
        <option value="---"
          id="v4407_cf_status_firefox_esr68" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr78</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox_esr78-dirty">
  <select id="cf_tracking_firefox_esr78" name="cf_tracking_firefox_esr78">
        <option value="---"
          id="v4808_cf_tracking_firefox_esr78" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr78-dirty">
  <select id="cf_status_firefox_esr78" name="cf_status_firefox_esr78">
        <option value="---"
          id="v4813_cf_status_firefox_esr78" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox79</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox79-dirty">
  <select id="cf_tracking_firefox79" name="cf_tracking_firefox79">
        <option value="---"
          id="v4791_cf_tracking_firefox79" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox79-dirty">
  <select id="cf_status_firefox79" name="cf_status_firefox79">
        <option value="---"
          id="v4796_cf_status_firefox79" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox80</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox80-dirty">
  <select id="cf_tracking_firefox80" name="cf_tracking_firefox80">
        <option value="---"
          id="v4850_cf_tracking_firefox80" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox80-dirty">
  <select id="cf_status_firefox80" name="cf_status_firefox80">
        <option value="---"
          id="v4855_cf_status_firefox80" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox81</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox81-dirty">
  <select id="cf_tracking_firefox81" name="cf_tracking_firefox81">
        <option value="---"
          id="v4883_cf_tracking_firefox81" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox81-dirty">
  <select id="cf_status_firefox81" name="cf_status_firefox81">
        <option value="---"
          id="v4888_cf_status_firefox81" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox82</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox82-dirty">
  <select id="cf_tracking_firefox82" name="cf_tracking_firefox82">
        <option value="---"
          id="v4915_cf_tracking_firefox82" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox82-dirty">
  <select id="cf_status_firefox82" name="cf_status_firefox82">
        <option value="---"
          id="v4920_cf_status_firefox82" selected
        >---
        </option>
  </select></td>
      </tr>
  </table>
</div>
    </div>

  
</div>

</div>
  </div>
</section>



<section class="module" id="module-people"
>
    <header id="module-people-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse People section"
           data-label-collapsed="Expand People section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-people-content"
             aria-expanded="false"
             aria-labeledby="module-people-title"
             aria-describedby="module-people-subtitle"></div>
        <h2 class="module-title" id="module-people-title">People</h2>
          <h3 class="module-subtitle" id="module-people-subtitle">
            (Reporter: glynn, Assigned: esben)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-people-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field edit-hide" id="field-assigned_to"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to" id="assigned_to-help-link" class="help">Assignee:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-assigned_to"><div class="vcard vcard_22237" ><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">esben</span></a>
</div>
        </span>
    </div>

  
</div><div class="field edit-show" id="field-assigned_to" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to" id="assigned_to-help-link" class="help">Assignee:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-assigned_to">
      <div class="set-default-container" style="display:none">
        <input type="checkbox" id="set-default-assignee" name="set_default_assignee" class="set-default"
          value="1" data-for="assigned_to">
        <label for="set-default-assignee">Reset Assignee to default</label>
      </div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-bug_mentors" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor" id="bug_mentors-help-link" class="help">Mentors:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_mentors">---
        </span>
    </div>

  
</div>

    <div class="field edit-hide" id="field-qa_contact"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact" id="qa_contact-help-link" class="help">QA Contact:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-qa_contact"><div class="vcard vcard_4054" ><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=4054" > <span class="fna">ian</span></a>
</div>
        </span>
    </div>

  
</div><div class="field edit-show" id="field-qa_contact" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact" id="qa_contact-help-link" class="help">QA Contact:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-qa_contact">
      <div class="set-default-container" style="display:none">
        <input type="checkbox" id="set-default-qa-contact" name="set_default_qa_contact" class="set-default"
          value="1" data-for="qa_contact">
        <label for="set-default-qa-contact">Reset QA Contact to default</label>
      </div>
        </span>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field" id="field-reporter"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter" id="reporter-help-link" class="help">Reporter:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-reporter">
            <div class="vcard vcard_4082" ><img src="https://secure.gravatar.com/avatar/adc4316945e006c9a3241f657db0dd34?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email disabled" href="/user_profile?user_id=4082" > <span class="fna">glynn</span></a>
</div>

        </span>
    </div>

  
</div>

    <div class="field" id="field-triage_owner"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner" id="triage_owner-help-link" class="help">Triage Owner:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-triage_owner">
            <div class="vcard vcard_329583" ><img src="https://secure.gravatar.com/avatar/e0f9759e1d7514ae4adfd806869e3c5d?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=329583" > <span class="fna">jfkthame</span></a>
</div>

        </span>
    </div>

  
</div>

    

    <div class="field"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc" id="-help-link" class="help">CC:
        </a>
    </div>


  
    <div class=" container">


        <span aria-owns="cc-summary cc-latch">
          <span role="button" tabindex="0" id="cc-summary" data-count="39">39 people
          </span>
        </span>


        <div id="cc-list" style="display:none"></div>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-references"
>
    <header id="module-references-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse References section"
           data-label-collapsed="Expand References section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-references-content"
             aria-expanded="false"
             aria-labeledby="module-references-title"
             aria-describedby="module-references-subtitle"></div>
        <h2 class="module-title" id="module-references-title">References</h2>
          <h3 class="module-subtitle" id="module-references-subtitle">
            (Blocks 1 open bug, <div class="link">
    <a href="http://www.w3.org/Style/CSS/Test/current/sec13.htm" target="_blank"
      rel="noreferrer" title="http://www.w3.org/Style/CSS/Test/current/sec13.htm"
      class="bug-url" data-safe="1">URL</a>
  </div>)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-references-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field bug-list edit-show" id="field-dependson" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson" id="dependson-help-link" class="help">Depends on:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-dependson">
        ---
        </span>
    </div>

  
</div><div class="field bug-list" id="field-blocked"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks" id="blocked-help-link" class="help">Blocks:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-blocked">
            <div class="bug-list">
        <span class="bug-type-label iconic" title="defect"
              aria-label="defect" data-type="defect">
          <span class="icon" aria-hidden="true"></span>
        </span><a class="bz_bug_link
          bz_status_NEW"
   title="NEW - Underlines retain color while being selected"
   href="/show_bug.cgi?id=35146">35146</a>, <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - 'text-decoration' should not apply to text-less inlines (underline) [INLINE]"
   href="/show_bug.cgi?id=20163">20163</a>, <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED WONTFIX - Standards"
   href="/show_bug.cgi?id=103709">103709</a>, <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED INVALID - nsbeta1 unconf, new, assigned, and reopened bugs 2001-10-10 19:40"
   href="/show_bug.cgi?id=104166">104166</a>, <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED DUPLICATE - anchor link underline is assuming bolded text style"
   href="/show_bug.cgi?id=121760">121760</a>, <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - composer creates &quot;underlined blanks&quot; after pictures with link"
   href="/show_bug.cgi?id=126259">126259</a>, <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - small-caps are drawn in underline colour"
   href="/show_bug.cgi?id=181336">181336</a>
      </div>
      <div class="bug-list">
        <span class="bug-type-label iconic" title="enhancement"
              aria-label="enhancement" data-type="enhancement">
          <span class="icon" aria-hidden="true"></span>
        </span><a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - implement CSS3 text module's text-decoration-style and text-decoration-color"
   href="/show_bug.cgi?id=59109">59109</a>
      </div>

        </span>
    </div>

  
</div><div class="field" id="field-dependencytree"
>
    <div class="name">
    </div>


  
    <div class=" container">
        <span id="field-value-dependencytree">
        Dependency <a href="/showdependencytree.cgi?id=1777&amp;hide_resolved=1">tree</a>
        / <a href="/showdependencygraph.cgi?id=1777">graph</a>
        </span>
    </div>

  
</div>

    <div class="field bug-list edit-show" id="field-regresses" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses" id="regresses-help-link" class="help">Regressions:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-regresses">
        ---
        </span>
    </div>

  
</div><div class="field bug-list edit-show" id="field-regressed_by" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by" id="regressed_by-help-link" class="help">Regressed by:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-regressed_by">
        ---
        </span>
    </div>

  
</div>

    <div class="field bug-list"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#duplicates" id="-help-link" class="help">Duplicates:
        </a>
    </div>


  
    <div class="value">
            <div class="bug-list">
        <span class="bug-type-label iconic" title="defect"
              aria-label="defect" data-type="defect">
          <span class="icon" aria-hidden="true"></span>
        </span><a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED DUPLICATE - {css1} underline doesn't extend beneath image"
   href="/show_bug.cgi?id=3488">3488</a>, <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED DUPLICATE - Link underscore discontinuous"
   href="/show_bug.cgi?id=10065">10065</a>, <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED DUPLICATE - Mis-matched fonts have poor underlining result"
   href="/show_bug.cgi?id=44232">44232</a>, <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED DUPLICATE - *Thick* bold underline (?)"
   href="/show_bug.cgi?id=44420">44420</a>, <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED DUPLICATE - text-decoration: underline and image missing underline"
   href="/show_bug.cgi?id=47749">47749</a>, <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED DUPLICATE - anchor link underline is assuming bolded text style"
   href="/show_bug.cgi?id=121760">121760</a>, <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED DUPLICATE - Underline is not straight at &lt;CODE&gt;, &lt;KBD&gt;, &lt;TT&gt; or &lt;SAMP&gt;"
   href="/show_bug.cgi?id=142407">142407</a>, <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED DUPLICATE - Bad alignment on underlined words"
   href="/show_bug.cgi?id=144596">144596</a>, <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED DUPLICATE - CSS"
   href="/show_bug.cgi?id=150949">150949</a>
      </div>
      <div class="bug-list">
        <span class="bug-type-label iconic" title="enhancement"
              aria-label="enhancement" data-type="enhancement">
          <span class="icon" aria-hidden="true"></span>
        </span><a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED DUPLICATE - Links and underlined text should use the same size of underline for all text"
   href="/show_bug.cgi?id=64207">64207</a>
      </div>

    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field" id="field-bug_file_loc"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc" id="bug_file_loc-help-link" class="help">URL:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_file_loc"><div class="link">
    <a href="http://www.w3.org/Style/CSS/Test/current/sec13.htm" target="_blank"
      rel="noreferrer" title="http://www.w3.org/Style/CSS/Test/current/sec13.htm"
      class="bug-url" data-safe="1">w3.org/Style/CSS/Test/current/sec13.htm</a>
  </div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-see_also" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also" id="see_also-help-link" class="help">See Also:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-see_also">
        ---
        </span>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-details"
>
    <header id="module-details-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Details section"
           data-label-collapsed="Expand Details section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-details-content"
             aria-expanded="false"
             aria-labeledby="module-details-title"
             aria-describedby="module-details-subtitle"></div>
        <h2 class="module-title" id="module-details-title">Details</h2>
          <h3 class="module-subtitle" id="module-details-subtitle">
            (Keywords: css1, testcase, Whiteboard: [patch][Hixie-P1][CSS1-5.4.3] (high profile: css1 test suite) underline not displayed properly across bold modifications [Hixie-B])
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-details-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field edit-show" id="field-alias" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias" id="alias-help-link" class="help">Alias:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-alias">
        ---
        </span>
    </div>

  
</div>

    <div class="field" id="field-keywords"
>
    <div class="name">
        <a href="/describekeywords.cgi" id="keywords-help-link" class="help">Keywords:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-keywords">
          <a href="/buglist.cgi?keywords=css1&amp;resolution=---">css1</a>, 
          <a href="/buglist.cgi?keywords=testcase&amp;resolution=---">testcase</a>
        </span>
    </div>

  
</div>

    <div class="field" id="field-status_whiteboard"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/Whiteboard" id="status_whiteboard-help-link" class="help">Whiteboard:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-status_whiteboard">[patch][Hixie-P1][CSS1-5.4.3] (high profile: css1 test suite) underline not displayed properly across bold modifications [Hixie-B]
        </span>
    </div>

  
</div><div class="field edit-show" id="field-cf_qa_whiteboard" style="display:none"
>
    <div class="name">QA Whiteboard:
    </div>


  
    <div class="value">
        <span id="field-value-cf_qa_whiteboard">
        ---
        </span>
    </div>

  
</div>

    

    <div class="field edit-show" id="field-cf_has_regression_range" style="display:none"
>
    <div class="name">Has Regression Range:
    </div>


  
    <div class="value">
        <span id="field-value-cf_has_regression_range">
            ---

        </span>
    </div>

  
</div><div class="field edit-show" id="field-cf_has_str" style="display:none"
>
    <div class="name">Has STR:
    </div>


  
    <div class="value">
        <span id="field-value-cf_has_str">
            ---

        </span>
    </div>

  
</div>

    <div class="field" id="field-votes"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes" id="votes-help-link" class="help">Votes:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-votes">4
        </span>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field" id="field-bug_flags"
>
    <div class="name">Bug Flags:
    </div>


  
    <div class=" container">
        <span id="field-value-bug_flags"><div id="bug-flags" class="flags">
  <table class="layout-table">
          <tbody class="edit-hide"><tr>
    <td class="flag-setter"><div class="vcard vcard_3881" ><a class="email " href="/user_profile?user_id=3881" > <span class="fna">dbaron</span></a>
</div>
    </td>

    <td class="flag-name">
        <a href="#a126633638_3881"
            class="rel-time-title activity-ref"
            title="18 years ago"
        data-time="1039413826"
      >blocking1.3a</a>
    </td>

    <td class="flag-value">-
    </td>

  </tr>
          </tbody>
          <tbody class="edit-show" style="display:none"><tr>
    <td class="flag-setter"><div class="vcard vcard_3881" ><a class="email " href="/user_profile?user_id=3881" > <span class="fna">dbaron</span></a>
</div>
    </td>

    <td class="flag-name">
      <label title="Use this flag to nominate bugs for fixing in the 1.3alpha milestone. If the bug is deemed critical for the release by drivers&#64;mozilla.org it will receive a &quot;+&quot;. If the bug is deemed to not be critical for this release drivers will add a &quot;-&quot; to the flag. " for="flag-31659">blocking1.3a</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag-31659-dirty">
      <select id="flag-31659" name="flag-31659"
        title="Use this flag to nominate bugs for fixing in the 1.3alpha milestone. If the bug is deemed critical for the release by drivers&#64;mozilla.org it will receive a &quot;+&quot;. If the bug is deemed to not be critical for this release drivers will add a &quot;-&quot; to the flag. "
        class="bug-flag">
          <option value="X"></option>
          <option value="-" selected>-</option>
      </select>
    </td>


  </tr>
          </tbody>
    <tbody class="edit-show" style="display:none"><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Is this bug/feature enabled in a release by a pref flag (see https://github.com/mozilla/bug-handling/blob/master/policy/feature-flags.md)?" for="flag_type-930">behind-pref</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-930-dirty">
      <select id="flag_type-930" name="flag_type-930"
        title="Is this bug/feature enabled in a release by a pref flag (see https://github.com/mozilla/bug-handling/blob/master/policy/feature-flags.md)?"
        class="bug-flag">
          <option value="X"></option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Flag tracking inclusion in the desktop Firefox product backlog." for="flag_type-846">firefox-backlog</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-846-dirty">
      <select id="flag_type-846" name="flag_type-846"
        title="Flag tracking inclusion in the desktop Firefox product backlog."
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Flag is used to track security bug bounty nominations. Mail security(at)mozilla.org to nominate a bug." for="flag_type-803">sec-bounty</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-803-dirty">
      <select id="flag_type-803" name="flag_type-803"
        title="Flag is used to track security bug bounty nominations. Mail security(at)mozilla.org to nominate a bug."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Flag is used to track whether the bug report is eligible for inclusion in the Bug Bounty Hall of Fame." for="flag_type-913">sec-bounty-hof</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-913-dirty">
      <select id="flag_type-913" name="flag_type-913"
        title="Flag is used to track whether the bug report is eligible for inclusion in the Bug Bounty Hall of Fame."
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Whether the bug has a testcase in the qa test suite or not. Set it to &quot;in-qa-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-qa-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-qa-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword." for="flag_type-787">in-qa-testsuite</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-787-dirty">
      <select id="flag_type-787" name="flag_type-787"
        title="Whether the bug has a testcase in the qa test suite or not. Set it to &quot;in-qa-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-qa-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-qa-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>

      <td class="flag-requestee">
        <div id="requestee_type-787-container" style="display:none"><input
    name="requestee_type-787"
    value="" class="requestee bz_autocomplete_user"  id="requestee_type-787" 
  >
        </div>
      <td>

  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Whether the bug has a testcase in the test suite or not. Set it to &quot;in-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword." for="flag_type-37">in-testsuite</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-37-dirty">
      <select id="flag_type-37" name="flag_type-37"
        title="Whether the bug has a testcase in the test suite or not. Set it to &quot;in-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="qe-verify: ? ➜ request to assess whether the bug should be tested manually
qe-verify: + ➜ request to verify the bug manually
qe-verify: – ➜ the bug will not/can not be verified manually" for="flag_type-864">qe-verify</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-864-dirty">
      <select id="flag_type-864" name="flag_type-864"
        title="qe-verify: ? ➜ request to assess whether the bug should be tested manually
qe-verify: + ➜ request to verify the bug manually
qe-verify: – ➜ the bug will not/can not be verified manually"
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr>
    </tbody>
  </table>
</div>
        </span>
    </div>

  
</div>
</div>

  
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-crash-data"
>
    <header id="module-crash-data-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Crash Data section"
           data-label-collapsed="Expand Crash Data section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-crash-data-content"
             aria-expanded="false"
             aria-labeledby="module-crash-data-title"
             aria-describedby="module-crash-data-subtitle"></div>
        <h2 class="module-title" id="module-crash-data-title">Crash Data</h2>
      </div>
    </header>
  <div class="module-content" id="module-crash-data-content" style="display:none"
  ><div class="field edit-show" id="field-cf_crash_signature" style="display:none"
>
    <div class="name">Signature:
    </div>


  
    <div class="value">
        <span id="field-value-cf_crash_signature">
        </span>
    </div>

  
</div>
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-security"
>
    <header id="module-security-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Security section"
           data-label-collapsed="Expand Security section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-security-content"
             aria-expanded="false"
             aria-labeledby="module-security-title"
             aria-describedby="module-security-subtitle"></div>
        <h2 class="module-title" id="module-security-title">Security</h2>
          <h3 class="module-subtitle" id="module-security-subtitle">
            (public)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-security-content" style="display:none"
  ><div class="groups edit-hide">
    This bug is publicly visible.
</div>

<div class="groups edit-show" style="display:none">


</div>
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-user-story" data-non-stick="1"
>
    <header id="module-user-story-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse User Story section"
           data-label-collapsed="Expand User Story section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-user-story-content"
             aria-expanded="false"
             aria-labeledby="module-user-story-title"
             aria-describedby="module-user-story-subtitle"></div>
        <h2 class="module-title" id="module-user-story-title">User Story</h2>
      </div>
    </header>
  <div class="module-content" id="module-user-story-content" style="display:none"
  >
    <pre id="user-story"></pre>
  </div>
</section>







<section class="module" id="module-attachments"
>
    <header id="module-attachments-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Attachments section"
           data-label-collapsed="Expand Attachments section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-attachments-content"
             aria-expanded="true"
             aria-labeledby="module-attachments-title"
             aria-describedby="module-attachments-subtitle"></div>
        <h2 class="module-title" id="module-attachments-title">Attachments</h2>
          <h3 class="module-subtitle" id="module-attachments-subtitle">
            (18 files, 27 obsolete files)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-attachments-content"
  ><table role="table" class="layout-table" id="attachments">
    <tr class="
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=679">Simplest testcase for CSS and HTML versions of the bug</a>
        </div>
        <div>
            <a href="#c7" class="attach-time activity-ref"><span class="rel-time" title="1999-07-02 22:19 PDT" data-time="930979199">21 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_4929" ><a class="email disabled" href="/user_profile?user_id=4929" > <span class="fna">Kenny Stoltz</span></a>
</div></span>
        </div>
        <div class="attach-info">341 bytes,
          text/html        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=679&amp;action=edit">Details</a>
    </tr>
    <tr class="
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=1772">underlining and images mixed up</a>
        </div>
        <div>
            <a href="#c11" class="attach-time activity-ref"><span class="rel-time" title="1999-09-20 11:23 PDT" data-time="937851839">21 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_3824" ><a class="email disabled" href="/user_profile?user_id=3824" > <span class="fna">kipp</span></a>
</div></span>
        </div>
        <div class="attach-info">742 bytes,
          text/html        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=1772&amp;action=edit">Details</a>
    </tr>
    <tr class="
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=1830"
              title="Reference image for attachment #1772."
              class="lightbox">
              <img src="/extensions/BugModal/web/image.png" width="16" height="16">Reference image for attachment #1772.
            </a>
        </div>
        <div>
            <a href="#c13" class="attach-time activity-ref"><span class="rel-time" title="1999-09-23 01:54 PDT" data-time="938076899">21 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_4054" ><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div></span>
        </div>
        <div class="attach-info">14.67 KB,
          image/gif        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=1830&amp;action=edit">Details</a>
    </tr>
    <tr class="
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=9622"
              title="What it looks like when text-decoration drawn by children"
              class="lightbox">
              <img src="/extensions/BugModal/web/image.png" width="16" height="16">What it looks like when text-decoration drawn by children
            </a>
        </div>
        <div>
            <a href="#c26" class="attach-time activity-ref"><span class="rel-time" title="2000-06-05 07:09 PDT" data-time="960214160">21 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_10914" ><a class="email " href="/user_profile?user_id=10914" > <span class="fna">Stephen Ostermiller</span></a>
</div></span>
        </div>
        <div class="attach-info">4.99 KB,
          image/gif        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=9622&amp;action=edit">Details</a>
    </tr>
    <tr class="
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=63182"
              title="as seen in Opera"
              class="lightbox">
              <img src="/extensions/BugModal/web/image.png" width="16" height="16">as seen in Opera
            </a>
        </div>
        <div>
            <a href="#c66" class="attach-time activity-ref"><span class="rel-time" title="2002-01-01 09:57 PST" data-time="1009907873">19 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_5630" ><a class="email disabled" href="/user_profile?user_id=5630" > <span class="fna">rbs</span></a>
</div></span>
        </div>
        <div class="attach-info">3.58 KB,
          image/gif        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=63182&amp;action=edit">Details</a>
    </tr>
    <tr class="
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=63191"
              title="Extended example in Opera"
              class="lightbox">
              <img src="/extensions/BugModal/web/image.png" width="16" height="16">Extended example in Opera
            </a>
        </div>
        <div>
            <a href="#c68" class="attach-time activity-ref"><span class="rel-time" title="2002-01-01 13:29 PST" data-time="1009920568">19 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_5630" ><a class="email disabled" href="/user_profile?user_id=5630" > <span class="fna">rbs</span></a>
</div></span>
        </div>
        <div class="attach-info">1.25 KB,
          image/gif        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=63191&amp;action=edit">Details</a>
    </tr>
    <tr class="
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=67207">simplified testcase for http://www.slashdot.org problem</a>
        </div>
        <div>
            <a href="#c74" class="attach-time activity-ref"><span class="rel-time" title="2002-01-30 19:53 PST" data-time="1012449186">19 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_4110" ><a class="email disabled" href="/user_profile?user_id=4110" > <span class="fna">Christine Hoffman</span></a>
</div></span>
        </div>
        <div class="attach-info">846 bytes,
          text/html        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=67207&amp;action=edit">Details</a>
    </tr>
    <tr class="
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=80448">testcase used for Opera' screenshots</a>
        </div>
        <div>
            <a href="#c90" class="attach-time activity-ref"><span class="rel-time" title="2002-04-22 14:16 PDT" data-time="1019510210">19 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_5630" ><a class="email disabled" href="/user_profile?user_id=5630" > <span class="fna">rbs</span></a>
</div></span>
        </div>
        <div class="attach-info">1.60 KB,
          text/html        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=80448&amp;action=edit">Details</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=81201">1st patch attempt. Should fix 20163, too.</a>
        </div>
        <div>
            <a href="#c91" class="attach-time activity-ref"><span class="rel-time" title="2002-04-26 13:26 PDT" data-time="1019852771">19 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_22237" ><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div></span>
        </div>
        <div class="attach-info">17.37 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=81201&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=81201&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=81201">Splinter Review</a>
    </tr>
    <tr class="
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=81224"
              title="Picture to be used with the following testcase..."
              class="lightbox">
              <img src="/extensions/BugModal/web/image.png" width="16" height="16">Picture to be used with the following testcase...
            </a>
        </div>
        <div>
            <a href="#c94" class="attach-time activity-ref"><span class="rel-time" title="2002-04-26 15:42 PDT" data-time="1019860942">19 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_22237" ><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div></span>
        </div>
        <div class="attach-info">5.01 KB,
          image/png        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=81224&amp;action=edit">Details</a>
    </tr>
    <tr class="
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=81228">Another testcase. Underline only.</a>
        </div>
        <div>
            <a href="#c95" class="attach-time activity-ref"><span class="rel-time" title="2002-04-26 15:52 PDT" data-time="1019861525">19 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_22237" ><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div></span>
        </div>
        <div class="attach-info">1.58 KB,
          text/html        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=81228&amp;action=edit">Details</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=81273">take 2. Now handles white-space only textFrames appropriately</a>
        </div>
        <div>
            <a href="#c98" class="attach-time activity-ref"><span class="rel-time" title="2002-04-27 04:08 PDT" data-time="1019905736">19 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_22237" ><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div></span>
        </div>
        <div class="attach-info">18.06 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=81273&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=81273&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=81273">Splinter Review</a>
    </tr>
    <tr class="
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=81294">testcase showing incorrect behavior with right alignment</a>
        </div>
        <div>
            <a href="#c99" class="attach-time activity-ref"><span class="rel-time" title="2002-04-27 09:51 PDT" data-time="1019926274">19 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_3881" ><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div></span>
        </div>
        <div class="attach-info">450 bytes,
          text/html        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=81294&amp;action=edit">Details</a>
    </tr>
    <tr class="
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=81295">testcase showing incorrect behavior with form controls</a>
        </div>
        <div>
            <a href="#c100" class="attach-time activity-ref"><span class="rel-time" title="2002-04-27 09:51 PDT" data-time="1019926299">19 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_3881" ><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div></span>
        </div>
        <div class="attach-info">565 bytes,
          text/html        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=81295&amp;action=edit">Details</a>
    </tr>
    <tr class="
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=81296">testcase showing problems / inconsistencies in painting order</a>
        </div>
        <div>
            <a href="#c102" class="attach-time activity-ref"><span class="rel-time" title="2002-04-27 10:00 PDT" data-time="1019926817">19 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_3881" ><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div></span>
        </div>
        <div class="attach-info">871 bytes,
          text/html        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=81296&amp;action=edit">Details</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=82518">Take 3. Now does text-alignment, painting-layers and form elements right. I hope :)</a>
        </div>
        <div>
            <a href="#c107" class="attach-time activity-ref"><span class="rel-time" title="2002-05-06 13:22 PDT" data-time="1020716549">19 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_22237" ><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div></span>
        </div>
        <div class="attach-info">19.56 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=82518&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=82518&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=82518">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=83043">Take 4. This patch is final (until otherwise proven :o) )</a>
        </div>
        <div>
            <a href="#c112" class="attach-time activity-ref"><span class="rel-time" title="2002-05-10 09:07 PDT" data-time="1021046829">19 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_22237" ><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div></span>
        </div>
        <div class="attach-info">19.68 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=83043&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=83043&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=83043">Splinter Review</a>
    </tr>
    <tr class="
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=83090">Testcase for font-color overrides text-decoration color quirk.</a>
        </div>
        <div>
            <a href="#c117" class="attach-time activity-ref"><span class="rel-time" title="2002-05-10 14:03 PDT" data-time="1021064598">19 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_22237" ><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div></span>
        </div>
        <div class="attach-info">254 bytes,
          text/html        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=83090&amp;action=edit">Details</a>
    </tr>
    <tr class="
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=84174">Testcase covering issues from comment 122 and comment 83</a>
        </div>
        <div>
            <a href="#c130" class="attach-time activity-ref"><span class="rel-time" title="2002-05-18 13:28 PDT" data-time="1021753686">19 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_22237" ><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div></span>
        </div>
        <div class="attach-info">1.22 KB,
          text/html        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=84174&amp;action=edit">Details</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=84175">Take 5:Final., unless otherwise proven. </a>
        </div>
        <div>
            <a href="#c132" class="attach-time activity-ref"><span class="rel-time" title="2002-05-18 13:48 PDT" data-time="1021754888">19 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_22237" ><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div></span>
        </div>
        <div class="attach-info">17.37 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=84175&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=84175&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=84175">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=85015">Take 6. Redesign to walk up only to first inline frame.</a>
        </div>
        <div>
            <a href="#c145" class="attach-time activity-ref"><span class="rel-time" title="2002-05-25 00:15 PDT" data-time="1022310940">19 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_22237" ><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div></span>
        </div>
        <div class="attach-info">24.42 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=85015&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=85015&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=85015">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=85019">Take 6. Redesign to walk up only to first inline frame.</a>
        </div>
        <div>
            <a href="#c146" class="attach-time activity-ref"><span class="rel-time" title="2002-05-25 00:48 PDT" data-time="1022312928">19 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_22237" ><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div></span>
        </div>
        <div class="attach-info">24.42 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=85019&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=85019&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=85019">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=85627">Take 7: Now handles padding and borders in inline frames correctly</a>
        </div>
        <div>
            <a href="#c148" class="attach-time activity-ref"><span class="rel-time" title="2002-05-30 11:15 PDT" data-time="1022782517">19 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_22237" ><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div></span>
        </div>
        <div class="attach-info">24.53 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=85627&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=85627&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=85627">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=86924">Same as take 7, but from a newer build (2002-06-08)</a>
        </div>
        <div>
            <a href="#c151" class="attach-time activity-ref"><span class="rel-time" title="2002-06-08 01:34 PDT" data-time="1023525299">19 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_22237" ><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div></span>
        </div>
        <div class="attach-info">23.95 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=86924&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=86924&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=86924">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=86952">The same patch as 86924 above, but with the missing file (nsLineLayout.h)</a>
        </div>
        <div>
            <a href="#c154" class="attach-time activity-ref"><span class="rel-time" title="2002-06-08 11:01 PDT" data-time="1023559288">19 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_22237" ><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div></span>
        </div>
        <div class="attach-info">13.59 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=86952&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=86952&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=86952">Splinter Review</a>
    </tr>
    <tr class="
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=86964">Hixie's mozconfig, with which the last patch doesn't run</a>
        </div>
        <div>
            <a href="#c156" class="attach-time activity-ref"><span class="rel-time" title="2002-06-08 16:22 PDT" data-time="1023578550">19 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_4054" ><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div></span>
        </div>
        <div class="attach-info">878 bytes,
          text/plain        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=86964&amp;action=edit">Details</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=86988">As above, but now it compiles AND runs in optimized builds</a>
        </div>
        <div>
            <a href="#c157" class="attach-time activity-ref"><span class="rel-time" title="2002-06-09 00:03 PDT" data-time="1023606194">19 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_22237" ><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div></span>
        </div>
        <div class="attach-info">24.78 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=86988&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=86988&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=86988">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=88644">Reverting to old code for quirks mode.</a>
        </div>
        <div>
            <a href="#c173" class="attach-time activity-ref"><span class="rel-time" title="2002-06-21 08:31 PDT" data-time="1024673474">18 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_22237" ><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div></span>
        </div>
        <div class="attach-info">34.96 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=88644&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=88644&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=88644">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=89942"
              title="Picture describing three possible ways to overline in quirks mode."
              class="lightbox">
              <img src="/extensions/BugModal/web/image.png" width="16" height="16">Picture describing three possible ways to overline in quirks mode.
            </a>
        </div>
        <div>
            <a href="#c180" class="attach-time activity-ref"><span class="rel-time" title="2002-07-02 10:04 PDT" data-time="1025629483">18 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_22237" ><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div></span>
        </div>
        <div class="attach-info">1.89 KB,
          image/png        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=89942&amp;action=edit">Details</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=92046">Latest patch updated with David Baron's comments</a>
        </div>
        <div>
            <a href="#c184" class="attach-time activity-ref"><span class="rel-time" title="2002-07-19 17:23 PDT" data-time="1027124586">18 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_22237" ><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div></span>
        </div>
        <div class="attach-info">35.27 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=92046&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=92046&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=92046">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=92047">As 92046/The latest patch, but /sans/ changes in whitespace. Don't check this version into CVS, please.</a>
        </div>
        <div>
            <a href="#c185" class="attach-time activity-ref"><span class="rel-time" title="2002-07-19 17:27 PDT" data-time="1027124870">18 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_22237" ><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div></span>
        </div>
        <div class="attach-info">32.09 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=92047&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=92047&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=92047">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=93061">Patch for this bug and bug 20163. This is the full patch version.</a>
        </div>
        <div>
            <a href="#c189" class="attach-time activity-ref"><span class="rel-time" title="2002-07-28 01:49 PDT" data-time="1027846175">18 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_22237" ><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div></span>
        </div>
        <div class="attach-info">35.33 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=93061&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=93061&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=93061">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=93062">As 93071,  but without whitespace differences. Meant for reviews only.</a>
        </div>
        <div>
            <a href="#c190" class="attach-time activity-ref"><span class="rel-time" title="2002-07-28 01:51 PDT" data-time="1027846288">18 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_22237" ><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div></span>
        </div>
        <div class="attach-info">32.15 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=93062&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=93062&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=93062">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=94210">Patch for this bug and bug 20163. This is the full patch version.</a>
        </div>
        <div>
            <a href="#c194" class="attach-time activity-ref"><span class="rel-time" title="2002-08-06 12:09 PDT" data-time="1028660998">18 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_22237" ><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div></span>
        </div>
        <div class="attach-info">35.35 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=94210&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=94210&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=94210">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=94213">-w patch: Same as 94210, except whitespace difference are ignored. For review only.</a>
        </div>
        <div>
            <a href="#c195" class="attach-time activity-ref"><span class="rel-time" title="2002-08-06 12:13 PDT" data-time="1028661183">18 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_22237" ><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div></span>
        </div>
        <div class="attach-info">32.17 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=94213&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=94213&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=94213">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=99407">Latest patch, full version</a>
        </div>
        <div>
            <a href="#c202" class="attach-time activity-ref"><span class="rel-time" title="2002-09-16 13:01 PDT" data-time="1032206469">18 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_22237" ><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div></span>
        </div>
        <div class="attach-info">36.28 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=99407&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=99407&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=99407">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=99408">Latest patch, -w version, for review /only/.</a>
        </div>
        <div>
            <a href="#c203" class="attach-time activity-ref"><span class="rel-time" title="2002-09-16 13:02 PDT" data-time="1032206532">18 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_22237" ><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div></span>
        </div>
        <div class="attach-info">33.10 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=99408&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=99408&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=99408">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=101439">Latest patch, including (most of) Boris Zbarsky comments</a>
        </div>
        <div>
            <a href="#c207" class="attach-time activity-ref"><span class="rel-time" title="2002-10-02 13:41 PDT" data-time="1033591312">18 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_22237" ><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div></span>
        </div>
        <div class="attach-info">36.23 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_20209" ><span class="fn">bzbarsky</span>
</div>:
              <a href="#c210"
                  class="flag-name-status rel-time-title activity-ref"
                  title="18 years ago"
              data-time="1033868761"
            >
              superreview+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=101439&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=101439&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=101439">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=101440">as  101439, but without whitespace diffs. *For review only*.</a>
        </div>
        <div>
            <a href="#c208" class="attach-time activity-ref"><span class="rel-time" title="2002-10-02 13:44 PDT" data-time="1033591458">18 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_22237" ><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div></span>
        </div>
        <div class="attach-info">33.04 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=101440&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=101440&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=101440">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=101870">Latest patch including the last of Boris Zbarsky comments.</a>
        </div>
        <div>
            <a href="#c211" class="attach-time activity-ref"><span class="rel-time" title="2002-10-05 23:37 PDT" data-time="1033886243">18 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_22237" ><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div></span>
        </div>
        <div class="attach-info">36.36 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_20209" ><span class="fn">bzbarsky</span>
</div>:
              <a href="#a121112256_20209"
                  class="flag-name-status rel-time-title activity-ref"
                  title="18 years ago"
              data-time="1033927316"
            >
              superreview+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=101870&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=101870&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=101870">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=101871">as  101870, but without whitespace diffs. *For review only*.</a>
        </div>
        <div>
            <a href="#c212" class="attach-time activity-ref"><span class="rel-time" title="2002-10-05 23:38 PDT" data-time="1033886320">18 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_22237" ><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div></span>
        </div>
        <div class="attach-info">33.17 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=101871&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=101871&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=101871">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=102946">Merge conflicts resolved; textual nonsense removed</a>
        </div>
        <div>
            <a href="#c215" class="attach-time activity-ref"><span class="rel-time" title="2002-10-15 11:09 PDT" data-time="1034705348">18 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_22237" ><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div></span>
        </div>
        <div class="attach-info">36.04 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_20209" ><span class="fn">bzbarsky</span>
</div>:
              <a href="#c218"
                  class="flag-name-status rel-time-title activity-ref"
                  title="18 years ago"
              data-time="1035613249"
            >
              superreview+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=102946&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=102946&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=102946">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=102947">Whitespace-less patch. For review only.</a>
        </div>
        <div>
            <a href="#c216" class="attach-time activity-ref"><span class="rel-time" title="2002-10-15 11:10 PDT" data-time="1034705415">18 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_22237" ><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div></span>
        </div>
        <div class="attach-info">33.05 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=102947&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=102947&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=102947">Splinter Review</a>
    </tr>
    <tr class="
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=108484">testcase for text-decoration on text inputs</a>
        </div>
        <div>
            <a href="#c220" class="attach-time activity-ref"><span class="rel-time" title="2002-12-06 05:22 PST" data-time="1039180937">18 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_3881" ><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div></span>
        </div>
        <div class="attach-info">1.35 KB,
          text/html        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=108484&amp;action=edit">Details</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=108525">patch, with dbaron's modifications</a>
        </div>
        <div>
            <a href="#c221" class="attach-time activity-ref"><span class="rel-time" title="2002-12-06 12:51 PST" data-time="1039207872">18 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_3881" ><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div></span>
        </div>
        <div class="attach-info">52.03 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_20209" ><span class="fn">bzbarsky</span>
</div>:
              <a href="#c226"
                  class="flag-name-status rel-time-title activity-ref"
                  title="18 years ago"
              data-time="1039294135"
            >
              superreview+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=108525&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=108525&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=108525">Splinter Review</a>
    </tr>
</table>

<footer id="attachments-footer">
  <div id="attachments-actions">
      <button type="button" id="attachments-obsolete-btn" class="secondary">Show Obsolete</button>
  </div>
  
</footer>
  </div>
</section>



<script nonce="ATLs7KOpi0TFvWI9DDduhW6NeB6Q9jHhlGTOpmNIvJfGvgOe">
  init_module_visibility();
</script>



<meta name="firefox-versions" content="{&quot;FIREFOX_AURORA&quot;:&quot;&quot;,&quot;FIREFOX_DEVEDITION&quot;:&quot;80.0b8&quot;,&quot;FIREFOX_ESR&quot;:&quot;68.11.0esr&quot;,&quot;FIREFOX_ESR_NEXT&quot;:&quot;78.1.0esr&quot;,&quot;FIREFOX_NIGHTLY&quot;:&quot;81.0a1&quot;,&quot;LAST_MERGE_DATE&quot;:&quot;2020-07-27&quot;,&quot;LAST_RELEASE_DATE&quot;:&quot;2020-07-28&quot;,&quot;LAST_SOFTFREEZE_DATE&quot;:&quot;2020-07-23&quot;,&quot;LATEST_FIREFOX_DEVEL_VERSION&quot;:&quot;80.0b8&quot;,&quot;LATEST_FIREFOX_OLDER_VERSION&quot;:&quot;3.6.28&quot;,&quot;LATEST_FIREFOX_RELEASED_DEVEL_VERSION&quot;:&quot;80.0b8&quot;,&quot;LATEST_FIREFOX_VERSION&quot;:&quot;79.0&quot;,&quot;NEXT_MERGE_DATE&quot;:&quot;2020-08-24&quot;,&quot;NEXT_RELEASE_DATE&quot;:&quot;2020-08-25&quot;,&quot;NEXT_SOFTFREEZE_DATE&quot;:&quot;2020-08-20&quot;}">


<div id="comment-actions">
    <button type="button" id="bottom-btn" class="secondary" aria-label="Go to Page Bottom">Bottom &darr;</button>
  <div class="dropdown">
    <button type="button" id="comment-tags-btn" aria-haspopup="true" aria-label="Tags"
      aria-expanded="false" aria-controls="comment-tags-menu" class="dropdown-button minor">Tags &#9662;</button>
    <ul id="comment-tags-menu" role="menu" tabindex="0" class="dropdown-content left" style="display:none">
      <li role="presentation">
        <a role="menuitem" tabindex="-1" data-comment-tag="">Reset</a>
      </li>
    </ul>
  </div>
  <div class="dropdown">
    <button type="button" id="view-menu-btn" aria-haspopup="true" aria-label="Timeline"
      aria-expanded="false" aria-controls="view-menu" class="dropdown-button minor">Timeline &#9662;</button>
    <ul id="view-menu" role="menu" tabindex="0" class="dropdown-content left" style="display:none">
      <li role="presentation">
        <a id="view-reset" role="menuitem" tabindex="-1">Reset</a>
      </li>
      <li role="separator"></li>
      <li role="presentation">
        <a id="view-collapse-all" role="menuitem" tabindex="-1">Collapse All</a>
      </li>
      <li role="presentation">
        <a id="view-expand-all" role="menuitem" tabindex="-1">Expand All</a>
      </li>
      <li role="presentation">
        <a id="view-comments-only" role="menuitem" tabindex="-1">Comments Only</a>
      </li>
    </ul>
   </div>
</div>
<div class="change-set" id="c0"><div class="comment" data-id="9912" data-no="0"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-0" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4082" ><img src="https://secure.gravatar.com/avatar/adc4316945e006c9a3241f657db0dd34?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4082" ><a class="email disabled" href="/user_profile?user_id=4082" > <span class="fna">glynn</span></a>
</div>
            <span class="user-role">Reporter</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-0"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-0" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c0">Description</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1998-12-04 15:44 PST" data-time="912815060">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-0">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-0" data-comment-id="9912">Dec3a Seamonkey build on NT4.0/SP3

1.  Create HTML page with this test case for body content:
&lt;u&gt;underline&lt;b&gt;bold&lt;/b&gt;&lt;/u&gt;

• &quot;bold&quot; underline is actually made bold as well, when in fact it should not be
affected by the bold tags.

Compared to IE4 and reference for baseline:

When the font size or font changes within an underlined section, the underlining
should stay at a constant vertical level:
<a rel="nofollow" href="http://www.w3.org/Style/CSS/Test/current/sec13.htm">http://www.w3.org/Style/CSS/Test/current/sec13.htm</a></pre></div><div class="change-set" id="a581557_3824"><div class="change" id="aa581557_3824">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3824" id="a581557_3824"><img src="https://secure.gravatar.com/avatar/047b642d42df45068d03b22ee35c2ce0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_3824" id="a581557_3824"><a class="email disabled" href="/user_profile?user_id=3824" > <span class="fna">kipp</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a581557_3824"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a581557_3824">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a581557_3824">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1998-12-11 09:16 PST" data-time="913396617">22 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Status: NEW &rarr; ASSIGNED</div></div></div><div class="change-set" id="c1"><div class="comment" data-id="9913" data-no="1"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-1" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a581557_3824"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a581557_3824"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-1"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-1" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c1">Comment 1</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1998-12-20 13:59 PST" data-time="914191199">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-1">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-1" data-comment-id="9913">The problem behind this bug is the same as the problem, shown in
<a rel="nofollow" href="http://www.w3.org/Style/CSS/Test/current/sec543.htm">http://www.w3.org/Style/CSS/Test/current/sec543.htm</a> , that text-decoration
*should* span children that have text-decoration set to none, since they are
still within the element that has the text decoration.</pre></div><div class="change-set" id="c2"><div class="comment" data-id="9914" data-no="2"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-2" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3853" id="a581557_3824"><img src="https://secure.gravatar.com/avatar/715f1344e52ba783e2f3d133a958bef4?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3853" id="a581557_3824"><a class="email disabled" href="/user_profile?user_id=3853" > <span class="fna">leger</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-2"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-2" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c2">Comment 2</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-02-03 08:08 PST" data-time="918058139">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-2">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-2" data-comment-id="9914">Setting all current Open/Normal to M4.</pre></div><div class="change-set" id="c3"><div class="comment" data-id="9915" data-no="3"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-3" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3819" id="a581557_3824"><img src="https://secure.gravatar.com/avatar/d2b2b0cadefe2defe4bd7a62e4384e6e?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3819" id="a581557_3824"><a class="email disabled" href="/user_profile?user_id=3819" > <span class="fna">Paul MacQuiddy</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-3"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-3" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c3">Comment 3</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-03-05 22:38 PST" data-time="920702339">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-3">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-3" data-comment-id="9915">per leger, assigning QA contacts to all open bugs without QA contacts according
to list at <a rel="nofollow" href="http://bugzilla.mozilla.org/describecomponents.cgi?product=Browser">http://bugzilla.mozilla.org/describecomponents.cgi?product=Browser</a></pre></div><div class="change-set" id="c4"><div class="comment" data-id="9916" data-no="4"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-4" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a581557_3824"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a581557_3824"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-4"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-4" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c4">Comment 4</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-12 08:06 PDT" data-time="926521619">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-4">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-4" data-comment-id="9916">Given the following CSS reformulation of the above example:

   &lt;span style=&quot;text-decoration:underline&quot;&gt;
     Outer
     &lt;span style=&quot;font-weight:bold;&quot;&gt; Inner &lt;/span&gt;
     Outer
   &lt;/span&gt;

The underlining should be the same throughout, as it is the
underlining of the outer span that is being applied to the inner span,
and not the inner span that is underlining itself. That is, the inner
span should have *no* effect on the rendering of the underlines.

The following test case explains everything in detail:
   <a rel="nofollow" href="http://www.bath.ac.uk/%7Epy8ieh/internet/eviltests/underline.html">http://www.bath.ac.uk/%7Epy8ieh/internet/eviltests/underline.html</a>

One way of looking at this is through inline boxes.

The above generates two inline boxes, one for the outer span and one
for the inner span. The inner inline box may overlap the outer inline
box (in this case they are perfectly aligned):

   +-------+========+-------+
   | Hello | Lovely | World |
   +-------+========+-------+

The underlining should (as I understand it) be applied *to the outer
inline box* only. That is why, for example, the colour is the same
throughout an underlining.

Another way of testing this: if you made the inner span invisible
(using the visibility property), the underlining should remain.</pre></div><div class="change-set" id="a14167194_4054"><div class="change" id="aa14167194_4054">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a14167194_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_4054" id="a14167194_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a14167194_4054"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a14167194_4054">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a14167194_4054">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-17 16:04 PDT" data-time="926982254">22 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Summary: underline not displayed properly across bold modifications &rarr; {css1} underline not displayed properly across bold modifications</div></div></div><div class="change-set" id="c5"><div class="comment" data-id="9917" data-no="5"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-5" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a14167194_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a14167194_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-5"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-5" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c5">Comment 5</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-17 16:17 PDT" data-time="926983079">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-5">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-5" data-comment-id="9917">See also <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED DUPLICATE - {css1} underline doesn't extend beneath image"
   href="/show_bug.cgi?id=3488">bug 3488</a>.</pre></div><div class="change-set" id="a14173068_4110"><div class="change" id="aa14173068_4110">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4110" id="a14173068_4110"><img src="https://secure.gravatar.com/avatar/a2ed12df8daafde5811afc0ad2515df6?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_4110" id="a14173068_4110"><a class="email disabled" href="/user_profile?user_id=4110" > <span class="fna">Christine Hoffman</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a14173068_4110"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a14173068_4110">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a14173068_4110">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-17 17:42 PDT" data-time="926988128">22 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">QA Contact: 4144 &rarr; 4110</div></div></div><div class="change-set" id="c6"><div class="comment" data-id="9918" data-no="6"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-6" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a14173068_4110"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a14173068_4110"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-6"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-6" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c6">Comment 6</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-26 15:23 PDT" data-time="927757439">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-6">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-6" data-comment-id="9918">See also <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED DUPLICATE - underline and collapsing trailing whitespace"
   href="/show_bug.cgi?id=1519">bug 1519</a>.</pre></div><div class="change-set" id="c7"><div class="comment" data-id="9919" data-no="7"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-7" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4929" id="a14173068_4110"><img src="https://secure.gravatar.com/avatar/3f463dd27725e5f700928a837f93f187?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4929" id="a14173068_4110"><a class="email disabled" href="/user_profile?user_id=4929" > <span class="fna">Kenny Stoltz</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-7"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-7" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c7">Comment 7</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-07-02 22:19 PDT" data-time="930979199">21 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-7">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-679"
         class="attachment"
         data-id="679" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="1777.html">
      <meta itemprop="contentSize" content="341">
      <meta itemprop="encodingFormat" content="text/html">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=679" itemprop="contentUrl">
        <span id="att-679-description" itemprop="description">Simplest testcase for CSS and HTML versions of the bug</span></a>
        — <a href="attachment.cgi?id=679&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div></div><div class="change-set" id="a18164309_4929"><div class="change" id="aa18164309_4929">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4929" id="a18164309_4929"><img src="https://secure.gravatar.com/avatar/3f463dd27725e5f700928a837f93f187?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_4929" id="a18164309_4929"><a class="email disabled" href="/user_profile?user_id=4929" > <span class="fna">Kenny Stoltz</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a18164309_4929"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a18164309_4929">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a18164309_4929">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-07-02 22:22 PDT" data-time="930979369">21 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Whiteboard: [makingtest] spacecow&#64;mis.net</div></div></div><div class="change-set" id="c8"><div class="comment" data-id="9920" data-no="8"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-8" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4929" id="a18164309_4929"><img src="https://secure.gravatar.com/avatar/3f463dd27725e5f700928a837f93f187?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4929" id="a18164309_4929"><a class="email disabled" href="/user_profile?user_id=4929" > <span class="fna">Kenny Stoltz</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-8"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-8" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c8">Comment 8</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-07-02 22:22 PDT" data-time="930979379">21 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-8">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-8" data-comment-id="9920">Sort of a lazy, easy testcase to write, but it's written. The file is basically
a copy of the comments written in, including CSS and HTML versions.</pre></div><div class="change-set" id="a18189152_4054"><div class="change" id="aa18189152_4054">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a18189152_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_4054" id="a18189152_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a18189152_4054"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a18189152_4054">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a18189152_4054">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-07-03 05:16 PDT" data-time="931004212">21 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Whiteboard: [makingtest] spacecow&#64;mis.net &rarr; [TESTCASE]</div></div></div><div class="change-set" id="c9"><div class="comment" data-id="9921" data-no="9"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-9" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a18189152_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a18189152_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-9"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-9" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c9">Comment 9</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-07-03 05:16 PDT" data-time="931004219">21 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-9">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-9" data-comment-id="9921">Here are the four test cases mentioned so far, in order of complexity (most
thorough test case first):

  <a rel="nofollow" href="http://www.bath.ac.uk/%7Epy8ieh/internet/eviltests/underline.html">http://www.bath.ac.uk/%7Epy8ieh/internet/eviltests/underline.html</a>
  <a rel="nofollow" href="http://www.w3.org/Style/CSS/Test/current/sec543.htm">http://www.w3.org/Style/CSS/Test/current/sec543.htm</a>
  <a rel="nofollow" href="http://bugzilla.mozilla.org/showattachment.cgi?attach_id=679">http://bugzilla.mozilla.org/showattachment.cgi?attach_id=679</a>
  <a rel="nofollow" href="http://www.w3.org/Style/CSS/Test/current/sec13.htm">http://www.w3.org/Style/CSS/Test/current/sec13.htm</a>

The problem is that underlining is being applied to children. It should not.
Underlining should be applied to the inline box which has &quot;text-decoration&quot;
set. It should be drawn a fixed offset (relative to the font size) from the
baseline of that element, without regard to any of the children.</pre></div><div class="change-set" id="c10"><div class="comment" data-id="9922" data-no="10"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-10" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3824" id="a18189152_4054"><img src="https://secure.gravatar.com/avatar/047b642d42df45068d03b22ee35c2ce0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3824" id="a18189152_4054"><a class="email disabled" href="/user_profile?user_id=3824" > <span class="fna">kipp</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-10"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-10" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c10">Comment 10</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-09-20 11:23 PDT" data-time="937851839">21 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-10">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-10" data-comment-id="9922">I believe that implementing underline this way will lead to a large number of
compatability problems. See the new attached test case. Comments please...</pre></div><div class="change-set" id="c11"><div class="comment" data-id="9923" data-no="11"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-11" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3824" id="a18189152_4054"><img src="https://secure.gravatar.com/avatar/047b642d42df45068d03b22ee35c2ce0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3824" id="a18189152_4054"><a class="email disabled" href="/user_profile?user_id=3824" > <span class="fna">kipp</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-11"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-11" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c11">Comment 11</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-09-20 11:23 PDT" data-time="937851839">21 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-11">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-1772"
         class="attachment"
         data-id="1772" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="underline3.html">
      <meta itemprop="contentSize" content="742">
      <meta itemprop="encodingFormat" content="text/html">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=1772" itemprop="contentUrl">
        <span id="att-1772-description" itemprop="description">underlining and images mixed up</span></a>
        — <a href="attachment.cgi?id=1772&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div></div><div class="change-set" id="c12"><div class="comment" data-id="9924" data-no="12"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-12" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3824" id="a18189152_4054"><img src="https://secure.gravatar.com/avatar/047b642d42df45068d03b22ee35c2ce0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3824" id="a18189152_4054"><a class="email disabled" href="/user_profile?user_id=3824" > <span class="fna">kipp</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-12"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-12" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c12">Comment 12</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-09-20 12:55 PDT" data-time="937857359">21 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-12">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-12" data-comment-id="9924">*** <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED DUPLICATE - {css1} underline doesn't extend beneath image"
   href="/show_bug.cgi?id=3488">Bug 3488</a> has been marked as a duplicate of this bug. ***</pre></div><div class="change-set" id="c13"><div class="comment" data-id="9925" data-no="13"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-13" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a18189152_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a18189152_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-13"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-13" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c13">Comment 13</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-09-23 01:54 PDT" data-time="938076899">21 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-13">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-1830"
         class="attachment"
         data-id="1830" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="1777.gif">
      <meta itemprop="contentSize" content="15025">
      <meta itemprop="encodingFormat" content="image/gif">
      <div class="label">
        Attached image
          <a class="link lightbox" href="attachment.cgi?id=1830" itemprop="contentUrl">
        <span id="att-1830-description" itemprop="description">Reference image for attachment #1772.</span></a>
        — <a href="attachment.cgi?id=1830&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div></div><div class="change-set" id="c14"><div class="comment" data-id="9926" data-no="14"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-14" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a18189152_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a18189152_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-14"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-14" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c14">Comment 14</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-09-23 02:06 PDT" data-time="938077619">21 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-14">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-14" data-comment-id="9926">When images and text are mixed up in links, legacy behaviour has been to break
the underlining under the images. This is ugly. :-)

The only case where there may be an important compat issue is when &lt;a&gt; elements
_only_ contain &lt;img&gt; elements [and possibly whitespace]. *In compat mode*, you
could put in code to work around this, if you really want to. I'm not convinced
that the problem will ever occur, since composite images with links are usually
sites where the Nav4 vs CSS2 line box compat issue rears its head, and so
underlining would get hidden behind the images _anyhow_.

We could always use some fancy CSS3-like syntax in compat-ua.css:

   :link:not-matches(IMG:only-node),
   :visited:not-matches(IMG:only-node) { text-decoration: underline; }

This would (given my various CSS proposals...) make all links that don't ONLY
contain images underlined.</pre></div><div class="change-set" id="c15"><div class="comment" data-id="9927" data-no="15"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-15" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a18189152_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a18189152_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-15"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-15" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c15">Comment 15</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-11-17 08:57 PST" data-time="942857879">21 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-15">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-15" data-comment-id="9927">*** <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED DUPLICATE - Link underscore discontinuous"
   href="/show_bug.cgi?id=10065">Bug 10065</a> has been marked as a duplicate of this bug. ***</pre></div><div class="change-set" id="c16"><div class="comment" data-id="9928" data-no="16"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-16" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a18189152_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a18189152_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-16"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-16" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c16">Comment 16</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-11-17 09:01 PST" data-time="942858119">21 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-16">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-16" data-comment-id="9928">Please disregard the previous comment, I was talking nonsense.

According to the SPEC, inline elements containing no text should NOT be
underlined -- from CSS2:
# 16.3.1 Underlining, overlining, striking, and blinking: the
# 'text-decoration' property
# ...
#   If the element has no content or no text content ... user agents must
#   ignore this property.

So this will not cause backwards-comptability problems anything like as serious
as I previously feared, and no CSS hacks will need to be used.

See also this Mozilla-specific test case:
   <a rel="nofollow" href="http://www.bath.ac.uk/%7Epy8ieh/internet/projects/mozilla/underline-img.html">http://www.bath.ac.uk/%7Epy8ieh/internet/projects/mozilla/underline-img.html</a></pre></div><div class="change-set" id="c17"><div class="comment" data-id="9929" data-no="17"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-17" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3853" id="a18189152_4054"><img src="https://secure.gravatar.com/avatar/715f1344e52ba783e2f3d133a958bef4?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3853" id="a18189152_4054"><a class="email disabled" href="/user_profile?user_id=3853" > <span class="fna">leger</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-17"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-17" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c17">Comment 17</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-12-14 13:53 PST" data-time="945208439">21 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-17">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-17" data-comment-id="9929">Updating to default Layout Assignee...kipp no longer with us :-(</pre></div><div class="change-set" id="c18"><div class="comment" data-id="9930" data-no="18"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-18" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3825" id="a18189152_4054"><img src="https://secure.gravatar.com/avatar/6d721cd00fc18fe29a87103b991f42f8?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3825" id="a18189152_4054"><a class="email disabled" href="/user_profile?user_id=3825" > <span class="fna">troy</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-18"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-18" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c18">Comment 18</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-12-14 14:15 PST" data-time="945209759">21 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-18">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-18" data-comment-id="9930">Why are you re-reassing layout bugs? Do NOT touch layout bugs.

The bugs are assigned to Kipp so they can stay neatly organized until we have a
new owner for the block/inline code.</pre></div><div class="change-set" id="a33171146_4054"><div class="change" id="aa33171146_4054">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a33171146_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_4054" id="a33171146_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a33171146_4054"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a33171146_4054">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a33171146_4054">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-12-23 13:56 PST" data-time="945986206">21 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Depends on: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - 'text-decoration' should not apply to text-less inlines (underline) [INLINE]"
   href="/show_bug.cgi?id=20163">20163</a></div><div class="change">Summary: {css1} underline not displayed properly across bold modifications &rarr; {css1} 'text-decoration' should not be drawn by children</div><div class="change">Whiteboard: [TESTCASE] &rarr; [TESTCASE] underline not displayed properly across bold modifications</div></div></div><div class="change-set" id="c19"><div class="comment" data-id="9931" data-no="19"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-19" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a33171146_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a33171146_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-19"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-19" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c19">Comment 19</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-12-23 13:56 PST" data-time="945986219">21 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-19">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-19" data-comment-id="9931"><a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - 'text-decoration' should not apply to text-less inlines (underline) [INLINE]"
   href="/show_bug.cgi?id=20163">Bug 20163</a> has been opened and now tracks the style system side of this issue,
namely that the 'text-decoration' property should not apply to text-less
elements. This bug can now track just the rendering issue.

To summarize: We should be applying the *-lining to the element which
has 'text-decoration' set, by drawing a line at a fixed offset from the
baseline (e.g. -0.01em for underline, +0.5em for strike-out, and +1.0em for
overline), and not doing anything special individually for the children.

So, for example, in the case of the following fragment:

   &lt;span style=&quot;text-decoration:overline&quot; id=&quot;a&quot;&gt;
     Outer
       &lt;span style=&quot;font-weight:bold;&quot; id=&quot;b&quot;&gt; Inner &lt;/span&gt;
     Outer
   &lt;/span&gt;

...the element 'a' should render the overline:
    ___________________
     Outer       Outer

...and the element 'b' should merely render its text:

           Inner

...which will result in:
    ___________________
     Outer Inner Outer

Thus the overline above 'Inner' is not any bolder than the rest.

Similarly for if this fragment:

   &lt;span style=&quot;text-decoration:overline&quot; id=&quot;a&quot;&gt;
     Outer
       &lt;span style=&quot;vertical-align: 1em;&quot; id=&quot;b&quot;&gt; Inner &lt;/span&gt;
     Outer
   &lt;/span&gt;

...the element 'a' should render the overline:
    ___________________
     Outer       Outer

...and the element 'b' should merely render its text:


           Inner

...which will result in:
    ___________________
     Outer       Outer
           Inner

Thus the overline is not broken where the child has moved.

Adding dependency on 20163; that bug must be fixed before this bug can be
considered totally fixed. Note, though, that <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - 'text-decoration' should not apply to text-less inlines (underline) [INLINE]"
   href="/show_bug.cgi?id=20163">bug 20163</a> is not required to fix
the rendering side of this bug as documented above.</pre></div><div class="change-set" id="a33697038_3829"><div class="change" id="aa33697038_3829">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3829" id="a33697038_3829"><img src="https://secure.gravatar.com/avatar/7aba2ae155191dadaca4e55e13aa3d02?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_3829" id="a33697038_3829"><a class="email disabled" href="/user_profile?user_id=3829" > <span class="fna">buster</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a33697038_3829"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a33697038_3829">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a33697038_3829">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-12-29 16:01 PST" data-time="946512098">21 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Summary: {css1} 'text-decoration' should not be drawn by children &rarr; {css1} [TEXT] 'text-decoration' should not be drawn by children</div></div></div><div class="change-set" id="a34992900_4054"><div class="change" id="aa34992900_4054">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a34992900_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_4054" id="a34992900_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a34992900_4054"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a34992900_4054">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a34992900_4054">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-01-13 15:59 PST" data-time="947807960">21 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=css1&amp;resolution=---">css1</a></div></div></div><div class="change-set" id="c20"><div class="comment" data-id="9932" data-no="20"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-20" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a34992900_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a34992900_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-20"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-20" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c20">Comment 20</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-01-13 15:59 PST" data-time="947807999">21 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-20">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-20" data-comment-id="9932">Migrating from {css1} to css1 keyword. The {css1}, {css2}, {css3} and {css-moz}
radars should now be considered deprecated in favour of keywords.
I am *really* sorry about the spam...</pre></div><div class="change-set" id="c21"><div class="comment" data-id="169955" data-no="21"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-21" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3845" id="a34992900_4054"><img src="https://secure.gravatar.com/avatar/bd7bb48a43dd57576b0aa61861029c25?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3845" id="a34992900_4054"><a class="email disabled" href="/user_profile?user_id=3845" > <span class="fna">ekrock's old account (dead)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-21"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-21" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c21">Comment 21</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-01-21 13:51 PST" data-time="948491508">21 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-21">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-21" data-comment-id="169955">Bulk moving [testcase] code to new testcase keyword. Sorry for the spam!</pre><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=testcase&amp;resolution=---">testcase</a></div></div></div><div class="change-set" id="a35905309_4054"><div class="change" id="aa35905309_4054">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a35905309_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_4054" id="a35905309_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a35905309_4054"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a35905309_4054">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a35905309_4054">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-01-24 05:26 PST" data-time="948720369">21 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Summary: {css1} [TEXT] 'text-decoration' should not be drawn by children &rarr; [TEXT] 'text-decoration' should not be drawn by children (underline)</div><div class="change">Whiteboard: [TESTCASE] underline not displayed properly across bold modifications &rarr; underline not displayed properly across bold modifications</div></div></div><div class="change-set" id="c22"><div class="comment" data-id="174387" data-no="22"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-22" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_9177" id="a35905309_4054"><img src="https://secure.gravatar.com/avatar/04529d8e4e94ebc8db44564a5a914531?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_9177" id="a35905309_4054"><a class="email disabled" href="/user_profile?user_id=9177" > <span class="fna">Matthew Brealey</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-22"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-22" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c22">Comment 22</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-01-27 07:33 PST" data-time="948987238">21 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-22">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-22" data-comment-id="174387">This is incorrect.

Text-decoration affects inline descendants with the characteristics of the 
ancestor. It is _not_ the case that it should span the descendants.

For example, given SPAN.insideP {font-size: 2em} with P {text-decoration: 
underline}, the SPAN is underlined at the appropriate place for the SPAN but at 
the thickness, colour, etc., implied by the P.

This bug is not a bug at all.

It is undesirable and results in ugly results to strain the words of the spec to 
mean that text-decoration should span rather than 'affect' (which is what the 
spec says).

I see no reason to change Mozilla to conform with something that the spec does 
not say and that results in ugly results.

Note that this bug is not entirely INVALID because the original report was 
correct (that the underline should not be bold), it is just subsequent report 
stating that it should span rather than affect descendants that are wrong.
</pre></div><div class="change-set" id="c23"><div class="comment" data-id="174407" data-no="23"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-23" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a35905309_4054"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a35905309_4054"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-23"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-23" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c23">Comment 23</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-01-27 08:08 PST" data-time="948989311">21 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-23">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-23" data-comment-id="174407">IMO, the spec is quite clear on this, and the above comments are wrong.  CSS2
section 16.3.1, <a rel="nofollow" href="http://www.w3.org/TR/REC-CSS2/text.html#lining-striking-props">http://www.w3.org/TR/REC-CSS2/text.html#lining-striking-props</a> ,
says that text-decorations are drawn on all *boxes* generated by an inline
element.  The boxes horizontally contain the children, so it spans children.

I don't like this part of the spec, but that's what it says.  I do agree that
the results can be ugly.  Perhaps there should be an attempt to change the spec?</pre></div><div class="change-set" id="c24"><div class="comment" data-id="218658" data-no="24"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-24" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3829" id="a35905309_4054"><img src="https://secure.gravatar.com/avatar/7aba2ae155191dadaca4e55e13aa3d02?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3829" id="a35905309_4054"><a class="email disabled" href="/user_profile?user_id=3829" > <span class="fna">buster</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-24"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-24" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c24">Comment 24</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-03-03 16:08 PST" data-time="952128535">21 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-24">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-24" data-comment-id="218658">mine! mine mine mine!  all mine!  whoo-hoo!</pre><div class="activity"><div class="change">Assignee: kipp &rarr; buster</div></div></div><div class="change-set" id="c25"><div class="comment" data-id="314508" data-no="25"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-25" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3829" id="a35905309_4054"><img src="https://secure.gravatar.com/avatar/7aba2ae155191dadaca4e55e13aa3d02?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3829" id="a35905309_4054"><a class="email disabled" href="/user_profile?user_id=3829" > <span class="fna">buster</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-25"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-25" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c25">Comment 25</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-06-01 11:44 PDT" data-time="959885044">21 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-25">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-25" data-comment-id="314508">Here is the initial batch of layout [TEXT] bugs.  I'll search for more today, 
but this should keep you busy for a while!

Please review these for possible dogfood or nsbeta2 candidates, and assign your 
own priority and milestone for each.  The current settings were relative to my 
bug list, and they might not make sense any more.</pre><div class="activity"><div class="change">Assignee: buster &rarr; erik</div></div></div><div class="change-set" id="c26"><div class="comment" data-id="317789" data-no="26"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-26" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_10914" id="a35905309_4054"><img src="https://secure.gravatar.com/avatar/dcd6bdf843c71ebe797755f6284aba60?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_10914" id="a35905309_4054"><a class="email " href="/user_profile?user_id=10914" > <span class="fna">Stephen Ostermiller</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-26"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-26" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c26">Comment 26</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-06-05 07:09 PDT" data-time="960214160">21 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-26">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-9622"
         class="attachment"
         data-id="9622" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="children.gif">
      <meta itemprop="contentSize" content="5113">
      <meta itemprop="encodingFormat" content="image/gif">
      <div class="label">
        Attached image
          <a class="link lightbox" href="attachment.cgi?id=9622" itemprop="contentUrl">
        <span id="att-9622-description" itemprop="description">What it looks like when text-decoration drawn by children</span></a>
        — <a href="attachment.cgi?id=9622&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div></div><div class="change-set" id="c27"><div class="comment" data-id="318417" data-no="27"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-27" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3845" id="a35905309_4054"><img src="https://secure.gravatar.com/avatar/bd7bb48a43dd57576b0aa61861029c25?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3845" id="a35905309_4054"><a class="email disabled" href="/user_profile?user_id=3845" > <span class="fna">ekrock's old account (dead)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-27"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-27" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c27">Comment 27</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-06-05 15:14 PDT" data-time="960243240">21 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-27">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-27" data-comment-id="318417">Nom. nsbeta2, recc. nsbeta2 6/15, falling through to nsbeta3+ if we miss b2. 
CSS1 compliance is key b2 criterion, *plus* the problem shows up on the official 
W3C CSS1 test suite.</pre><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=nsbeta2&amp;resolution=---">nsbeta2</a></div></div></div><div class="change-set" id="a47431659_178851"><div class="change" id="aa47431659_178851">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_178851" id="a47431659_178851"><img src="https://secure.gravatar.com/avatar/1378a8f2585c98775077e1401e76dbfb?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_178851" id="a47431659_178851"><a class="email disabled" href="/user_profile?user_id=178851" > <span class="fna">Erik van der Poel</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a47431659_178851"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a47431659_178851">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a47431659_178851">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-06-05 16:11 PDT" data-time="960246719">21 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Status: NEW &rarr; ASSIGNED</div></div></div><div class="change-set" id="c28"><div class="comment" data-id="318741" data-no="28"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-28" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3853" id="a47431659_178851"><img src="https://secure.gravatar.com/avatar/715f1344e52ba783e2f3d133a958bef4?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3853" id="a47431659_178851"><a class="email disabled" href="/user_profile?user_id=3853" > <span class="fna">leger</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-28"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-28" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c28">Comment 28</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-06-05 17:38 PDT" data-time="960251898">21 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-28">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-28" data-comment-id="318741">Putting on [nsbeta2+] [will be minus on 6/15] radar.</pre><div class="activity"><div class="change">Whiteboard: underline not displayed properly across bold modifications &rarr; [nsbeta2+][will be minus on 6/15]underline not displayed properly across bold modifications</div></div></div><div class="change-set" id="c29"><div class="comment" data-id="330036" data-no="29"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-29" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3845" id="a47431659_178851"><img src="https://secure.gravatar.com/avatar/bd7bb48a43dd57576b0aa61861029c25?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3845" id="a47431659_178851"><a class="email disabled" href="/user_profile?user_id=3845" > <span class="fna">ekrock's old account (dead)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-29"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-29" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c29">Comment 29</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-06-14 19:08 PDT" data-time="961034938">21 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-29">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-29" data-comment-id="330036">Nominating nsbeta2,nsbeta3,rtm. Recc. nsbeta2+, falling through to nsbeta3+ and 
rtm+ if necessary. This is a W3C CSS1 Official Test Suite compliance bug.</pre></div><div class="change-set" id="a48219898_3845"><div class="change" id="aa48219898_3845">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3845" id="a48219898_3845"><img src="https://secure.gravatar.com/avatar/bd7bb48a43dd57576b0aa61861029c25?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_3845" id="a48219898_3845"><a class="email disabled" href="/user_profile?user_id=3845" > <span class="fna">ekrock's old account (dead)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a48219898_3845"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a48219898_3845">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a48219898_3845">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-06-14 19:09 PDT" data-time="961034958">21 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=nsbeta3&amp;resolution=---">nsbeta3</a>, 
          
            <a href="/buglist.cgi?keywords=rtm&amp;resolution=---">rtm</a></div></div></div><div class="change-set" id="c30"><div class="comment" data-id="330067" data-no="30"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-30" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3845" id="a48219898_3845"><img src="https://secure.gravatar.com/avatar/bd7bb48a43dd57576b0aa61861029c25?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3845" id="a48219898_3845"><a class="email disabled" href="/user_profile?user_id=3845" > <span class="fna">ekrock's old account (dead)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-30"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-30" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c30">Comment 30</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-06-14 19:38 PDT" data-time="961036730">21 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-30">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-30" data-comment-id="330067">Sorry, to clarify: this is not an nsbeta2 stopper, but I'd permit checking in 
prior to nsbeta2 if we have a fix. Recc. nsbeta2+[some lenient date-], falling 
through to nsbeta3+ hard stop if not fixed during nsbeta2. This is a W3C CSS1 
Official Test Suite compliance bug.</pre></div><div class="change-set" id="c31"><div class="comment" data-id="330871" data-no="31"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-31" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4120" id="a48219898_3845"><img src="https://secure.gravatar.com/avatar/dcd8d4156aef23d55bf7812a191b92ea?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4120" id="a48219898_3845"><a class="email disabled" href="/user_profile?user_id=4120" > <span class="fna">ckritzer (gone)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-31"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-31" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c31">Comment 31</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-06-15 13:21 PDT" data-time="961100470">21 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-31">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-31" data-comment-id="330871">PDT: please leave nsbeta2+.  Standards compliance issue.
</pre></div><div class="change-set" id="c32"><div class="comment" data-id="330882" data-no="32"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-32" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4120" id="a48219898_3845"><img src="https://secure.gravatar.com/avatar/dcd8d4156aef23d55bf7812a191b92ea?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4120" id="a48219898_3845"><a class="email disabled" href="/user_profile?user_id=4120" > <span class="fna">ckritzer (gone)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-32"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-32" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c32">Comment 32</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-06-15 13:22 PDT" data-time="961100539">21 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-32">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-32" data-comment-id="330882">Sorry, I was going to reference ekrock's 2000-06-14 19:08 comments...
</pre></div><div class="change-set" id="c33"><div class="comment" data-id="333112" data-no="33"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-33" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_107" id="a48219898_3845"><img src="https://secure.gravatar.com/avatar/6c1879a1318e3eba117d6675346f70ff?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_107" id="a48219898_3845"><a class="email disabled" href="/user_profile?user_id=107" > <span class="fna">Jim Roskind</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-33"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-33" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c33">Comment 33</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-06-17 11:08 PDT" data-time="961265331">21 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-33">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-33" data-comment-id="333112">6/15 has passed... changing to nsbeta2 minus</pre><div class="activity"><div class="change">Whiteboard: [nsbeta2+][will be minus on 6/15]underline not displayed properly across bold modifications &rarr; [nsbeta2-]underline not displayed properly across bold modifications</div></div></div><div class="change-set" id="c34"><div class="comment" data-id="347390" data-no="34"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-34" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_9128" id="a48219898_3845"><img src="https://secure.gravatar.com/avatar/9732ee24e0471459d2bf996fcbb47626?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_9128" id="a48219898_3845"><a class="email " href="/user_profile?user_id=9128" > <span class="fna">Martin Horwath</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-34"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-34" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c34">Comment 34</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-07-03 02:37 PDT" data-time="962617028">20 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-34">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-34" data-comment-id="347390">*** <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED DUPLICATE - *Thick* bold underline (?)"
   href="/show_bug.cgi?id=44420">Bug 44420</a> has been marked as a duplicate of this bug. ***</pre></div><div class="change-set" id="a51385648_4054"><div class="change" id="aa51385648_4054">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a51385648_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_4054" id="a51385648_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a51385648_4054"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a51385648_4054">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a51385648_4054">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-07-21 10:31 PDT" data-time="964200708">20 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=correctness&amp;resolution=---">correctness</a></div></div></div><div class="change-set" id="c35"><div class="comment" data-id="370580" data-no="35"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-35" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a51385648_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a51385648_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-35"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-35" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c35">Comment 35</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-07-26 11:28 PDT" data-time="964636115">20 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-35">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-35" data-comment-id="370580">As per meeting with ChrisD yesterday, taking QA.</pre><div class="activity"><div class="change">QA Contact: chrisd &rarr; py8ieh=bugzilla</div></div></div><div class="change-set" id="a52393509_4054"><div class="change" id="aa52393509_4054">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a52393509_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_4054" id="a52393509_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a52393509_4054"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a52393509_4054">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a52393509_4054">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-08-02 02:29 PDT" data-time="965208569">20 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Whiteboard: [nsbeta2-]underline not displayed properly across bold modifications &rarr; [nsbeta2-] hit during nsbeta2 standards compliance testing | underline not displayed properly across bold modifications</div></div></div><div class="change-set" id="c36"><div class="comment" data-id="388678" data-no="36"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-36" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a52393509_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a52393509_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-36"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-36" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c36">Comment 36</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-08-09 23:00 PDT" data-time="965887225">20 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-36">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-36" data-comment-id="388678">*** <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED DUPLICATE - text-decoration: underline and image missing underline"
   href="/show_bug.cgi?id=47749">Bug 47749</a> has been marked as a duplicate of this bug. ***</pre></div><div class="change-set" id="c37"><div class="comment" data-id="395096" data-no="37"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-37" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1904" id="a52393509_4054"><img src="https://secure.gravatar.com/avatar/944bd43fe0fa3f3f51596ebd0267af9c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_1904" id="a52393509_4054"><a class="email disabled" href="/user_profile?user_id=1904" > <span class="fna">Frank Tang</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-37"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-37" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c37">Comment 37</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-08-15 15:05 PDT" data-time="966377152">20 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-37">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-37" data-comment-id="395096">nsbeta3+ P3 per bug meeting (ekrock)</pre><div class="activity"><div class="change">Whiteboard: [nsbeta2-] hit during nsbeta2 standards compliance testing | underline not displayed properly across bold modifications &rarr; [nsbeta2-] nsbeta3+ hit during nsbeta2 standards compliance testing | underline not displayed properly across bold modifications</div></div></div><div class="change-set" id="c38"><div class="comment" data-id="406386" data-no="38"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-38" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_16235" id="a52393509_4054"><img src="https://secure.gravatar.com/avatar/35bfcd8e16b4baef4adbad306a66093b?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_16235" id="a52393509_4054"><a class="email disabled" href="/user_profile?user_id=16235" > <span class="fna">Jaime Rodriguez, Jr.</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-38"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-38" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c38">Comment 38</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-08-24 14:24 PDT" data-time="967152254">20 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-38">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-38" data-comment-id="406386">Adding buster to cc: list.</pre></div><div class="change-set" id="c39"><div class="comment" data-id="408835" data-no="39"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-39" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a52393509_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a52393509_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-39"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-39" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c39">Comment 39</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-08-26 01:08 PDT" data-time="967277304">20 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-39">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-39" data-comment-id="408835">*** <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - [quirks]Text that's bold and underlined is handled wrong"
   href="/show_bug.cgi?id=50410">Bug 50410</a> has been marked as a duplicate of this bug. ***</pre></div><div class="change-set" id="c40"><div class="comment" data-id="408840" data-no="40"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-40" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_18967" id="a52393509_4054"><img src="https://secure.gravatar.com/avatar/9e92f37b17bae092cda2a1779f5f8e25?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_18967" id="a52393509_4054"><a class="email disabled" href="/user_profile?user_id=18967" > <span class="fna">Chris McClelland</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-40"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-40" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c40">Comment 40</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-08-26 01:22 PDT" data-time="967278139">20 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-40">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-40" data-comment-id="408840">When is the going to be fixed???</pre></div><div class="change-set" id="c41"><div class="comment" data-id="410881" data-no="41"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-41" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_18967" id="a52393509_4054"><img src="https://secure.gravatar.com/avatar/9e92f37b17bae092cda2a1779f5f8e25?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_18967" id="a52393509_4054"><a class="email disabled" href="/user_profile?user_id=18967" > <span class="fna">Chris McClelland</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-41"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-41" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c41">Comment 41</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-08-28 20:26 PDT" data-time="967519584">20 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-41">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-41" data-comment-id="410881">I've recently become aware that my last comment was rude. It was not meant to 
be so. I understand that a lot of the people working on this project are doing 
so for nothing. As such we should not expect these developers to do anything, 
and what they do we should be quite thankful for.

P.S. I'm interested in trying to fix this bug myself. I can program, but I'm 
quite new to Mozilla. What section of the code should I start looking at? Thanks</pre></div><div class="change-set" id="c42"><div class="comment" data-id="410944" data-no="42"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-42" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a52393509_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a52393509_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-42"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-42" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c42">Comment 42</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-08-28 21:55 PDT" data-time="967524913">20 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-42">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-42" data-comment-id="410944">At a guess, |nsTextFrame::PaintTextDecorations| in 
   .../layout/html/base/src/nsTextFrame.cpp
...sounds like a good place to start (around lines 1516).

buster? erik? dbaron? waterson? Anyone want to help here?

Heejaf: Make sure you read _all_ the comments above, along with everything in
all the linked files, and all the relevant documentation on mozilla.org. You'll 
probably save yourself a lot of pain! ;-)</pre><div class="activity"><div class="change">OS: Windows NT &rarr; All</div><div class="change">Hardware: PC &rarr; All</div><div class="change">Whiteboard: [nsbeta2-] nsbeta3+ hit during nsbeta2 standards compliance testing | underline not displayed properly across bold modifications &rarr; [nsbeta2-] [nsbeta3+] hit during nsbeta2 standards compliance testing | underline not displayed properly across bold modifications</div></div></div><div class="change-set" id="c43"><div class="comment" data-id="411224" data-no="43"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-43" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_178851" id="a52393509_4054"><img src="https://secure.gravatar.com/avatar/1378a8f2585c98775077e1401e76dbfb?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_178851" id="a52393509_4054"><a class="email disabled" href="/user_profile?user_id=178851" > <span class="fna">Erik van der Poel</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-43"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-43" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c43">Comment 43</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-08-29 10:00 PDT" data-time="967568458">20 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-43">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-43" data-comment-id="411224">David Baron wrote:
<span class="quote">&gt;I don't like this part of the spec, but that's what it says.  I do agree that
&gt;the results can be ugly.  Perhaps there should be an attempt to change the </span >
spec?

Perhaps we should resolve this question before deciding to make Mozilla produce
ugly results. Comments?</pre></div><div class="change-set" id="c44"><div class="comment" data-id="411267" data-no="44"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-44" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_8444" id="a52393509_4054"><img src="https://secure.gravatar.com/avatar/62844405c164de5fc2e38dad0af0c997?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_8444" id="a52393509_4054"><a class="email " href="/user_profile?user_id=8444" > <span class="fna">Matthew Paul Thomas</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-44"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-44" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c44">Comment 44</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-08-29 10:35 PDT" data-time="967570500">20 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-44">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-44" data-comment-id="411267">Well, it seems there's three parts to that problem.

1.  Given that Ian Hickson's eviltest says that his interpretation `generates
    much nicer looking underlines' (and I agree with that), what is David Baron's
    evidence for saying that `the results can be ugly' in real-world typography?

2.  Which problem would Web authors be more likely to come up against on the Web
    (assuming an implementation which somehow managed to get it wrong both ways):
    the ugliness which Ian's interpretation solves, or the ugliness which David
    referred to?

3.  Do you really think you can get the CSS spec changed before nsbeta3 ships, or
    is it better to just implement CSS1 first and ask questions later?
</pre></div><div class="change-set" id="c45"><div class="comment" data-id="411342" data-no="45"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-45" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a52393509_4054"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a52393509_4054"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-45"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-45" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c45">Comment 45</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-08-29 11:34 PDT" data-time="967574084">20 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-45">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-45" data-comment-id="411342">I retract my previous comments about the spec being wrong.  I was considering an
edge case that the WinIE/Nav4 version made better and note some other edge cases
that the CSS spec's version made better.  I think this should be fixed.</pre></div><div class="change-set" id="c46"><div class="comment" data-id="412043" data-no="46"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-46" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3845" id="a52393509_4054"><img src="https://secure.gravatar.com/avatar/bd7bb48a43dd57576b0aa61861029c25?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3845" id="a52393509_4054"><a class="email disabled" href="/user_profile?user_id=3845" > <span class="fna">ekrock's old account (dead)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-46"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-46" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c46">Comment 46</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-08-29 16:30 PDT" data-time="967591826">20 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-46">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-46" data-comment-id="412043">This bug has been marked [nsbeta3-] because the engineer it is assigned to is 
overburdened. Do not clear [nsbeta3-] unless you are reassigning the bug to 
yourself and committing to deliver a fix within the nsbeta3 timeframe. There is 
a workaround: use SPANs and set desired text-decoration problems on those rather 
than relying on the parent and inheritance. Future. relnote. helpwanted. Though 
it is unfortunate that it was not possible to fix this bug for the first 
release, the user and developer impact is minimal (even with the bug displayed, 
the text is fully readable, just not quite as elegant as desired) and folks can 
either work around the bug or write their content ignoring it and live with the 
visual display of the bug until this is fixed; we'll shoot for fixing in an 
early post-RTM release.</pre><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=helpwanted&amp;resolution=---">helpwanted</a>, 
          
            <a href="/buglist.cgi?keywords=relnote&amp;resolution=---">relnote</a></div><div class="change">Whiteboard: [nsbeta2-] [nsbeta3+] hit during nsbeta2 standards compliance testing | underline not displayed properly across bold modifications &rarr; [nsbeta2-] [nsbeta3-] hit during nsbeta2 standards compliance testing | underline not displayed properly across bold modifications</div><div class="change">Target Milestone: M17 &rarr; Future</div></div></div><div class="change-set" id="c47"><div class="comment" data-id="412103" data-no="47"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-47" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a52393509_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a52393509_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-47"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-47" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c47">Comment 47</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-08-29 16:57 PDT" data-time="967593476">20 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-47">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-47" data-comment-id="412103">ekrock: Just for the record, there is *not* a workaround for this. The work-
around you propose would actually make the problem worse.

BTW, MacIE5 does this correctly.</pre><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=4xp&amp;resolution=---">4xp</a>, 
          
            <a href="/buglist.cgi?keywords=ns6.01&amp;resolution=---">ns6.01</a></div></div></div><div class="change-set" id="a54820127_8444"><div class="change" id="aa54820127_8444">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_8444" id="a54820127_8444"><img src="https://secure.gravatar.com/avatar/62844405c164de5fc2e38dad0af0c997?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_8444" id="a54820127_8444"><a class="email " href="/user_profile?user_id=8444" > <span class="fna">Matthew Paul Thomas</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a54820127_8444"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a54820127_8444">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a54820127_8444">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-08-30 04:33 PDT" data-time="967635187">20 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=correctness&amp;resolution=---">correctness</a>, 
          
            <a href="/buglist.cgi?keywords=relnote&amp;resolution=---">relnote</a>, 
          
            <a href="/buglist.cgi?keywords=rtm&amp;resolution=---">rtm</a> &rarr; <a href="/buglist.cgi?keywords=relnote3&amp;resolution=---">relnote3</a>, 
          
            <a href="/buglist.cgi?keywords=relnoteRTM&amp;resolution=---">relnoteRTM</a></div></div></div><div class="change-set" id="a54979610_4054"><div class="change" id="aa54979610_4054">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a54979610_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_4054" id="a54979610_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a54979610_4054"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a54979610_4054">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a54979610_4054">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-09-01 00:51 PDT" data-time="967794670">20 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Summary: [TEXT] 'text-decoration' should not be drawn by children (underline) &rarr; [TEXT] 'text-decoration' should not be drawn by children (underline) [INLINE]</div></div></div><div class="change-set" id="a59524839_9911"><div class="change" id="aa59524839_9911">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_9911" id="a59524839_9911"><img src="https://secure.gravatar.com/avatar/559c3cf31c98a95b23421186b78df500?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_9911" id="a59524839_9911"><a class="email disabled" href="/user_profile?user_id=9911" > <span class="fna">Gervase Markham [:gerv] (not reading bugmail)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a59524839_9911"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a59524839_9911">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a59524839_9911">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-10-23 15:24 PDT" data-time="972339899">20 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Keywords: <span class="activity-deleted"><a href="/buglist.cgi?keywords=relnote3&amp;resolution=---">relnote3</a></span></div><div class="change">Whiteboard: [nsbeta2-] [nsbeta3-] hit during nsbeta2 standards compliance testing | underline not displayed properly across bold modifications &rarr; [nsbeta2-] [nsbeta3-] relnote-devel hit during nsbeta2 standards compliance testing | underline not displayed properly across bold modifications</div></div></div><div class="change-set" id="c48"><div class="comment" data-id="506701" data-no="48"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-48" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4110" id="a59524839_9911"><img src="https://secure.gravatar.com/avatar/a2ed12df8daafde5811afc0ad2515df6?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4110" id="a59524839_9911"><a class="email disabled" href="/user_profile?user_id=4110" > <span class="fna">Christine Hoffman</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-48"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-48" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c48">Comment 48</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-11-07 15:45 PST" data-time="973640719">20 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-48">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-48" data-comment-id="506701">Testing on 11_06 branch builds, Linux and Mac look okay. Underlining is
consistent and not bolded.</pre></div><div class="change-set" id="c49"><div class="comment" data-id="508489" data-no="49"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-49" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_18967" id="a59524839_9911"><img src="https://secure.gravatar.com/avatar/9e92f37b17bae092cda2a1779f5f8e25?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_18967" id="a59524839_9911"><a class="email disabled" href="/user_profile?user_id=18967" > <span class="fna">Chris McClelland</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-49"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-49" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c49">Comment 49</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-11-09 14:44 PST" data-time="973809889">20 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-49">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-49" data-comment-id="508489">Still seeing this on Windows 98 with the Nov 9 daily build. What could have 
changed in the Linux and Mac builds?</pre><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=ns601&amp;resolution=---">ns601</a> &rarr; <a href="/buglist.cgi?keywords=highrisk&amp;resolution=---">highrisk</a></div></div></div><div class="change-set" id="c50"><div class="comment" data-id="508666" data-no="50"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-50" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a59524839_9911"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a59524839_9911"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-50"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-50" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c50">Comment 50</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-11-09 17:31 PST" data-time="973819913">20 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-50">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-50" data-comment-id="508666">Chris: Linux and Mac are still broken in my tests -- see 
   <a rel="nofollow" href="http://www.bath.ac.uk/%7Epy8ieh/internet/eviltests/underline.html">http://www.bath.ac.uk/%7Epy8ieh/internet/eviltests/underline.html</a>
...for a comprehensive test suite.</pre><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=mozilla0.9&amp;resolution=---">mozilla0.9</a></div></div></div><div class="change-set" id="c51"><div class="comment" data-id="509907" data-no="51"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-51" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_18967" id="a59524839_9911"><img src="https://secure.gravatar.com/avatar/9e92f37b17bae092cda2a1779f5f8e25?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_18967" id="a59524839_9911"><a class="email disabled" href="/user_profile?user_id=18967" > <span class="fna">Chris McClelland</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-51"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-51" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c51">Comment 51</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-11-11 11:46 PST" data-time="973972009">20 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-51">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-51" data-comment-id="509907">Will this be fixed for NS6 1.0?
I just don't see how everyone can be claiming such great standards support when
Mozilla is not even passing the standard CSS1 test suite.</pre></div><div class="change-set" id="c52"><div class="comment" data-id="510203" data-no="52"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-52" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_15223" id="a59524839_9911"><img src="https://secure.gravatar.com/avatar/e4a0566b254d665aa267b7874726fbbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_15223" id="a59524839_9911"><a class="email " href="/user_profile?user_id=15223" > <span class="fna">timeless</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-52"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-52" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c52">Comment 52</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-11-11 23:03 PST" data-time="974012606">20 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-52">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-52" data-comment-id="510203">No. And Mozilla is not Netscape6 so the claims that Mozilla will be complaint 
are not affected by Netscape6's standards support.</pre></div><div class="change-set" id="c53"><div class="comment" data-id="510225" data-no="53"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-53" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_18967" id="a59524839_9911"><img src="https://secure.gravatar.com/avatar/9e92f37b17bae092cda2a1779f5f8e25?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_18967" id="a59524839_9911"><a class="email disabled" href="/user_profile?user_id=18967" > <span class="fna">Chris McClelland</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-53"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-53" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c53">Comment 53</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-11-12 00:32 PST" data-time="974017943">20 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-53">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-53" data-comment-id="510225">Thanks for the information</pre></div><div class="change-set" id="a64029348_4054"><div class="change" id="aa64029348_4054">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a64029348_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_4054" id="a64029348_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a64029348_4054"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a64029348_4054">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a64029348_4054">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2000-12-14 17:40 PST" data-time="976844408">20 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=nsbeta1&amp;resolution=---">nsbeta1</a></div></div></div><div class="change-set" id="c54"><div class="comment" data-id="550654" data-no="54"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-54" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_5003" id="a64029348_4054"><img src="https://secure.gravatar.com/avatar/7006484d9601d2ccbfcb0c110bd23668?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_5003" id="a64029348_4054"><a class="email " href="/user_profile?user_id=5003" > <span class="fna">Asa Dotzler [:asa]</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-54"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-54" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c54">Comment 54</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2001-01-03 13:01 PST" data-time="978555709">20 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-54">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-54" data-comment-id="550654">*** <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED DUPLICATE - Links and underlined text should use the same size of underline for all text"
   href="/show_bug.cgi?id=64207">Bug 64207</a> has been marked as a duplicate of this bug. ***</pre></div><div class="change-set" id="a66594197_4054"><div class="change" id="aa66594197_4054">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a66594197_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_4054" id="a66594197_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a66594197_4054"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a66594197_4054">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a66594197_4054">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2001-01-13 10:07 PST" data-time="979409257">20 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Keywords: <span class="activity-deleted"><a href="/buglist.cgi?keywords=nsbeta2&amp;resolution=---">nsbeta2</a>, 
          
            <a href="/buglist.cgi?keywords=nsbeta3&amp;resolution=---">nsbeta3</a>, 
          
            <a href="/buglist.cgi?keywords=relnoteRTM&amp;resolution=---">relnoteRTM</a></span></div><div class="change">Whiteboard: [nsbeta2-] [nsbeta3-] relnote-devel hit during nsbeta2 standards compliance testing | underline not displayed properly across bold modifications &rarr; [Hixie-P2] (high profile: css1 test suite) underline not displayed properly across bold modifications</div></div></div><div class="change-set" id="c55"><div class="comment" data-id="564470" data-no="55"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-55" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a66594197_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a66594197_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-55"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-55" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c55">Comment 55</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2001-01-14 21:43 PST" data-time="979537416">20 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-55">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-55" data-comment-id="564470">BTW, per the SF F2F meeting, the working group agree that our interpretation is 
correct. (This will be made explicit in CSS3.)</pre></div><div class="change-set" id="c56"><div class="comment" data-id="595316" data-no="56"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-56" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_21544" id="a66594197_4054"><img src="https://secure.gravatar.com/avatar/42c480cac44896ddf47ea1bc5ce03027?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_21544" id="a66594197_4054"><a class="email disabled" href="/user_profile?user_id=21544" > <span class="fna">Håkan Waara</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-56"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-56" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c56">Comment 56</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2001-02-09 15:55 PST" data-time="981762958">20 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-56">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-56" data-comment-id="595316">This bug is high on my most-wanted list. Regarding to Hixie's last comment, 
does &quot;the working group agree that our interpretation is correct&quot; mean that 
this will be fixed, or that the current behaviour is correct?</pre></div><div class="change-set" id="c57"><div class="comment" data-id="601705" data-no="57"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-57" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a66594197_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a66594197_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-57"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-57" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c57">Comment 57</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2001-02-15 23:36 PST" data-time="982309012">20 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-57">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-57" data-comment-id="601705">It means that the working group agree that this bug is valid and that we are
currently acting incorrectly. Now, from that to seeing a fix... ;-)</pre></div><div class="change-set" id="a75700873_4054"><div class="change" id="aa75700873_4054">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a75700873_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_4054" id="a75700873_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a75700873_4054"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a75700873_4054">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a75700873_4054">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2001-04-28 20:45 PDT" data-time="988515933">20 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Whiteboard: [Hixie-P2] (high profile: css1 test suite) underline not displayed properly across bold modifications &rarr; [Hixie-P1] (high profile: css1 test suite) underline not displayed properly across bold modifications [Hixie-B]</div></div></div><div class="change-set" id="c58"><div class="comment" data-id="709103" data-no="58"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-58" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1904" id="a75700873_4054"><img src="https://secure.gravatar.com/avatar/944bd43fe0fa3f3f51596ebd0267af9c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_1904" id="a75700873_4054"><a class="email disabled" href="/user_profile?user_id=1904" > <span class="fna">Frank Tang</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-58"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-58" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c58">Comment 58</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2001-05-07 23:43 PDT" data-time="989304184">20 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-58">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-58" data-comment-id="709103">erik resign. reassign all his bug to ftang for now.
</pre><div class="activity"><div class="change">Assignee: erik &rarr; ftang</div><div class="change">Status: ASSIGNED &rarr; NEW</div></div></div><div class="change-set" id="c59"><div class="comment" data-id="709169" data-no="59"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-59" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1904" id="a75700873_4054"><img src="https://secure.gravatar.com/avatar/944bd43fe0fa3f3f51596ebd0267af9c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_1904" id="a75700873_4054"><a class="email disabled" href="/user_profile?user_id=1904" > <span class="fna">Frank Tang</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-59"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-59" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c59">Comment 59</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2001-05-08 00:15 PDT" data-time="989306151">20 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-59">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-59" data-comment-id="709169">assigned as future
</pre><div class="activity"><div class="change">Status: NEW &rarr; ASSIGNED</div></div></div><div class="change-set" id="c60"><div class="comment" data-id="738446" data-no="60"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-60" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a75700873_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a75700873_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-60"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-60" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c60">Comment 60</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2001-05-22 23:40 PDT" data-time="990600008">20 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-60">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-60" data-comment-id="738446">FYI Opera 5 actually passes the relevant test page perfectly now (well, except
for a minor problem they have with images). So that's two browsers that get this
almsot right (MacIE and Opera). [Hixie-B] in the status whiteboard means that I'll
buy whoever fixes this a meal... :-)

ftang: is this really your area? (line layout and inline frames)</pre></div><div class="change-set" id="c61"><div class="comment" data-id="738558" data-no="61"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-61" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_931" id="a75700873_4054"><img src="https://secure.gravatar.com/avatar/0687bdbc5ff6e7c15dc8090ae9637cc4?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_931" id="a75700873_4054"><a class="email disabled" href="/user_profile?user_id=931" > <span class="fna">David Hyatt</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-61"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-61" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c61">Comment 61</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2001-05-23 01:48 PDT" data-time="990607732">20 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-61">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-61" data-comment-id="738558">Taking.
</pre><div class="activity"><div class="change">Assignee: ftang &rarr; hyatt</div><div class="change">Status: ASSIGNED &rarr; NEW</div></div></div><div class="change-set" id="c62"><div class="comment" data-id="738559" data-no="62"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-62" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_931" id="a75700873_4054"><img src="https://secure.gravatar.com/avatar/0687bdbc5ff6e7c15dc8090ae9637cc4?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_931" id="a75700873_4054"><a class="email disabled" href="/user_profile?user_id=931" > <span class="fna">David Hyatt</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-62"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-62" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c62">Comment 62</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2001-05-23 01:49 PDT" data-time="990607772">20 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-62">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-62" data-comment-id="738559">I rewrote text decoration on my style branch.  I've divorced the decorations 
from the font object completely, so this bug should be easier to fix after I 
land 78695.
</pre><div class="activity"><div class="change">Status: NEW &rarr; ASSIGNED</div></div></div><div class="change-set" id="c63"><div class="comment" data-id="767776" data-no="63"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-63" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_9911" id="a75700873_4054"><img src="https://secure.gravatar.com/avatar/559c3cf31c98a95b23421186b78df500?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_9911" id="a75700873_4054"><a class="email disabled" href="/user_profile?user_id=9911" > <span class="fna">Gervase Markham [:gerv] (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-63"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-63" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c63">Comment 63</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2001-06-10 01:20 PDT" data-time="992161233">20 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-63">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-63" data-comment-id="767776">hyatt: Is there a chance of you getting to this in post-<a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - [CSS] Rule matching performance improvements"
   href="/show_bug.cgi?id=78695">bug 78695</a> work? There's 
a dinner on Hixie in it for you, it would seem - and remember, he comes back to 
the UK in mid-August. ;-)

Gerv</pre></div><div class="change-set" id="a83759624_4054"><div class="change" id="aa83759624_4054">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a83759624_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_4054" id="a83759624_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a83759624_4054"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a83759624_4054">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a83759624_4054">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2001-07-31 03:18 PDT" data-time="996574684">19 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Keywords: <span class="activity-deleted"><a href="/buglist.cgi?keywords=4xp&amp;resolution=---">4xp</a></span></div></div></div><div class="change-set" id="a88701254_4054"><div class="change" id="aa88701254_4054">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a88701254_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_4054" id="a88701254_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a88701254_4054"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a88701254_4054">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a88701254_4054">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2001-09-26 07:58 PDT" data-time="1001516314">19 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Whiteboard: [Hixie-P1] (high profile: css1 test suite) underline not displayed properly across bold modifications [Hixie-B] &rarr; [Hixie-P1][Hixie-1.0] (high profile: css1 test suite) underline not displayed properly across bold modifications [Hixie-B]</div></div></div><div class="change-set" id="c64"><div class="comment" data-id="964400" data-no="64"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-64" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4833" id="a88701254_4054"><img src="https://secure.gravatar.com/avatar/7cb8e6f84fe6d38db515e33c1aa1b3a0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4833" id="a88701254_4054"><a class="email disabled" href="/user_profile?user_id=4833" > <span class="fna">basic</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-64"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-64" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c64">Comment 64</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2001-10-09 23:15 PDT" data-time="1002694539">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-64">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-64" data-comment-id="964400">is this still a highrisk?</pre></div><div class="change-set" id="a89953738_5003"><div class="change" id="aa89953738_5003">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_5003" id="a89953738_5003"><img src="https://secure.gravatar.com/avatar/7006484d9601d2ccbfcb0c110bd23668?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_5003" id="a89953738_5003"><a class="email " href="/user_profile?user_id=5003" > <span class="fna">Asa Dotzler [:asa]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a89953738_5003"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a89953738_5003">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a89953738_5003">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2001-10-10 19:53 PDT" data-time="1002768798">19 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Blocks: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED INVALID - nsbeta1 unconf, new, assigned, and reopened bugs 2001-10-10 19:40"
   href="/show_bug.cgi?id=104166">104166</a></div></div></div><div class="change-set" id="a90864014_4054"><div class="change" id="aa90864014_4054">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a90864014_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_4054" id="a90864014_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a90864014_4054"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a90864014_4054">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a90864014_4054">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2001-10-21 08:44 PDT" data-time="1003679074">19 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Blocks: <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED WONTFIX - Standards"
   href="/show_bug.cgi?id=103709">103709</a></div></div></div><div class="change-set" id="c65"><div class="comment" data-id="1084881" data-no="65"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-65" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_5630" id="a90864014_4054"><img src="https://secure.gravatar.com/avatar/f7dfecea755bef4d2846e98eb2b04d92?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_5630" id="a90864014_4054"><a class="email disabled" href="/user_profile?user_id=5630" > <span class="fna">rbs</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-65"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-65" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c65">Comment 65</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2001-12-25 21:36 PST" data-time="1009344972">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-65">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-65" data-comment-id="1084881">I can have a try at this CSS1 bug if the dinner is swapped for a fix to the 
much neglected MathML <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Default style rules for &lt;mtable&gt; need tuning"
   href="/show_bug.cgi?id=39411">bug 39411</a> in m0.9.8 :-(

What makes this bug tricky is how to handle textless frames. Suppose that the 
container inline frame has to draw the decorations, would it to have to grovel 
its subtree to filter out deeper img frames &amp; etc? Not only is this not cheap 
and even then, text decorations data (e.g., the width of the invisible pieces) 
would have to be respected in the container's coordinate system and such. At 
first thought, it seems to me that looking at this problem from the perspective 
of the container frame offers no guarantee of an easier solution either.

BTW, I tried the following in Opera and the result is counter-intuitive (or 
&quot;ugly&quot; -- to borrow the terminology in earlier comments):

&lt;P style=&quot;text-decoration: overline&quot;&gt;&lt;font size=&quot;+4&quot;&gt;this should&lt;/font&gt; be
underlined &lt;B&gt;this should be underlined and bold&lt;/B&gt;&lt;/P&gt;</pre></div><div class="change-set" id="a97046149_4054"><div class="change" id="aa97046149_4054">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a97046149_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_4054" id="a97046149_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a97046149_4054"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a97046149_4054">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a97046149_4054">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2001-12-31 21:00 PST" data-time="1009861209">19 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">No longer depends on: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - 'text-decoration' should not apply to text-less inlines (underline) [INLINE]"
   href="/show_bug.cgi?id=20163">20163</a></div></div></div><div class="change-set" id="a97046164_4054"><div class="change" id="aa97046164_4054">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a97046164_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_4054" id="a97046164_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a97046164_4054"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a97046164_4054">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a97046164_4054">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2001-12-31 21:00 PST" data-time="1009861224">19 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Blocks: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - 'text-decoration' should not apply to text-less inlines (underline) [INLINE]"
   href="/show_bug.cgi?id=20163">20163</a></div></div></div><div class="change-set" id="c66"><div class="comment" data-id="1090389" data-no="66"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-66" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_5630" id="a97046164_4054"><img src="https://secure.gravatar.com/avatar/f7dfecea755bef4d2846e98eb2b04d92?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_5630" id="a97046164_4054"><a class="email disabled" href="/user_profile?user_id=5630" > <span class="fna">rbs</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-66"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-66" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c66">Comment 66</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-01-01 09:57 PST" data-time="1009907873">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-66">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-63182"
         class="attachment"
         data-id="63182" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1777-opera.gif">
      <meta itemprop="contentSize" content="3661">
      <meta itemprop="encodingFormat" content="image/gif">
      <div class="label">
        Attached image
          <a class="link lightbox" href="attachment.cgi?id=63182" itemprop="contentUrl">
        <span id="att-63182-description" itemprop="description">as seen in Opera</span></a>
        — <a href="attachment.cgi?id=63182&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-66" data-comment-id="1090389">Looks more like strike-through than overline to me</pre></div><div class="change-set" id="c67"><div class="comment" data-id="1090472" data-no="67"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-67" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a97046164_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a97046164_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-67"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-67" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c67">Comment 67</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-01-01 12:27 PST" data-time="1009916861">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-67">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-67" data-comment-id="1090472">That is the expected result.

I didn't completely follow what you said about textless frames. If the frame
with &quot;text-decoration&quot; set happens to contain another frame with no text, that
should not affect the first frame at all, it should just draw the line
regardless. (Note, though, that if the element contains no text whatsoever, then
no text decoration should be drawn at all -- see <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - 'text-decoration' should not apply to text-less inlines (underline) [INLINE]"
   href="/show_bug.cgi?id=20163">bug 20163</a>.)

The reason I have been suggesting looking at this from the container frame's
point of view (i.e. the frame on which text-decoration is set) is that if you
have a case like this:

   span { font-size: larger; text-decoration: overline; }
   &lt;span&gt;&lt;span&gt;&lt;span&gt; Hello &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;

...the word &quot;Hello&quot; should have three overlines, something like:

        --------------------
        -|---|-----|-|------
        -|---|-----|-|------
         +---+ .-, | | .--,
         |   | +-' | | |  |
         |   | \_/ | | \__/

Since I don't know the code, though, I may be wrong about this being the easier
way to implement it.</pre></div><div class="change-set" id="c68"><div class="comment" data-id="1090524" data-no="68"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-68" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_5630" id="a97046164_4054"><img src="https://secure.gravatar.com/avatar/f7dfecea755bef4d2846e98eb2b04d92?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_5630" id="a97046164_4054"><a class="email disabled" href="/user_profile?user_id=5630" > <span class="fna">rbs</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-68"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-68" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c68">Comment 68</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-01-01 13:29 PST" data-time="1009920568">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-68">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-63191"
         class="attachment"
         data-id="63191" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1777-opera.gif">
      <meta itemprop="contentSize" content="1279">
      <meta itemprop="encodingFormat" content="image/gif">
      <div class="label">
        Attached image
          <a class="link lightbox" href="attachment.cgi?id=63191" itemprop="contentUrl">
        <span id="att-63191-description" itemprop="description">Extended example in Opera</span></a>
        — <a href="attachment.cgi?id=63191&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-68" data-comment-id="1090524">What I meant is what you described -- with the additional hint to cases where 
an inner &lt;span&gt; can lead to an &lt;img&gt; that could have been (arbirtraly)
positioned with other CSS properties (e.g., &amp;nbsp;, spacing, margin, etc). For
illustration, the rendering above is from Opera (BTW, note the buggy trailing
lines on the textless portion after the &lt;img&gt;). It corresponds	to the
following markup:

span { font-size: larger; text-decoration: overline; }

Start
&lt;span&gt;
  &lt;span&gt;
    &lt;span&gt;
      Hello
      &lt;sup&gt;
	&lt;span&gt;
	  Hi
	  &lt;img src=&quot;<a rel="nofollow" href="http://www.w3.org/Style/CSS/Test/current/oransqr.gif">http://www.w3.org/Style/CSS/Test/current/oransqr.gif</a>&quot;&gt;
	&lt;/span&gt;
      &lt;/sup&gt;
    &lt;/span&gt;
  &lt;/span&gt;
&lt;/span&gt;
End</pre></div><div class="change-set" id="c69"><div class="comment" data-id="1090819" data-no="69"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-69" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a97046164_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a97046164_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-69"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-69" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c69">Comment 69</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-01-02 02:14 PST" data-time="1009966481">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-69">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-69" data-comment-id="1090819">There is another bug in that Opera rendering: the top overline disappears above
the image but it should not; it should carry on. Other than that, it's a very
good rendering.</pre></div><div class="change-set" id="c70"><div class="comment" data-id="1091357" data-no="70"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-70" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_5630" id="a97046164_4054"><img src="https://secure.gravatar.com/avatar/f7dfecea755bef4d2846e98eb2b04d92?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_5630" id="a97046164_4054"><a class="email disabled" href="/user_profile?user_id=5630" > <span class="fna">rbs</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-70"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-70" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c70">Comment 70</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-01-02 10:43 PST" data-time="1009997029">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-70">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-70" data-comment-id="1091357"><span class="quote">&gt;the top overline disappears above the image but it should not</span >

Wouldn't this create iconsistencies? I changed the orange square to a 
transparent square and it just left a white gap with no overlines (from the 
containing spans) passing through.</pre></div><div class="change-set" id="c71"><div class="comment" data-id="1092626" data-no="71"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-71" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a97046164_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a97046164_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-71"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-71" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c71">Comment 71</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-01-03 02:44 PST" data-time="1010054676">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-71">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-71" data-comment-id="1092626">The lines should go through regardless of whether there are child elements
containing images, with visibility set to 'hidden', or whatever.

See <a rel="nofollow" href="http://www.bath.ac.uk/%7Epy8ieh/internet/eviltests/underline.html">http://www.bath.ac.uk/%7Epy8ieh/internet/eviltests/underline.html</a></pre></div><div class="change-set" id="a99108094_4054"><div class="change" id="aa99108094_4054">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a99108094_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_4054" id="a99108094_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a99108094_4054"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a99108094_4054">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a99108094_4054">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-01-24 17:45 PST" data-time="1011923154">19 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Whiteboard: [Hixie-P1][Hixie-1.0] (high profile: css1 test suite) underline not displayed properly across bold modifications [Hixie-B] &rarr; [Hixie-P1] (high profile: css1 test suite) underline not displayed properly across bold modifications [Hixie-B]</div></div></div><div class="change-set" id="a99127652_20209"><div class="change" id="aa99127652_20209">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_20209" id="a99127652_20209"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_20209" id="a99127652_20209"><a class="email " href="/user_profile?user_id=20209" > <span class="fna">Boris Zbarsky [:bzbarsky]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a99127652_20209"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a99127652_20209">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a99127652_20209">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-01-24 23:11 PST" data-time="1011942712">19 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Blocks: <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED DUPLICATE - anchor link underline is assuming bolded text style"
   href="/show_bug.cgi?id=121760">121760</a></div></div></div><div class="change-set" id="c72"><div class="comment" data-id="1136813" data-no="72"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-72" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3831" id="a99127652_20209"><img src="https://secure.gravatar.com/avatar/2f25e2d6516cae2b2f9d804a0d2f7b07?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3831" id="a99127652_20209"><a class="email disabled" href="/user_profile?user_id=3831" > <span class="fna">Kevin McCluskey (gone)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-72"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-72" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c72">Comment 72</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-01-29 11:48 PST" data-time="1012333729">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-72">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-72" data-comment-id="1136813">*** <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED DUPLICATE - anchor link underline is assuming bolded text style"
   href="/show_bug.cgi?id=121760">Bug 121760</a> has been marked as a duplicate of this bug. ***</pre></div><div class="change-set" id="c73"><div class="comment" data-id="1140276" data-no="73"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-73" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4110" id="a99127652_20209"><img src="https://secure.gravatar.com/avatar/a2ed12df8daafde5811afc0ad2515df6?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4110" id="a99127652_20209"><a class="email disabled" href="/user_profile?user_id=4110" > <span class="fna">Christine Hoffman</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-73"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-73" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c73">Comment 73</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-01-30 19:38 PST" data-time="1012448315">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-73">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-73" data-comment-id="1140276">Comment from dup <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED DUPLICATE - anchor link underline is assuming bolded text style"
   href="/show_bug.cgi?id=121760">bug 121760</a> regarding Top 100 site: <a rel="nofollow" href="http://www.slashdot.org">http://www.slashdot.org</a>.
Open the page. On the page there are major sections headed in white text
with a green background. Some of these headings have links - for example, the
first one that states 'Developers'. The code shows that this text is bolded by
the &lt;B&gt; element. As the text is bolded, the anchor line underneath the text is
also getting bolded. In this case, it looks bad because it's hard to tell that
it is a link since the background color and the underlined link are both white. 
I have attached a simplified testcase to demonstrate. Compare to IE which
renders the bolded text only.

Attaching a simplified testcase to demonstrate.

</pre></div><div class="change-set" id="c74"><div class="comment" data-id="1140287" data-no="74"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-74" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4110" id="a99127652_20209"><img src="https://secure.gravatar.com/avatar/a2ed12df8daafde5811afc0ad2515df6?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4110" id="a99127652_20209"><a class="email disabled" href="/user_profile?user_id=4110" > <span class="fna">Christine Hoffman</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-74"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-74" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c74">Comment 74</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-01-30 19:53 PST" data-time="1012449186">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-74">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-67207"
         class="attachment"
         data-id="67207" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="1777.html">
      <meta itemprop="contentSize" content="846">
      <meta itemprop="encodingFormat" content="text/html">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=67207" itemprop="contentUrl">
        <span id="att-67207-description" itemprop="description">simplified testcase for http://www.slashdot.org problem</span></a>
        — <a href="attachment.cgi?id=67207&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div></div><div class="change-set" id="c75"><div class="comment" data-id="1140288" data-no="75"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-75" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4110" id="a99127652_20209"><img src="https://secure.gravatar.com/avatar/a2ed12df8daafde5811afc0ad2515df6?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4110" id="a99127652_20209"><a class="email disabled" href="/user_profile?user_id=4110" > <span class="fna">Christine Hoffman</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-75"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-75" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c75">Comment 75</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-01-30 19:53 PST" data-time="1012449226">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-75">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-75" data-comment-id="1140288">Is this really a futured bug?</pre></div><div class="change-set" id="a101959769_20209"><div class="change" id="aa101959769_20209">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_20209" id="a101959769_20209"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_20209" id="a101959769_20209"><a class="email " href="/user_profile?user_id=20209" > <span class="fna">Boris Zbarsky [:bzbarsky]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a101959769_20209"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a101959769_20209">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a101959769_20209">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-02-26 17:53 PST" data-time="1014774829">19 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Whiteboard: [Hixie-P1] (high profile: css1 test suite) underline not displayed properly across bold modifications [Hixie-B] &rarr; [Hixie-P1][CSS1-5.4.3] (high profile: css1 test suite) underline not displayed properly across bold modifications [Hixie-B]</div></div></div><div class="change-set" id="a102117690_5003"><div class="change" id="aa102117690_5003">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_5003" id="a102117690_5003"><img src="https://secure.gravatar.com/avatar/7006484d9601d2ccbfcb0c110bd23668?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_5003" id="a102117690_5003"><a class="email " href="/user_profile?user_id=5003" > <span class="fna">Asa Dotzler [:asa]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a102117690_5003"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a102117690_5003">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a102117690_5003">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-02-28 13:45 PST" data-time="1014932750">19 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=mozilla1.0%2B&amp;resolution=---">mozilla1.0+</a></div></div></div><div class="change-set" id="c76"><div class="comment" data-id="1256833" data-no="76"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-76" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_5038" id="a102117690_5003"><img src="https://secure.gravatar.com/avatar/e1cadeaaf04bd425d597a571ffe0f522?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_5038" id="a102117690_5003"><a class="email " href="/user_profile?user_id=5038" > <span class="fna">Robert O'Callahan (:roc) (email my personal email if necessary)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-76"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-76" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c76">Comment 76</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-02 11:57 PST" data-time="1017777430">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-76">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-76" data-comment-id="1256833">This shouldn't be hard to fix to get Hixie's desired behaviour, it can all be
done in the inline container frames.</pre></div><div class="change-set" id="c77"><div class="comment" data-id="1258844" data-no="77"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-77" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_5038" id="a102117690_5003"><img src="https://secure.gravatar.com/avatar/e1cadeaaf04bd425d597a571ffe0f522?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_5038" id="a102117690_5003"><a class="email " href="/user_profile?user_id=5038" > <span class="fna">Robert O'Callahan (:roc) (email my personal email if necessary)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-77"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-77" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c77">Comment 77</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-03 06:06 PST" data-time="1017842791">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-77">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-77" data-comment-id="1258844">Ugh. nsTextFrame::PaintTextDecorations implements a &lt;FONT&gt; quirk where the
colour specified in &lt;FONT&gt; overrides the decoration colour specified in the
decorated element. Implementing THAT while painting the decoration in the
container is going to be a pain.

Also, there are some tricky issues with &quot;paint decoration only if there is some
text in the element&quot; and dynamic changes. If text children are added to a
decorated element then we may need to repaint the entire element.

Also, the way decoration is applied to block elements seems weird. The spec says
all &quot;inline descendants&quot; are affected. If that includes all indirect inline
descendants then the effect would be very weird indeed. If it only includes
direct inline descendants, what about blocks that contain other blocks? I
suggest we should search down through the frame tree for each inline frame F
which has only block frames between it and the decorated block frame.

So, given the following frame tree:

block0
  block1 { text-decoration: underline; }
    block2
      inlineA
        inlineB

We would paint the decoration for inlineA only, using block1's colour.

Another question: given
&lt;a href=&quot;...&quot; style=&quot;text-decoration: underline&quot;&gt;&lt;img src=&quot;...&quot;&gt; &lt;/a&gt;
doesn't the A element actually contain text --- a single space? The spec doesn't
say anything about the text not being whitespace.</pre></div><div class="change-set" id="c78"><div class="comment" data-id="1266944" data-no="78"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-78" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a102117690_5003"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a102117690_5003"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-78"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-78" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c78">Comment 78</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-06 16:48 PST" data-time="1018140506">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-78">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-78" data-comment-id="1266944">Not sure what to do about the &lt;font&gt; quirks. FWIW, if you want to limit them to
quirks mode, that's fine.

<span class="quote">&gt; The spec says all &quot;inline descendants&quot; are affected. </span >

Ouch. I have no idea how to interpret that in CSS terms. (I tried describing it
in terms of implied anonymous inline boxes, but that didn't explain why the
colour was from the block setting text-decoration.) What do you think should
happen in this case?:

   block0 { text-decoration: underline; color: rgba(255,0,0, 0.5); }
     block1 { text-decoration: underline; color: rgba(0,255,0, 0.5); }
       block2 { text-decoration: underline; color: rgba(0,0,255, 0.5); }
         inlineA
           inlineB


Regarding the empty space thing: if white-space is set to 'pre' then spaces are
significant in layout, otherwise they are not.</pre></div><div class="change-set" id="c79"><div class="comment" data-id="1267012" data-no="79"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-79" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_5038" id="a102117690_5003"><img src="https://secure.gravatar.com/avatar/e1cadeaaf04bd425d597a571ffe0f522?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_5038" id="a102117690_5003"><a class="email " href="/user_profile?user_id=5038" > <span class="fna">Robert O'Callahan (:roc) (email my personal email if necessary)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-79"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-79" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c79">Comment 79</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-06 18:39 PST" data-time="1018147190">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-79">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-79" data-comment-id="1267012">My guess is that in your example we should paint 3 composited underlines, but
you're the W3C guy :-). Perhaps the WG could clarify all these issues in the
CSS3 WD?

<span class="quote">&gt; Regarding the empty space thing: if white-space is set to 'pre' then spaces
&gt; are significant in layout, otherwise they are not.</span >

I don't understand this. Even when whitespace is not 'pre', spaces are
significant, otherwise we wouldn't break lines :-). I don't still don't see why
in my example
&lt;a href=&quot;...&quot; style=&quot;text-decoration: underline&quot;&gt;&lt;img src=&quot;...&quot;&gt; &lt;/a&gt;
we can say there is &quot;no text&quot; inside the A element. There is text there in the
DOM. There is whitespace there for the purposes of line breaking.</pre></div><div class="change-set" id="c80"><div class="comment" data-id="1267835" data-no="80"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-80" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a102117690_5003"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a102117690_5003"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-80"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-80" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c80">Comment 80</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-07 15:37 PDT" data-time="1018219055">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-80">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-80" data-comment-id="1267835">Would the argument &quot;whitespace isn't text&quot; hold water? :-)

Whitespace in the case you gave isn't text because it can collapse away in the
rendering (e.g. if there is a space on the other side of the end tag). Also,
when would an author ever _want_ the image to be underlined based on the
presence of a space character? The only time I see the author caring about that
space is when he explicitly says that the 'white-space' should be 'pre'served.


Regarding the block issue, I've raised it in the WG.</pre></div><div class="change-set" id="c81"><div class="comment" data-id="1267862" data-no="81"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-81" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_5038" id="a102117690_5003"><img src="https://secure.gravatar.com/avatar/e1cadeaaf04bd425d597a571ffe0f522?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_5038" id="a102117690_5003"><a class="email " href="/user_profile?user_id=5038" > <span class="fna">Robert O'Callahan (:roc) (email my personal email if necessary)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-81"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-81" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c81">Comment 81</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-07 16:13 PDT" data-time="1018221198">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-81">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-81" data-comment-id="1267862">OK, I concede that &quot;whitespace isn't really text&quot; is one plausible
interpretation of the language in the recommendation, but I respectfully suggest
that it is not the only possible interpretation. It would be great if you could
ask the WG to clarify that too.</pre></div><div class="change-set" id="c82"><div class="comment" data-id="1267895" data-no="82"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-82" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a102117690_5003"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a102117690_5003"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-82"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-82" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c82">Comment 82</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-07 17:19 PDT" data-time="1018225184">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-82">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-82" data-comment-id="1267895">I actually raised that issue as well in my previous mail to the WG. :-)
I completely agree that the spec is vague in this respect.</pre></div><div class="change-set" id="c83"><div class="comment" data-id="1279207" data-no="83"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-83" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a102117690_5003"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a102117690_5003"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-83"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-83" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c83">Comment 83</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-13 01:09 PDT" data-time="1018685382">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-83">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-83" data-comment-id="1279207">Ok, the WG's internal draft for text-decoration currently reads as follows:

# These properties describe decorations that are added to the text of an 
# element. If they are specified for a block-level element, it affects the root 
# inline element (the anonymous inline element which wraps all the inline 
# children of the block element).
#
# If they are specified for (or affects) an inline-level element, it affects all
# boxes generated by the element. If an element is empty or is a replaced 
# element (e.g., the IMG element in XHTML), user agents must ignore these 
# properties. Text content also excludes white space characters that are 
# collapsed during the white space processing.

So:

   block0 { text-decoration: underline; color: rgba(255,0,0, 0.5); }
     block1 { text-decoration: underline; color: rgba(0,255,0, 0.5); }
       block2 { text-decoration: underline; color: rgba(0,0,255, 0.5); }
         &lt;anon1: anonymous inline wrapping inline contents of block2&gt;
           inlineA
             inlineB

inlineA and inlineB have no text-decoration of their own, and anon1 has one
underline, that of block2. 

Similarly:

   block0
     block1 { text-decoration: underline; }
       block2
         &lt;anon1: anonymous inline wrapping inline contents of block2&gt;
           inlineA
             inlineB

block1's underline propagates to anon1. The colour comes from block2, since the
propagated value of text-underline-color is 'auto' and that means 'take it from
the 'color' property' which is inherited from block2 to anon1.

Another example:

    block0 { text-decoration: underline; color: rgba(255,0,0, 0.5); }
      block1 { text-decoration: underline; color: rgba(0,255,0, 0.5); }
        block2 { text-decoration: underline; color: rgba(0,0,255, 0.5); }
          inlineA
            block3 { color: rgba(0,128,128, 0.5); }
              inlineB

InlineA would have one set of underline (solid auto continuous), using the
colour of block2 (inherited from the block to the anonymous inline and then used
by the underline because of the 'auto'), and inlineB would have the same style
underline, but using a different colour (inherited from block 3 and then used in
the same way).

Finally, same tree but different style rules:

    * { text-underline: solid rgba(0, 0, 0, 0.2); }

InlineA's text would have two sets of underline, one from block2 propagating the
underline to its anonymous inline, and one on inlineA itself. Similarly, inlineB
would have the underline from block3 and from itself. Note that inlineA wouldn't
affect inlineB because the anonymous inline box would get its underline from
block3 -- if block3 had had no underline, it would instead have taken its
underline style from inlineA and inlineB's text would still have two underlines.


Looking at this from the point of view of root inline boxes: their computed
value of text-underline-* would be the text-underline-* of the nearest ancestor
whose text-underline-style is not none, and similarly for overline, strike-
through and blink.</pre></div><div class="change-set" id="c84"><div class="comment" data-id="1295253" data-no="84"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-84" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a102117690_5003"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a102117690_5003"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-84"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-84" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c84">Comment 84</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-21 12:03 PDT" data-time="1019415830">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-84">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-84" data-comment-id="1295253">I'm having the beginning to a fix for this one... (in one special case, but I
believe that the general case will be similar.)... may I take over the bug,
please? Or do I leave it with <a href="mailto:hyatt&#64;netscape.com">hyatt&#64;netscape.com</a>, and just post a patch when I
have a patch ready? (It will probably be 7 or 14 days, depending on how much
time I have, but that's just guesswork.)</pre></div><div class="change-set" id="c85"><div class="comment" data-id="1295388" data-no="85"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-85" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1214" id="a102117690_5003"><img src="https://secure.gravatar.com/avatar/c936d5fc7ef09504480b9d8aafb7e8a0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_1214" id="a102117690_5003"><a class="email " href="/user_profile?user_id=1214" > <span class="fna">Brendan Eich [:brendan]</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-85"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-85" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c85">Comment 85</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-21 13:19 PDT" data-time="1019420362">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-85">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-85" data-comment-id="1295388">Go fast, 1.0 is trying to wrap up RC2 in a week or so.  RC2 might be 1.0, so
don't count on getting this into 1.0 if you don't get into RC2.

/be</pre></div><div class="change-set" id="c86"><div class="comment" data-id="1295538" data-no="86"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-86" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_5038" id="a102117690_5003"><img src="https://secure.gravatar.com/avatar/e1cadeaaf04bd425d597a571ffe0f522?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_5038" id="a102117690_5003"><a class="email " href="/user_profile?user_id=5038" > <span class="fna">Robert O'Callahan (:roc) (email my personal email if necessary)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-86"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-86" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c86">Comment 86</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-21 15:16 PDT" data-time="1019427378">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-86">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-86" data-comment-id="1295538">I don't think this would get approved for 1.0, it's not important enough.

Let us know how you're planning to fix this so we can give you feedback.</pre></div><div class="change-set" id="c87"><div class="comment" data-id="1296786" data-no="87"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-87" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a102117690_5003"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a102117690_5003"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-87"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-87" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c87">Comment 87</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-22 09:21 PDT" data-time="1019492483">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-87">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-87" data-comment-id="1296786">Here my 5€ ;-)

The only problem with waiting for 1.0 with this one is that mozilla arguable
isn't fully CSS1 compliant before this, among other things are fixed. But it
don't think it would be wise, anyhow. No browser out there is, as far as I know...

The fix isn't hard: The idea is to move the responsibility of textdecoratios up
to the containing frame. This is complicated a bit by the fact that this seems
to be two different frame types: nsHTMLContainerFrame for inline types and (I
think) nsBlockFrame for block types. I've only dealt with the former, yet.

I've simply moved up the painting of the textdecorations to
nsHTMLContainerFrame's Paint() function. This and /not/ going up the tree to
find fixes the bug in some cases, like in 
&lt;U&gt;some &lt;B&gt;big&lt;/B&gt; text,
with the style rule
B { font-size: 200% }
So that there's one, simple underline under the whole thing. I'm using the font
properties of the nsHTMLContainerFrame, and this seems to work nice, though I
was only guessing as to what font to use. I've left the painting of the
selection with the nsTextFrame, where I thought it belonged anyway.

BTW: I don't wan't two pieces of basically identical code in
nsHTMLContainerFrame.cpp and nsBlockFrame.cpp... and I could create a static
function that could do the work, but the I'd have to put it somewhere. Or, I
could make it a memberfunction of nsFrame, which is a common ancestor, but I'm
not sure that polluting that is a good idea either. A bit of advice in this
regard would be much appreciated :o)

In the hope that I'm actually doing more good than harm :o)
Esben</pre></div><div class="change-set" id="c88"><div class="comment" data-id="1297239" data-no="88"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-88" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a102117690_5003"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a102117690_5003"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-88"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-88" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c88">Comment 88</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-22 12:24 PDT" data-time="1019503487">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-88">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-88" data-comment-id="1297239">Oops, forget my rambling about nsBlockFrame and nsHTMLContainerFrame. I see that
the former is derived from the latter. Must've been blind :-]. I'll just place
the neccessary rendering in nsHTMLContainerFrame. I'll press on; I'm pretty
happy with HTMLContainerFrame's rendering of the textdecorations now. Now I'm
working on nsBlockFrame, which is a litte more difficult, as I have to look at
the lines in the frame, I think.

<a href="mailto:rbs&#64;maths.uq.edu.au">rbs&#64;maths.uq.edu.au</a>: If you still have the testcases from which the Opera-images
are derived, I'd dearly like to get my dirty hands on them :O)

P.S: Could somebody please tell me if I should grap the bug, or leave it with
<a href="mailto:hyatt&#64;netscape.com">hyatt&#64;netscape.com</a>? </pre></div><div class="change-set" id="c89"><div class="comment" data-id="1297495" data-no="89"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-89" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_5038" id="a102117690_5003"><img src="https://secure.gravatar.com/avatar/e1cadeaaf04bd425d597a571ffe0f522?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_5038" id="a102117690_5003"><a class="email " href="/user_profile?user_id=5038" > <span class="fna">Robert O'Callahan (:roc) (email my personal email if necessary)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-89"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-89" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c89">Comment 89</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-22 13:47 PDT" data-time="1019508431">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-89">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-89" data-comment-id="1297495">Please read all of the above comments especially my <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - [TEXT] 'text-decoration' should not be drawn by children (underline) [INLINE]"
   href="/show_bug.cgi?id=1777#c77">comment #77</a>. Moving all the
painting up to the container is OK but that alone is not enough to make the FONT
quirk work. Please also read Ian's comments about the action of text-decoration
set on containing blocks and make sure that what you're planning will do the
right thing for those examples. Thanks!!!</pre></div><div class="change-set" id="c90"><div class="comment" data-id="1297574" data-no="90"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-90" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_5630" id="a102117690_5003"><img src="https://secure.gravatar.com/avatar/f7dfecea755bef4d2846e98eb2b04d92?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_5630" id="a102117690_5003"><a class="email disabled" href="/user_profile?user_id=5630" > <span class="fna">rbs</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-90"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-90" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c90">Comment 90</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-22 14:16 PDT" data-time="1019510210">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-90">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-80448"
         class="attachment"
         data-id="80448" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug-1777.html">
      <meta itemprop="contentSize" content="1639">
      <meta itemprop="encodingFormat" content="text/html">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=80448" itemprop="contentUrl">
        <span id="att-80448-description" itemprop="description">testcase used for Opera' screenshots</span></a>
        — <a href="attachment.cgi?id=80448&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div></div><div class="change-set" id="c91"><div class="comment" data-id="1308380" data-no="91"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-91" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a102117690_5003"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a102117690_5003"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-91"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-91" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c91">Comment 91</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-26 13:26 PDT" data-time="1019852771">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-91">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-81201"
         class="attachment patch obsolete"
         data-id="81201" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1777.patch">
      <meta itemprop="contentSize" content="17784">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=81201">
          <a class="link" href="attachment.cgi?id=81201&amp;action=diff">
        <span id="att-81201-description" itemprop="description">1st patch attempt. Should fix 20163, too.</span></a> (obsolete)
        — <a href="attachment.cgi?id=81201&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=81201">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-91" data-comment-id="1308380">So this is my very first mozilla patch! :-D
The patch is purely a rendering patch of <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - [TEXT] 'text-decoration' should not be drawn by children (underline) [INLINE]"
   href="/show_bug.cgi?id=1777">bug1777</a>, which, IMHO, is
suboptimal. I will perhaps take a stab at migrating some of the 
work to the parser, which would be the best place, IMHO.</pre></div><div class="change-set" id="c92"><div class="comment" data-id="1308490" data-no="92"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-92" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a102117690_5003"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a102117690_5003"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-92"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-92" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c92">Comment 92</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-26 14:10 PDT" data-time="1019855422">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-92">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-92" data-comment-id="1308490">I haven't looked at the patch in any detail yet, but:
 * Could you describe exactly what you consider the correct behavior to be.  It
would be useful to know what you're implementing.  There's a bunch of code in
the style contexts dealing with text decorations that could probably be removed.
 Will the behavior depend on standards/quirks mode?  Should it?  (Will we break
pages if it doesn't?)
 * This definitely should *not* be in the parser.
 * I think this patch would have bad effects on paint layers -- in particular,
given &lt;a href=&quot; ...&quot;&gt;foo&lt;img style=&quot;vertical-align: top&quot; /&gt;bar&lt;/a&gt;, I would
expect the image to paint on top of the decoration, and likewise for form
controls.  Thus I would think you would want the painting code to be in
nsInlineFrame rather than nsBlockFrame, and do it before painting children. 
Others might disagree with me on this, though.
 * You should *not* be manipulating the font object that you get out of a style
context.</pre></div><div class="change-set" id="c93"><div class="comment" data-id="1308683" data-no="93"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-93" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a102117690_5003"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a102117690_5003"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-93"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-93" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c93">Comment 93</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-26 15:15 PDT" data-time="1019859319">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-93">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-93" data-comment-id="1308683">Any implementation should pass these tests:
   <a rel="nofollow" href="http://www.w3.org/Style/CSS/Test/current/sec13.htm">http://www.w3.org/Style/CSS/Test/current/sec13.htm</a>
   <a rel="nofollow" href="http://www.bath.ac.uk/%7Epy8ieh/internet/eviltests/underline.html">http://www.bath.ac.uk/%7Epy8ieh/internet/eviltests/underline.html</a>

I need to write some tests for the issues mentioned in <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - [TEXT] 'text-decoration' should not be drawn by children (underline) [INLINE]"
   href="/show_bug.cgi?id=1777#c83">comment 83</a>.</pre></div><div class="change-set" id="c94"><div class="comment" data-id="1308768" data-no="94"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-94" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a102117690_5003"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a102117690_5003"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-94"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-94" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c94">Comment 94</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-26 15:42 PDT" data-time="1019860942">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-94">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-81224"
         class="attachment"
         data-id="81224" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="test.jpg">
      <meta itemprop="contentSize" content="5128">
      <meta itemprop="encodingFormat" content="image/png">
      <div class="label">
        Attached image
          <a class="link lightbox" href="attachment.cgi?id=81224" itemprop="contentUrl">
        <span id="att-81224-description" itemprop="description">Picture to be used with the following testcase...</span></a>
        — <a href="attachment.cgi?id=81224&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div></div><div class="change-set" id="c95"><div class="comment" data-id="1308790" data-no="95"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-95" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a102117690_5003"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a102117690_5003"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-95"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-95" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c95">Comment 95</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-26 15:52 PDT" data-time="1019861525">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-95">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-81228"
         class="attachment"
         data-id="81228" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="test.html">
      <meta itemprop="contentSize" content="1614">
      <meta itemprop="encodingFormat" content="text/html">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=81228" itemprop="contentUrl">
        <span id="att-81228-description" itemprop="description">Another testcase. Underline only.</span></a>
        — <a href="attachment.cgi?id=81228&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-95" data-comment-id="1308790">The testcase I've used under development, in addition to those supplied in this
bug. See the comment below.</pre></div><div class="change-set" id="c96"><div class="comment" data-id="1308798" data-no="96"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-96" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a102117690_5003"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a102117690_5003"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-96"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-96" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c96">Comment 96</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-26 15:54 PDT" data-time="1019861666">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-96">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-96" data-comment-id="1308798">As to whether the painting of this should be in nsInlineFrame or nsBlockFrame as
suggested by <a href="mailto:dbaron&#64;fas.harvard.edu">dbaron&#64;fas.harvard.edu</a>, this is immaterial. nsInlineFrame inherits
from nsHTMLContainerFrame, and has no Paint() implementation of it's own. In
other words, I've already done as <a href="mailto:dbaron&#64;fas.harvard.edu">dbaron&#64;fas.harvard.edu</a> suggested. BTW: the
testcase supplied renders as expected, that is, the line goes through the image,
whether rendering by nsBlockFrame (that is, remove the &lt;A&gt;'s) or
nsHTMLContainerFrame (use the text case as is).

Concerning the font object: See above; I've stolen the code. If the code is
bugridden, I'll try figure it out. (I'm not too sure where exactly I stole it; I
believe it was from nsTextFrame somewhere....)

I apologize for spelling mistakes etc. I'm too tired to read this through more
than once.

Ian 'Hixie' Hickson: I've already verified against these testcase. Unless I've
missed something, it passes with, excuse the pun, flying color. Well, except the
blink doesn't work, but there's a seperate bug on that.

On a lighter node: I see Hixie-B is still in the whiteboard --- do this I get a
dinner? ;-) I know several nice and not-too-expensive places right here in
Copenhagen &gt;:-}
</pre></div><div class="change-set" id="c97"><div class="comment" data-id="1309474" data-no="97"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-97" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a102117690_5003"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a102117690_5003"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-97"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-97" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c97">Comment 97</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-27 00:42 PDT" data-time="1019893349">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-97">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-97" data-comment-id="1309474">I see today that my comment detailing the implementation was lost, somehow :-(
So, somewhat briefer, it goes like this:
In the Paint() methods in nsHTMLContainerFrame and nsBlockFrame,
PaintTextDecorations() is called if the frame is a inlineframe, or if the frame
contains lines, respectively. PaintTextDecoration immediately calls
GetTextDecorations() which determines which text-decorations should be painted,
like this: First, starting with the current frame and walking up the tree, the
frames are tested for text-decoration styles. The first time one is found, the
color is grapped and this text decoration type (e.g. underline) is marked as
&quot;we've got it.&quot;, so that we don't grab it again. This is exactly as it was done
before. The difference is that now it stops processing if going up the tree
would get a non-inline frame. See <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - [TEXT] 'text-decoration' should not be drawn by children (underline) [INLINE]"
   href="/show_bug.cgi?id=1777#c77">comment 77</a> and 83 below as to why this should
be so.

We're not done with GetTextDecorations() yet! In order to avoid making text
decorations for text-less frames (see <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - [TEXT] 'text-decoration' should not be drawn by children (underline) [INLINE]"
   href="/show_bug.cgi?id=1777#c16">comment 16</a>,77, 83 and others), we have to
do something expensive: check *all* the descendants of the current frame until
we find a textframe(!). If none are found, the textdecorations are reset to
NS_STYLE_TEXT_DECORATION_NONE aka none.

If any text-decoration were found above, we need some font info, a rather, a
nsIFontMetrics object. I stole this code from nsTextFrame.cpp somewhere, so it
should be no worse than what's already out there :O) Anyways, the font belonging
to the current frame is used for calculation of ascent and offsets. Then, for 
the painting, a virtual function is used to distinguish between
nsHTMLContainerFrame and nsBlockFrame. The former is very straightforward, but
for the latter we need to paint all lines marked as &quot;inline.&quot; In order to do
this, I need the distance from the top of the line to the baseline /of the font
initially used/ in the frame. This value was apparantly calculated in
nsLineLayout.cpp, but never stored anywhere. I've changed this by adding the
value to nsLineBox, include a pair of Get/SetAscent(). (I called it ascent in
want of a better name.) From here on, it's very simple.

<a href="mailto:dbaron&#64;fas.harvard.edu">dbaron&#64;fas.harvard.edu</a>: </pre></div><div class="change-set" id="c98"><div class="comment" data-id="1309594" data-no="98"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-98" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a102117690_5003"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a102117690_5003"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-98"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-98" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c98">Comment 98</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-27 04:08 PDT" data-time="1019905736">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-98">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-81273"
         class="attachment patch obsolete"
         data-id="81273" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1777-2.patch">
      <meta itemprop="contentSize" content="18492">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=81273">
          <a class="link" href="attachment.cgi?id=81273&amp;action=diff">
        <span id="att-81273-description" itemprop="description">take 2. Now handles white-space only textFrames appropriately</span></a> (obsolete)
        — <a href="attachment.cgi?id=81273&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=81273">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-98" data-comment-id="1309594">Looking at the testcases to <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - 'text-decoration' should not apply to text-less inlines (underline) [INLINE]"
   href="/show_bug.cgi?id=20163">bug 20163</a> it was evident that my patch did not take
into account textFrames with only whitespace. The attached patch does so.</pre></div><div class="change-set" id="c99"><div class="comment" data-id="1309847" data-no="99"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-99" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a102117690_5003"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a102117690_5003"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-99"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-99" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c99">Comment 99</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-27 09:51 PDT" data-time="1019926274">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-99">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-81294"
         class="attachment"
         data-id="81294" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="rightalign.html">
      <meta itemprop="contentSize" content="450">
      <meta itemprop="encodingFormat" content="text/html">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=81294" itemprop="contentUrl">
        <span id="att-81294-description" itemprop="description">testcase showing incorrect behavior with right alignment</span></a>
        — <a href="attachment.cgi?id=81294&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div></div><div class="change-set" id="c100"><div class="comment" data-id="1309848" data-no="100"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-100" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a102117690_5003"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a102117690_5003"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-100"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-100" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c100">Comment 100</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-27 09:51 PDT" data-time="1019926299">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-100">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-81295"
         class="attachment"
         data-id="81295" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="formcontrols.html">
      <meta itemprop="contentSize" content="565">
      <meta itemprop="encodingFormat" content="text/html">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=81295" itemprop="contentUrl">
        <span id="att-81295-description" itemprop="description">testcase showing incorrect behavior with form controls</span></a>
        — <a href="attachment.cgi?id=81295&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div></div><div class="change-set" id="c101"><div class="comment" data-id="1309852" data-no="101"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-101" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a102117690_5003"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a102117690_5003"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-101"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-101" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c101">Comment 101</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-27 09:52 PDT" data-time="1019926357">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-101">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-101" data-comment-id="1309852">I think this patch is probably too risky for Mozilla 1.0.  It seems to
be making a lot of changes, and I'm not sure how well it's imitating the
quirks that were in the old code.  I also suspect that, in general,
fixing this bug will break sites, and we'll need to have some quirk.  I
could be wrong, though, and I still haven't looked at it in that much
detail yet.

You're still walking up the style context tree to get the decorations,
which makes me think you're painting all the decorations multiple times,
on top of each other.  The point of walking up the tree was that we only
painted the decorations from text frames, i.e., that text decorations
were being drawn by children.  Not doing this is the whole point of this
bug.  Given that, I don't think you need as much color manipulation.
However, you still need a way to imitate the quirks, perhaps.

The patch is missing the changes to nsBlockFrame.h

The patch in general has many overly-long lines.  Please try not to have
lines longer than 80 characters, and please try to follow the
surrounding style.

The patch has a number of comments that are really questions and that
shouldn't be checked in (since they don't really make sense as part of
the code rather than part of a patch, e.g., &quot;Stole much of this from
PaintTextDecoration&quot; when it's no longer in PaintTextDecoration, or
&quot;I'll go learn about the parser&quot;), and also some that are commenting
code that is self-documenting.

I still have no idea what you mean about handling this in the parser
(CSS parser or HTML parser), and I highly doubt it would work.

The patch uses some bad style in the surrounding code.  New code should
use nsCOMPtr for owning references rather than NS_ADDREF / NS_RELEASE.
See <a rel="nofollow" href="http://mozilla.org/projects/xpcom/nsCOMPtr/">http://mozilla.org/projects/xpcom/nsCOMPtr/</a> .

Some stylistic nits (randomly selected):

+    PRBool someKidIsANsTextFrame = findTextFrameAsChild(aPresContext, this);
+    if (!someKidIsANsTextFrame) *pDecorations = NS_STYLE_TEXT_DECORATION_NONE;

The variable name |someKidIsANsTextFrame| doesn't make sense to me, and
it's awfully long.  How about |hasTextFrameChild|?  Please break the
if-then into two lines (for breakpointing and for readability).

The name |findTextFrameAsChild| should follow the usual case conventions
and begin with a capital letter.  However, what you really mean, I
think, is |HasTextFrameChild|.

+    if (decorations!=NS_STYLE_TEXT_DECORATION_NONE) {
Space around != on both sides, please.</pre></div><div class="change-set" id="c102"><div class="comment" data-id="1309860" data-no="102"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-102" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a102117690_5003"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a102117690_5003"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-102"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-102" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c102">Comment 102</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-27 10:00 PDT" data-time="1019926817">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-102">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-81296"
         class="attachment"
         data-id="81296" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="paintorder.html">
      <meta itemprop="contentSize" content="871">
      <meta itemprop="encodingFormat" content="text/html">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=81296" itemprop="contentUrl">
        <span id="att-81296-description" itemprop="description">testcase showing problems / inconsistencies in painting order</span></a>
        — <a href="attachment.cgi?id=81296&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div></div><div class="change-set" id="a107111790_3881"><div class="change" id="aa107111790_3881">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a107111790_3881"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_3881" id="a107111790_3881"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a107111790_3881"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a107111790_3881">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a107111790_3881">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-27 10:00 PDT" data-time="1019926850">19 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=81296&amp;action=edit"
           title="testcase showing problems / inconsistencies in painting order"
           class=""
        >Attachment #81296</a> -
        Attachment description: testcase bug 1777 - problems / inconsistencies in painting order &rarr; testcase showing problems / inconsistencies in painting order</div></div></div><div class="change-set" id="a107120874_30078"><div class="change" id="aa107120874_30078">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_30078" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/29c87e93a312e15101a96780da0a263e?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_30078" id="a107120874_30078"><a class="email " href="/user_profile?user_id=30078" > <span class="fna">Andrew Hagen</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a107120874_30078"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a107120874_30078">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a107120874_30078">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-27 12:32 PDT" data-time="1019935934">19 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=mozilla1.0.1&amp;resolution=---">mozilla1.0.1</a></div></div></div><div class="change-set" id="c103"><div class="comment" data-id="1310264" data-no="103"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-103" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a107120874_30078"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-103"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-103" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c103">Comment 103</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-27 16:48 PDT" data-time="1019951311">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-103">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-103" data-comment-id="1310264">When this is ready for review, I'll build with the patch and check to see if it
works as expected from a black box point of view. I suggest that, given the
complexity of this bug, any r=/sr= should be dependent on this qa=.


<span class="quote">&gt; Hixie-B ... do this I get a dinner? ;-)</span >

If this fixes the bug to my satisfaction and if I'm ever in the same place as
you, then yes, of course! :-)</pre></div><div class="change-set" id="c104"><div class="comment" data-id="1310672" data-no="104"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-104" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-104"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-104" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c104">Comment 104</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-28 05:19 PDT" data-time="1019996374">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-104">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-104" data-comment-id="1310672">I'm working to iron out the issues pointed out to me. I have two questions:

testcase showing problems / inconsistencies in painting order
akahttp://bugzilla.mozilla.org/attachment.cgi?id=81296&amp;action=view: While this
testcase illustrates the problem well, I don't understand the text. Surely the
images /should/ have lines through them? I thougt that sort-of was the whole point!

testcase showing incorrect behavior with form controls aka
<a rel="nofollow" href="http://bugzilla.mozilla.org/attachment.cgi?id=81295&amp;action=view">http://bugzilla.mozilla.org/attachment.cgi?id=81295&amp;action=view</a> : As above. I
can't find any exception stating that form controls should be excluded from
text-decoration --- if it exist, can you give me a pointer, pretty please?.
However, the line should go all the way through. I'll fix that.

The right alignment thing will need a bit of work. The darn line bounds is
relative to it's own lower left corner, that is, always (0,0), so I'll have to
query the style content unless I can figure out something else.

I've made stylistic changes requested which will appear in my next patch. Do I
/hate/ the 80-char linewidth restriction --- it makes perfectly sensible code
into a mess :-( I have to assume that this is due to some obscure
compiler/platform or other? (This was the case is OS390 until recently....)
Oh, and on the same node, I refuse to do 

if (something)
  do something;

Not after using two hours debugging (without a debugger) an Italien program
because a programmer had done this:

if (something)
do something else;
  do something;

So I've change the offending places to:

if (something) {
   do something
}

which should make everyone happy, right?

Hixie: Sounds great :-) In what country would I have to be in to satisfy the
requirements? :O)</pre></div><div class="change-set" id="c105"><div class="comment" data-id="1310788" data-no="105"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-105" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a107120874_30078"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-105"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-105" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c105">Comment 105</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-04-28 07:55 PDT" data-time="1020005759">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-105">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-105" data-comment-id="1310788">The 80 character restriction is because some people use editors at a width of 80
characters per line.  Some people use them somewhat wider as well, but I've
never seen anyone advocate 175 characters per line as your patch used.  It's
acceptable to go over the limit occasionally, but, for example, for wrapping
multi-line comments, you should definitely wrap before the 80th column, or
otherwise they'll look, to many people, like:

            // This is a comment that is very difficult to read because it was
written by someone
            // who wraps lines at longer than 80 characters, so that they're
very hard for
            // everyone else to read.

You shouldn't assume everyone else displays code in the exact same editor, at
the exact same width, that you do.</pre></div><div class="change-set" id="c106"><div class="comment" data-id="1325221" data-no="106"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-106" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_9792" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/fb533e9fab659d075dcc304e2e4ce6b3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_9792" id="a107120874_30078"><a class="email " href="/user_profile?user_id=9792" > <span class="fna">Christian Schmidt</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-106"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-106" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c106">Comment 106</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-05 12:13 PDT" data-time="1020626023">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-106">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-106" data-comment-id="1325221">*** <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED DUPLICATE - Underline is not straight at &lt;CODE&gt;, &lt;KBD&gt;, &lt;TT&gt; or &lt;SAMP&gt;"
   href="/show_bug.cgi?id=142407">Bug 142407</a> has been marked as a duplicate of this bug. ***</pre></div><div class="change-set" id="c107"><div class="comment" data-id="1326807" data-no="107"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-107" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-107"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-107" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c107">Comment 107</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-06 13:22 PDT" data-time="1020716549">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-107">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-82518"
         class="attachment patch obsolete"
         data-id="82518" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1777-3.patch">
      <meta itemprop="contentSize" content="20028">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=82518">
          <a class="link" href="attachment.cgi?id=82518&amp;action=diff">
        <span id="att-82518-description" itemprop="description">Take 3. Now does text-alignment, painting-layers and form elements right. I hope :)</span></a> (obsolete)
        — <a href="attachment.cgi?id=82518&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=82518">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-107" data-comment-id="1326807">After studying the CSS2 specs again, I believe that this patch creates the
right behaviour in all the attached testcases, and a couple more. This patch is
lacking one of two items, but I'm not sure which path to take. As the patch
stands, text-decorations are somewhat expensive: Every time a frame /might/
have text-decoration, an entire section of the tree is queried. If this is the
path to take, the bits like HasTextDecorations() should be removed from
ns(I)StyleContext.*  If this is not the path to take, I will have to come up
with a system of keeping track of what frame have text-decoration. In the light
of dynamic changes and the somewhat convoluted specs regarding
text-decorations, this will be neither simple nor cheap. But it may be cheaper
:-)

Thanks for all the help I'm getting here. Your feedback is invaluable :-D

P.S: I've edited the patch as it contained some changes I didn't make, as well
as some spacing issues. Please tell me of the patch doesn't work or something.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=81201&amp;action=edit"
           title="1st patch attempt. Should fix 20163, too."
           class=""
        >Attachment #81201</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=81273&amp;action=edit"
           title="take 2. Now handles white-space only textFrames appropriately"
           class=""
        >Attachment #81273</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c108"><div class="comment" data-id="1332484" data-no="108"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-108" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_15223" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/e4a0566b254d665aa267b7874726fbbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_15223" id="a107120874_30078"><a class="email " href="/user_profile?user_id=15223" > <span class="fna">timeless</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-108"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-108" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c108">Comment 108</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-09 09:05 PDT" data-time="1020960348">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-108">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-108" data-comment-id="1332484">reassign to patch author</pre><div class="activity"><div class="change">Assignee: hyatt &rarr; esben</div><div class="change">Status: ASSIGNED &rarr; NEW</div><div class="change">Keywords: <span class="activity-deleted"><a href="/buglist.cgi?keywords=helpwanted&amp;resolution=---">helpwanted</a></span></div><div class="change">Target Milestone: Future &rarr; ---</div></div></div><div class="change-set" id="c109"><div class="comment" data-id="1333962" data-no="109"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-109" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-109"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-109" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c109">Comment 109</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-10 02:36 PDT" data-time="1021023396">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-109">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-109" data-comment-id="1333962">Accepting bug. Also, I've decided to go with the current solution, as I'm
unconvinced that the more sofisticated solution (described above) would perform
any better. The solution in the above patches perform more or less like the
current, incorrect, implementation. As soon as my wife relinquishes my computer,
I'll create and upload a &quot;final&quot; patch, where the (now) unused functions in
nsStyleContext are removed.</pre><div class="activity"><div class="change">Status: NEW &rarr; ASSIGNED</div></div></div><div class="change-set" id="c110"><div class="comment" data-id="1334293" data-no="110"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-110" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a107120874_30078"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-110"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-110" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c110">Comment 110</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-10 09:02 PDT" data-time="1021046522">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-110">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-110" data-comment-id="1334293">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=82518" name="attach_82518" title="Take 3. Now does text-alignment, painting-layers and form elements right. I hope :)">attachment 82518</a> <a href="/attachment.cgi?id=82518&amp;action=edit" title="Take 3. Now does text-alignment, painting-layers and form elements right. I hope :)">[details]</a> <a href="/attachment.cgi?id=82518&amp;action=diff" title="Take 3. Now does text-alignment, painting-layers and form elements right. I hope :)">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1777&amp;attachment=82518'>[review]</a>
Take 3. Now does text-alignment, painting-layers and form elements right. I hope :)


I'm still very concerned about the the quirk code.  I think the
current code breaks it pretty badly, although I haven't tested.  You
need to analyze why it was put in and get some testcases.  I'm also
somewhat concerned that moving to this behavior will require *more*
quirks.

I also think it's way too late to consider this for 1.0.

This also probably needs some more testcases for testing in general.

<span class="quote">&gt;Index: nsLineLayout.cpp
&gt;+  // It appears that text is placed along &quot;0&quot;, with the line extending 
&gt;+  // from mMinY (which will be negative) to mMaxY (which will be 
&gt;+  // positive). So mMinY will be the &quot;ascent&quot; of the line... that is 
&gt;+  // the distance from the top of the line to the baseline of the 
&gt;+  // fonts placed normally along the line.
&gt;+  aLineBox-&gt;SetAscent(-psd-&gt;mMinY);</span >

&quot;It appears&quot;?  That suggests the patch isn't ready yet.  Can you
say something more definitive?

But nsLineLayout::VerticalAlignLine already computes the line's
ascent.  Why can't you use that calculation?

<span class="quote">&gt;Index: nsHTMLContainerFrame.h
&gt;+  /** Helper function to paint text decorations for this frame. This function 
&gt;+      attempts to be general; hopefully particular frames can get away with
&gt;+      overriding PaintTextDecorationLines. 
&gt;+  */</span >

For this and other comments, could you try to stick to the
existing style in layout, i.e.,
     /*
      * Comment here.
      */

<span class="quote">&gt;+  void GetTextDecorations(nsIPresContext* aPresContext, 
&gt;+                          PRUint8* pDecorations, 
&gt;+                          nscolor* pUnderColor, 
&gt;+                          nscolor* pOverColor, 
&gt;+                          nscolor* pStrikeColor);</span >

The comment for this function should say that what it handles
is the rules that text-decoration should be painted only on
elements with text.

<span class="quote">&gt;+        aRenderingContext: If one would draw anything, one needs one of these babies :O)</span >

If that's all you have to say, could you just skip the comment?

Also, I think |PaintTextDecorationLines| should not have the final &quot;s&quot;,
since it only paints one line.

offset should also be described as the distance *above* the baseline, so
that it's clear that negative numbers mean below the baseline (which is
the reverse of our usual coordinate space for more general layout).

<span class="quote">&gt;+  PRBool HasTextFrameChild(nsIPresContext* aPresContext, nsIFrame* parent);</span >

Why is this a member function?	It doesn't look like it uses
|this| at all, so you're wasting time passing an extra parameter
all the way down the recursion.  It seems like it should be a
global static function within the .cpp file.

<span class="quote">&gt;Index: nsHTMLContainerFrame.cpp
&gt;+void
&gt;+nsHTMLContainerFrame::GetTextDecorations(nsIPresContext* aPresContext, 
&gt;+                                         PRUint8* pDecorations, 
&gt;+                                         nscolor* pUnderColor, 
&gt;+                                         nscolor* pOverColor, 
&gt;+                                         nscolor* pStrikeColor) {</span >

Could you push the { to the beginning of the next line (as other
code in the module does) rather than leaving the next line blank?
Same for all the other functions.

<span class="quote">&gt;+
&gt;+  PRBool useOverride = PR_FALSE;
&gt;+  nscolor overrideColor;
&gt;+  nsCOMPtr&lt;nsIStyleContext&gt; context = mStyleContext;
&gt;+
&gt;+  *pDecorations = NS_STYLE_TEXT_DECORATION_NONE;
&gt;+  PRUint8 decorMask =   NS_STYLE_TEXT_DECORATION_UNDERLINE 
&gt;+                      | NS_STYLE_TEXT_DECORATION_OVERLINE 
&gt;+                      | NS_STYLE_TEXT_DECORATION_LINE_THROUGH; // A mask of all possible decorations.
&gt;+
&gt;+  PRBool isBlock;
&gt;+  do {  
&gt;+   // find text-decorations. Inherit from block frames, but /only/ if no 
&gt;+    // inline frames comes between. This should prevent multiple drawings
&gt;+    // of the same text-decoration AND make block-level text-decoration
&gt;+    // apply to the nearest inline child only.</span >

But you have the block frame paint 'text-decoration' itself, so why
is this necessary?  Aren't you painting twice?

<span class="quote">&gt;+    const nsStyleTextReset* styleText = (const nsStyleTextReset*)context-&gt;GetStyleData(eStyleStruct_TextReset);</span >

Line too long.	And the next few as well, I think.

<span class="quote">&gt;+    if (!useOverride &amp;&amp; (NS_STYLE_TEXT_DECORATION_OVERRIDE_ALL &amp; styleText-&gt;mTextDecoration)) {
&gt;+      // This handles the &lt;a href=&quot;blah.html&quot;&gt;&lt;font color=&quot;green&quot;&gt;La la la&lt;/font&gt;&lt;/a&gt; case.
&gt;+      // The link underline should be green.
&gt;+      const nsStyleColor* styleColor = 
&gt;+        (const nsStyleColor*)context-&gt;GetStyleData(eStyleStruct_Color);
&gt;+      useOverride = PR_TRUE;
&gt;+      overrideColor = styleColor-&gt;mColor;
&gt;+    }</span >

Since this code is only being used for the direct children of
blocks, this is insufficient to handle the quirk.

You could say
PRUint8 decors = decorMask &amp; styleText-&gt;mTextDecoration
and then use that in these 4 places (except I don't think
you need this coee at all):
<span class="quote">&gt;+    if (decorMask &amp; styleText-&gt;mTextDecoration) {
&gt;+      if (NS_STYLE_TEXT_DECORATION_UNDERLINE &amp; decorMask &amp; styleText-&gt;mTextDecoration) {
&gt;+      if (NS_STYLE_TEXT_DECORATION_OVERLINE &amp; decorMask &amp; styleText-&gt;mTextDecoration) {
&gt;+      if (NS_STYLE_TEXT_DECORATION_LINE_THROUGH &amp; decorMask &amp; styleText-&gt;mTextDecoration) {</span >

leak.  You need dont_AddRef().

<span class="quote">&gt;+      const nsStyleDisplay* display;
&gt;+      this-&gt;GetStyleData(eStyleStruct_Display, (const nsStyleStruct*&amp;) display);</span >

Prefer |::GetStyleData(this, &amp;display);|

<span class="quote">&gt;+      isBlock = NS_STYLE_DISPLAY_INLINE != display-&gt;mDisplay;
&gt;+    }
&gt;+  } while ((isBlock) &amp;&amp; (nsnull != context) &amp;&amp; (0 != decorMask));</span >

You need to check |decorMask| first if you want to avoid reading
uninitialized memory (isBlock).  Context should be null-checked
without the &quot;nsnull !=&quot;.

<span class="quote">&gt;+  return;
&gt;+}</span >

Not really needed in a |void| function at the end.  Also, please
leave a line of whitespace between this function and the next.

<span class="quote">&gt;+PRBool 
&gt;+nsHTMLContainerFrame::HasTextFrameChild(nsIPresContext* aPresContext, 
&gt;+                                        nsIFrame* parent) {
&gt;+
&gt;+    nsIFrame* kid = nsnull;
&gt;+    parent-&gt;FirstChild(aPresContext,nsnull,&amp;kid); </span >

Please put a space after each &quot;,&quot;.

<span class="quote">&gt;+    nsCOMPtr&lt;nsIAtom&gt; frameType;
&gt;+    
&gt;+    while (nsnull != kid) {</span >

This could be a for loop:
for (parent-&gt;FirstChild(aPresContext, nsnull, &amp;kid); kid;
     kid-&gt;GetNextSibling(&amp;kid)) {
... but I say that because I like |for| loops, and you don't
need to do this.

<span class="quote">&gt;+      kid-&gt;GetFrameType(getter_AddRefs(frameType));
&gt;+      if (frameType.get() == nsLayoutAtoms::textFrame) {</span >

No need for the |.get()|.

<span class="quote">&gt;+        // This is only a candidate. We need to determine if this 
&gt;+        // textFrame is empty, as in containing only (non-pre) 
&gt;+        // whitespace. See <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - 'text-decoration' should not apply to text-less inlines (underline) [INLINE]"
   href="/show_bug.cgi?id=20163">bug 20163</a>
&gt;+        nsCompatibility mode;
&gt;+        aPresContext-&gt;GetCompatibilityMode(&amp;mode);
&gt;+        PRBool isEmpty;
&gt;+        PRBool isPre = PR_FALSE;
&gt;+        const nsStyleText* styleText; 
&gt;+        kid-&gt;GetStyleData(eStyleStruct_Text, (const nsStyleStruct*&amp;) styleText);</span >

prefer
::GetStyleData(kid, &amp;styleText);

<span class="quote">&gt;+        if ((NS_STYLE_WHITESPACE_PRE == styleText-&gt;mWhiteSpace) ||
&gt;+            (NS_STYLE_WHITESPACE_MOZ_PRE_WRAP == styleText-&gt;mWhiteSpace)) {
&gt;+          isPre = PR_TRUE;
&gt;+        }</span >

This should be:
PRBool isPre = styleText-&gt;mWhiteSpace == NS_STYLE_WHITESPACE_PRE ||
	       styleText-&gt;mWhiteSpace == NS_STYLE_WHITESPACE_MOZ_PRE_WRAP;

(Note there are no extra parentheses, so some compilers will warn about
equality mistyped as assignment.)

<span class="quote">&gt;+
&gt;+</span >

Only one new line between functions, though, unless there's some big
logical split (which there doesn't seem to be here).

<span class="quote">&gt;+void</span >

If it's virtual, it might be nice to write
/* virtual */ void

<span class="quote">&gt;+nsHTMLContainerFrame::PaintTextDecorationLines(
&gt;+                   nsIRenderingContext&amp; aRenderingContext, 
&gt;+                   nscolor color, nscoord offset, 
&gt;+                   nscoord ascent, 
&gt;+                   nscoord size) {
&gt;+
&gt;+  aRenderingContext.SetColor(color);
&gt;+  aRenderingContext.FillRect(0, ascent - offset, mRect.width, size);
&gt;+
&gt;+  return;
&gt;+}</span >

Again, { on its own line, and unneeded |return;|.

<span class="quote">&gt;+void
&gt;+nsHTMLContainerFrame::PaintTextDecorations(
&gt;+                            nsIPresContext* aPresContext,
&gt;+                            nsIRenderingContext&amp; aRenderingContext) {
&gt;+
&gt;+    nscolor underColor, overColor, strikeColor;
&gt;+    PRUint8 decorations;
&gt;+    GetTextDecorations(aPresContext, 
&gt;+                       &amp;decorations, 
&gt;+                       &amp;underColor, 
&gt;+                       &amp;overColor, 
&gt;+                       &amp;strikeColor);</span >

You don't need each argument on its own line.

<span class="quote">&gt;+
&gt;+    if (decorations != NS_STYLE_TEXT_DECORATION_NONE) {
&gt;+
&gt;+      nsStyleFont* font;</span >

Make this |const nsStyleFont *font|.

<span class="quote">&gt;+      font = (nsStyleFont*) mStyleContext-&gt;GetStyleData(eStyleStruct_Font);</span >

::GetStyleData(this, &amp;font);

<span class="quote">&gt;+      // Cache the original decorations and reuse the current font
&gt;+      // to query metrics, rather than creating a new font which is expensive.
&gt;+      nsIFontMetrics* normalFont;</span >

You should use nsCOMPtr&lt;nsIFontMetrics&gt;, and it should be
declared closer to first use (below).

<span class="quote">&gt;+      nsFont* plainFont = &amp;font-&gt;mFont;</span >

...and use NS_CONST_CAST here to show that what you're doing is
dangerous.  (Old-style casts are evil because they hide too well.)

<span class="quote">&gt;+      NS_ASSERTION(plainFont, 
&gt;+                   &quot;null plainFont: font problems &quot;
&gt;+                   &quot;in nsHTMLContainerFrame::Paint&quot;);</span >

No need for &quot;in nsHTMLContainerFrame::Paint&quot;, since the
NS_ASSERTION macro gives line numbers.	(So this can all be
one line.  But why even bother with the assertion?  If 
|font| is null then |plainFont| will be 0x4.

<span class="quote">&gt;+      PRUint8 originalDecorations = plainFont-&gt;decorations;
&gt;+      plainFont-&gt;decorations = NS_FONT_DECORATION_NONE;</span >

Maybe try an
NS_ASSERTION(plainFont-&gt;decorations == NS_FONT_DECORATION_NONE,
	     &quot;fonts on style structs shouldn't have decorations&quot;);
and see if it fires?  But perhaps leave the correction code in for
at least a bit, anyway?

<span class="quote">&gt;+      nsCOMPtr&lt;nsIDeviceContext&gt; deviceContext;
&gt;+      aRenderingContext.GetDeviceContext(*getter_AddRefs(deviceContext));
&gt;+      deviceContext-&gt;GetMetricsFor(*plainFont, normalFont);</span >

*getter_AddRefs(normalFont)

<span class="quote">&gt;+      plainFont-&gt;decorations = originalDecorations;
&gt;+
&gt;+      /* Get ascent of the font */
&gt;+      NS_ASSERTION(normalFont, &quot;null normal font cannot be handled&quot;);
&gt;+      nscoord ascent;
&gt;+      normalFont-&gt;GetMaxAscent(ascent);
&gt;+
&gt;+      /* Paint */</span >

These two comments seem unnecessary, since they only state the
obvious and nothing more.

<span class="quote">&gt;+      nscoord offset, size;
&gt;+      if (decorations &amp; 
&gt;+          (NS_STYLE_TEXT_DECORATION_UNDERLINE 
&gt;+           | NS_STYLE_TEXT_DECORATION_OVERLINE)) {
&gt;+        normalFont-&gt;GetUnderline(offset, size);
&gt;+        if (NS_STYLE_TEXT_DECORATION_UNDERLINE &amp; decorations) {
&gt;+          PaintTextDecorationLines(aRenderingContext, 
&gt;+                                   underColor,
&gt;+                                   offset, 
&gt;+                                   ascent, 
&gt;+                                   size);</span >

You don't need each argument on its own line.  Just wrap when they
hit 80 characters back to the indentation where you put each one.

<span class="quote">&gt;+        }
&gt;+        if (NS_STYLE_TEXT_DECORATION_OVERLINE &amp; decorations) {
&gt;+          PaintTextDecorationLines(aRenderingContext, 
&gt;+                                   overColor,
&gt;+                                   ascent, 
&gt;+                                   ascent, 
&gt;+                                   size);
&gt;+        }
&gt;+      }
&gt;+      if (NS_STYLE_TEXT_DECORATION_LINE_THROUGH &amp; decorations) {
&gt;+        normalFont-&gt;GetStrikeout(offset, size);
&gt;+        PaintTextDecorationLines(aRenderingContext, 
&gt;+                                 strikeColor, 
&gt;+                                 offset, 
&gt;+                                 ascent, 
&gt;+                                 size);
&gt;+      }
&gt;+    }
&gt;+
&gt;+  return;
&gt;+}</span >

Again, no |return;| with blank line before, but a blank line
after the function.

<span class="quote">&gt; NS_IMETHODIMP
&gt; nsHTMLContainerFrame::Paint(nsIPresContext*      aPresContext,
&gt;                             nsIRenderingContext&amp; aRenderingContext,
&gt;&#64;&#64; -131,6 +321,15 &#64;&#64;
&gt;   // hidden
&gt; 
&gt;   PaintChildren(aPresContext, aRenderingContext, aDirtyRect, aWhichLayer, aFlags);
&gt;+
&gt;+  /* After painting the children, let's add the text-decoraions. That way 
&gt;+     they won't get painted over. */</span >

No, this should be before.  I suspect you're failing testcases like:

&lt;style type=&quot;text/css&quot;&gt;
span.one {
    color: red;
    text-decoration: underline;
}

span.two {
    color: green;
    text-decoration: underline;
}
&lt;/style&gt;

&lt;p&gt;&lt;span class=&quot;one&quot;&gt;There &lt;span class=&quot;two&quot;&gt;should only be a tiny bit of
red underline in this&lt;/span&gt; paragraph&lt;/span&gt;.&lt;/p&gt;

<span class="quote">&gt;+  if (eFramePaintLayer_Overlay == aWhichLayer </span >

Test NS_FRAME_PAINT_LAYER_FOREGROUND rather than the enum value, to
be consistent with other code.

<span class="quote">&gt;+      &amp;&amp; frameType.get() == nsLayoutAtoms::inlineFrame) {
&gt;+    PaintTextDecorations(aPresContext, aRenderingContext);
&gt;+  }
&gt;+
&gt;+</span >
&gt;
<span class="quote">&gt;   return NS_OK;
&gt; }</span >

No need for so many blank lines.

<span class="quote">&gt;Index: nsBlockFrame.h
&gt; protected:
&gt;+  /** 
&gt;+      Function that does the actual drawing of the textdecoration. 
&gt;+      input:
&gt;+        aRenderingContext: If one would draw anything, one needs one of these babies :O)
&gt;+        color: the color of the text-decoration
&gt;+        ascent: ascent of the font from which the text-decoration was derived. 
&gt;+        offset: distance from baseline to where the text-decoration should be drawn.
&gt;+        size: the thickness of the line
&gt;+      output: 
&gt;+        none */</span >

Probably the comment should just say
/* override member function of nsHTMLContainerFrame. */
and perhaps also say *why* the override is needed, but not repeat the comment
that's on nsHTMLContainerFrame (which is likely to change without this one
being updated, or vice versa).

<span class="quote">&gt;Index: nsBlockFrame.cpp
&gt;===================================================================
&gt;RCS file: /cvsroot/mozilla/layout/html/base/src/nsBlockFrame.cpp,v
&gt;retrieving revision 3.506
&gt;diff -u -r3.506 nsBlockFrame.cpp
&gt;--- nsBlockFrame.cpp	3 May 2002 13:49:44 -0000	3.506
&gt;+++ nsBlockFrame.cpp	6 May 2002 19:54:16 -0000
&gt;&#64;&#64; -5220,6 +5220,29 &#64;&#64;
&gt;   return rv;
&gt; }
&gt; 
&gt;+void
&gt;+nsBlockFrame::PaintTextDecorationLines(nsIRenderingContext&amp; aRenderingContext, 
&gt;+                                       nscolor color, 
&gt;+                                       nscoord offset, 
&gt;+                                       nscoord ascent, 
&gt;+                                       nscoord size) {
&gt;+  aRenderingContext.SetColor(color);
&gt;+  nscoord accHeight = 0;
&gt;+  for (nsLineList::iterator line = begin_lines(), line_end = end_lines(); line != line_end; ++line) {
&gt;+    if (!line-&gt;IsBlock()) {
&gt;+      nsPoint firstChildOrigin;
&gt;+      line-&gt;mFirstChild-&gt;GetOrigin(firstChildOrigin);
&gt;+      aRenderingContext.FillRect(firstChildOrigin.x,</span >

Seems like you should just use line-&gt;mBounds.x rather than
this |firstChildOrigin| stuff.

<span class="quote">&gt;+                                 accHeight + line-&gt;GetAscent() - offset, 
&gt;+                                 line-&gt;mBounds.width, 
&gt;+                                 size);
&gt;+      accHeight += line-&gt;mBounds.height;
&gt;+    }
&gt;+  }
&gt;+  
&gt;+  return;
&gt;+}
&gt;+</span >

Same as before about |return;|.

<span class="quote">&gt; NS_IMETHODIMP
&gt; nsBlockFrame::Paint(nsIPresContext*      aPresContext,
&gt;                     nsIRenderingContext&amp; aRenderingContext,
&gt;&#64;&#64; -5301,6 +5324,14 &#64;&#64;
&gt;   if (NS_STYLE_OVERFLOW_HIDDEN == disp-&gt;mOverflow) {
&gt;     PRBool clipState;
&gt;     aRenderingContext.PopState(clipState);
&gt;+  }
&gt;+
&gt;+  if (aWhichLayer == eFramePaintLayer_Overlay &amp;&amp; !mLines.empty()) {</span >

Again, for consistency with other code, check
NS_FRAME_PAINT_LAYER_FOREGROUND.

<span class="quote">&gt;+    nsCOMPtr&lt;nsIAtom&gt; frameType;
&gt;+    GetFrameType(getter_AddRefs(frameType));
&gt;+    if (frameType.get() == nsLayoutAtoms::blockFrame) {
&gt;+      PaintTextDecorations(aPresContext, aRenderingContext);
&gt;+    }</span >

What other frame type do you expect an nsBlockFrame to be?  Is this
because of form controls?  If so, you need a comment.  However, this
seems like the wrong way to solve a form control problem, if that's
what it is.


(Any particular reason there were a very large number of blank lines
at the end of the patch?)</pre></div><div class="change-set" id="c111"><div class="comment" data-id="1334306" data-no="111"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-111" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a107120874_30078"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-111"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-111" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c111">Comment 111</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-10 09:06 PDT" data-time="1021046774">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-111">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-111" data-comment-id="1334306">I chopped out the code I was quoting for the comment &quot;leak.  You need
dont_AddRef().&quot;, which was

context = context-&gt;GetParent();

Also, there were some other unneeded .get() uses on == comparisons with
|nsCOMPtr|s that I didn't mention in addition to the ones that I did.  (They
used to be needed due to an old nsCOMPtr bug, but they aren't anymore.)</pre></div><div class="change-set" id="c112"><div class="comment" data-id="1334310" data-no="112"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-112" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-112"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-112" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c112">Comment 112</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-10 09:07 PDT" data-time="1021046829">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-112">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-83043"
         class="attachment patch obsolete"
         data-id="83043" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1777-4.patch">
      <meta itemprop="contentSize" content="20155">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=83043">
          <a class="link" href="attachment.cgi?id=83043&amp;action=diff">
        <span id="att-83043-description" itemprop="description">Take 4. This patch is final (until otherwise proven :o) )</span></a> (obsolete)
        — <a href="attachment.cgi?id=83043&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=83043">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-112" data-comment-id="1334310">This is my final patch (if no further concerns are raised.)

After reviewing the content in nsStyleContext, I realized that this was 
  a) still used by xul and 
  b) usable for my patch as well. 
It simply establishes a neccessary (but not sufficient) condition for a frame
to have any text-decorations. With this optimization, I'm quite sure that this
patch is a good solution for this bug. Anyone is welcome to disagree.

On a side note, after (re)reading the keyword section, I don't think this bug
merits the high-risk keyword. I'll remove it in a bit, just add it again if you
disagree. I wouldn't recommend it for mozilla 1.0, though.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=82518&amp;action=edit"
           title="Take 3. Now does text-alignment, painting-layers and form elements right. I hope :)"
           class=""
        >Attachment #82518</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c113"><div class="comment" data-id="1334316" data-no="113"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-113" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-113"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-113" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c113">Comment 113</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-10 09:08 PDT" data-time="1021046923">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-113">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-113" data-comment-id="1334316">Updating keywords to reflect status...</pre><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=highrisk&amp;resolution=---">highrisk</a> &rarr; <a href="/buglist.cgi?keywords=patch&amp;resolution=---">patch</a></div></div></div><div class="change-set" id="c114"><div class="comment" data-id="1334333" data-no="114"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-114" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a107120874_30078"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-114"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-114" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c114">Comment 114</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-10 09:19 PDT" data-time="1021047565">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-114">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-114" data-comment-id="1334333">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=83043" name="attach_83043" title="Take 4. This patch is final (until otherwise proven :o) )">attachment 83043</a> <a href="/attachment.cgi?id=83043&amp;action=edit" title="Take 4. This patch is final (until otherwise proven :o) )">[details]</a> <a href="/attachment.cgi?id=83043&amp;action=diff" title="Take 4. This patch is final (until otherwise proven :o) )">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1777&amp;attachment=83043'>[review]</a>
Take 4. This patch is final (until otherwise proven :o) )

All or nearly all of my review comments on the previous patch also apply to
this one.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=83043&amp;action=edit"
           title="Take 4. This patch is final (until otherwise proven :o) )"
           class=""
        >Attachment #83043</a> -
        Flags: needs-work+</div></div></div><div class="change-set" id="c115"><div class="comment" data-id="1334345" data-no="115"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-115" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a107120874_30078"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-115"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-115" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c115">Comment 115</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-10 09:26 PDT" data-time="1021047978">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-115">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-115" data-comment-id="1334345">Regarding my comment &quot;But you have the block frame paint 'text-decoration'
itself, so why is this necessary?  Aren't you painting twice?&quot;:  I see now that
this is an attempt to handle the issues in <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - [TEXT] 'text-decoration' should not be drawn by children (underline) [INLINE]"
   href="/show_bug.cgi?id=1777#c83">comment 83</a>.  However, those issues
aren't the ones where the quirk is involved -- it's involved for inlines. 
(Seeing the quirk code there originally made me expect the condition to be
|!isBlock|, and I didn't fully readjust to what it was really doing.)

However, in light of that, I think display != NS_STYLE_DISPLAY_INLINE may be too
generous a definition of a block.  I'd need to think about it, though.</pre></div><div class="change-set" id="c116"><div class="comment" data-id="1334350" data-no="116"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-116" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a107120874_30078"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-116"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-116" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c116">Comment 116</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-10 09:28 PDT" data-time="1021048085">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-116">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-116" data-comment-id="1334350">... but if that's the point, you should be setting |isBlock| before you do the
|GetParent|, right, rather than after?  Otherwise you paint block text
decorations twice, no?</pre></div><div class="change-set" id="c117"><div class="comment" data-id="1334884" data-no="117"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-117" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-117"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-117" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c117">Comment 117</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-10 14:03 PDT" data-time="1021064598">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-117">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-83090"
         class="attachment"
         data-id="83090" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="fontquirk.html">
      <meta itemprop="contentSize" content="254">
      <meta itemprop="encodingFormat" content="text/html">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=83090" itemprop="contentUrl">
        <span id="att-83090-description" itemprop="description">Testcase for font-color overrides text-decoration color quirk.</span></a>
        — <a href="attachment.cgi?id=83090&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-117" data-comment-id="1334884">I can see I misunderstood how the font quirk is supposed to work. My patch
breaks this testcase. I'll have to think about this. I supposed the easiest way
would be to let &lt;FONT&gt; inline frames paint any text-decorations on their own,
overpainting the &quot;true&quot; text-decoration.

If anybody knows any other quirks in this context, PLEASE tell me.</pre></div><div class="change-set" id="c118"><div class="comment" data-id="1335777" data-no="118"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-118" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-118"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-118" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c118">Comment 118</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-11 06:18 PDT" data-time="1021123102">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-118">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-118" data-comment-id="1335777">I've made the correction suggested below, with the following comments. 
Everything that has been suggested and to which I had no comment I've 
simply implemented. One issue remains: Painting in the foreground layer 
does not garantee that form controls &amp; images does not paint the 
text-decorations over. PLEASE: I need some help here.  Should I add a 
new layer? What should I call it?
NS_FRAME_PAINT_LAYER_DECORATIONS? Also, adding a new layer sounds 
expensive... but I see no other way.

<span class="quote">&gt;I'm still very concerned about the the quirk code.  I think the
&gt;current code breaks it pretty badly, although I haven't tested.  You
&gt;need to analyze why it was put in and get some testcases.  I'm also
&gt;somewhat concerned that moving to this behavior will require *more*
&gt;quirks.</span >
&gt;
I've searched the web for any information about this, and only found the 
font thing.
How can I &quot;analyse&quot; why it was put in? I can only mimic it's 
behaviour...  I've created testcase, that I think demostrates the quirk 
in question. I'm updating the patch to handle this case... by making the 
&lt;FONT&gt; tag draw it's own text-decoration, including the ones  &quot;applied&quot; 
from an ancestor. Practically speaking, I'll walk up the tree in 
GetTextDecorations if either it's a FONT tag or if a block-element.

<span class="quote">&gt;I also think it's way too late to consider this for 1.0.</span >
&gt;
<span class="quote">&gt;This also probably needs some more testcases for testing in general.</span >
&gt;
There is a fair bit, including the links in the bug comments below, but 
more are welcome. (I can provide some too, of course, but I'm more or 
less out of ideas...)
/

<span class="quote">&gt;&gt;Index: nsLineLayout.cpp
&gt;&gt;+  // It appears that text is placed along &quot;0&quot;, with the line extending 
&gt;&gt;+  // from mMinY (which will be negative) to mMaxY (which will be 
&gt;&gt;+  // positive). So mMinY will be the &quot;ascent&quot; of the line... that is 
&gt;&gt;+  // the distance from the top of the line to the baseline of the 
&gt;&gt;+  // fonts placed normally along the line.
&gt;&gt;+  aLineBox-&gt;SetAscent(-psd-&gt;mMinY);
&gt;&gt;    
&gt;&gt;</span >
&gt;
<span class="quote">&gt;&quot;It appears&quot;?  That suggests the patch isn't ready yet.  Can you
&gt;say something more definitive?</span >
&gt;
<span class="quote">&gt;But nsLineLayout::VerticalAlignLine already computes the line's
&gt;ascent.  Why can't you use that calculation?</span >
&gt;
I assume you're referring to aLineBoxAscent, which is a paramenter to 
nsLineLayout::VerticalAlignLine. This is not the correct &quot;ascent&quot;. In 
the face of multiple box-sizes on the line, the &quot;ascent of a line&quot; is 
not as well-defined as in the case of fonts. I can't remember what 
distance aLineBoxAscent does measure, but I can assure everyone, it's 
the wrong one :o) But I can update the comment to be more assertive :) 
The reason for the indecisiveness was the bits below which readjust the 
lineheight in some cases, and I wasn't quite sure that this didn't 
effect this distance. As far as I could determine, the later adjustments 
was irrelevant and therefore the code is correct. I have just rechecked 
this and I'm 99% sure that this is so.

<span class="quote">&gt;Also, I think |PaintTextDecorationLines| should not have the final &quot;s&quot;,
&gt;since it only paints one line.</span >
&gt;
Err. It sometimes paints several lines, namely if a nsBlockFrame contain 
multiple inline lines.

<span class="quote">&gt;&gt;+
&gt;&gt;+  PRBool useOverride = PR_FALSE;
&gt;&gt;+  nscolor overrideColor;
&gt;&gt;+  nsCOMPtr&lt;nsIStyleContext&gt; context = mStyleContext;
&gt;&gt;+
&gt;&gt;+  *pDecorations = NS_STYLE_TEXT_DECORATION_NONE;
&gt;&gt;+  PRUint8 decorMask =   NS_STYLE_TEXT_DECORATION_UNDERLINE 
&gt;&gt;+                      | NS_STYLE_TEXT_DECORATION_OVERLINE 
&gt;&gt;+                      | NS_STYLE_TEXT_DECORATION_LINE_THROUGH; // A mask of</span >
all possible decorations.
<span class="quote">&gt;&gt;+
&gt;&gt;+  PRBool isBlock;
&gt;&gt;+  do {  
&gt;&gt;+   // find text-decorations. Inherit from block frames, but /only/ if no 
&gt;&gt;+    // inline frames comes between. This should prevent multiple drawings
&gt;&gt;+    // of the same text-decoration AND make block-level text-decoration
&gt;&gt;+    // apply to the nearest inline child only.
&gt;&gt;    
&gt;&gt;</span >
&gt;
<span class="quote">&gt;But you have the block frame paint 'text-decoration' itself, so why
&gt;is this necessary?  Aren't you painting twice?</span >
&gt;
I've changed this to be both clearer and more correct. Basically, I only 
walk up the tree if it's a blockframe (or the FONT quirk).

Put another way: There are two cases for this bug: There is the block 
frame case and the inline case. The inline case is simple: Just draw the 
text-decorations specified for this element. The block case is more 
complex, as the text-decorations should be drawn on all inline children. 
To make this work in cases like &lt;div 
class=&quot;underline&gt;&lt;div&gt;&lt;p&gt;Hello&lt;/div&gt;&lt;/div&gt; I need to make &lt;p&gt; walk up 
the tree to fetch the underline from the outer &lt;div class=&quot;underline&quot;&gt;.

<span class="quote">&gt;&gt;+    if (!useOverride &amp;&amp; (NS_STYLE_TEXT_DECORATION_OVERRIDE_ALL &amp;</span >
styleText-&gt;mTextDecoration)) {
<span class="quote">&gt;&gt;+      // This handles the &lt;a href=&quot;blah.html&quot;&gt;&lt;font color=&quot;green&quot;&gt;La la</span >
la&lt;/font&gt;&lt;/a&gt; case.
<span class="quote">&gt;&gt;+      // The link underline should be green.
&gt;&gt;+      const nsStyleColor* styleColor = 
&gt;&gt;+        (const nsStyleColor*)context-&gt;GetStyleData(eStyleStruct_Color);
&gt;&gt;+      useOverride = PR_TRUE;
&gt;&gt;+      overrideColor = styleColor-&gt;mColor;
&gt;&gt;+    }
&gt;&gt;    
&gt;&gt;</span >
&gt;
<span class="quote">&gt;Since this code is only being used for the direct children of
&gt;blocks, this is insufficient to handle the quirk.</span >
&gt;
Does the testcase cover your concern? I've only learned HTML/CSS the 
standards way, so I'm not very knowledgeable about the quirks, 
unfortunately. I have changed the behaviour of the quirk handling to be 
able to handle the new testcase.

<span class="quote">&gt;You could say
&gt;PRUint8 decors = decorMask &amp; styleText-&gt;mTextDecoration
&gt;and then use that in these 4 places (except I don't think
&gt;you need this coee at all):</span >
&gt;
I do need to walk up (or down) the tree. Walking down the tree (that is, 
letting the frame where the text-decoration is specified draw the 
text-decoration for all it's inline descendents/children) is certainly a 
possibility. Not too easy though. Would it be any better, you think?

<span class="quote">&gt;&gt;+    nsCOMPtr&lt;nsIAtom&gt; frameType;
&gt;&gt;+    
&gt;&gt;+    while (nsnull != kid) {
&gt;&gt;    
&gt;&gt;</span >
&gt;
<span class="quote">&gt;This could be a for loop:
&gt;for (parent-&gt;FirstChild(aPresContext, nsnull, &amp;kid); kid;
&gt;     kid-&gt;GetNextSibling(&amp;kid)) {
&gt;... but I say that because I like |for| loops, and you don't
&gt;need to do this.</span >
&gt;
I like the |for| loop. It's a little clearer.

<span class="quote">&gt;&gt;+      NS_ASSERTION(plainFont, 
&gt;&gt;+                   &quot;null plainFont: font problems &quot;
&gt;&gt;+                   &quot;in nsHTMLContainerFrame::Paint&quot;);
&gt;&gt;    
&gt;&gt;</span >
&gt;
<span class="quote">&gt;No need for &quot;in nsHTMLContainerFrame::Paint&quot;, since the
&gt;NS_ASSERTION macro gives line numbers.	(So this can all be
&gt;one line.  But why even bother with the assertion?  If 
&gt;|font| is null then |plainFont| will be 0x4.</span >
&gt;
You're right. Should have checked the code I stole more closely :-[

<span class="quote">&gt;&gt;+      PRUint8 originalDecorations = plainFont-&gt;decorations;
&gt;&gt;+      plainFont-&gt;decorations = NS_FONT_DECORATION_NONE;
&gt;&gt;    
&gt;&gt;</span >
&gt;
<span class="quote">&gt;Maybe try an
&gt;NS_ASSERTION(plainFont-&gt;decorations == NS_FONT_DECORATION_NONE,</span >
&gt;
     &quot;fonts on style structs shouldn't have decorations&quot;);
<span class="quote">&gt;and see if it fires?  But perhaps leave the correction code in for
&gt;at least a bit, anyway?</span >
&gt;
Good points. I'll do this.

<span class="quote">&gt;&gt;NS_IMETHODIMP
&gt;&gt;nsHTMLContainerFrame::Paint(nsIPresContext*      aPresContext,
&gt;&gt;                            nsIRenderingContext&amp; aRenderingContext,
&gt;&gt;&#64;&#64; -131,6 +321,15 &#64;&#64;
&gt;&gt;  // hidden
&gt;&gt;
&gt;&gt;  PaintChildren(aPresContext, aRenderingContext, aDirtyRect, aWhichLayer, aFlags);
&gt;&gt;+
&gt;&gt;+  /* After painting the children, let's add the text-decoraions. That way 
&gt;&gt;+     they won't get painted over. */
&gt;&gt;    
&gt;&gt;</span >
&gt;
<span class="quote">&gt;No, this should be before.  I suspect you're failing testcases like:</span >
&gt;
<span class="quote">&gt;&lt;style type=&quot;text/css&quot;&gt;
&gt;span.one {
&gt;    color: red;
&gt;    text-decoration: underline;
&gt;}</span >
&gt;
<span class="quote">&gt;span.two {
&gt;    color: green;
&gt;    text-decoration: underline;
&gt;}
&gt;&lt;/style&gt;</span >
&gt;
<span class="quote">&gt;&lt;p&gt;&lt;span class=&quot;one&quot;&gt;There &lt;span class=&quot;two&quot;&gt;should only be a tiny bit of
&gt;red underline in this&lt;/span&gt; paragraph&lt;/span&gt;.&lt;/p&gt;</span >
&gt;
Right you are. This may be a bigger problem, since pictures, forms and 
such are already drawn in the foreground, and I need to do it in a layer 
before this. Adding another layer seems a bit drastic, but currently I 
see no other way.... See also my comments at the top of this comment.

<span class="quote">&gt;&gt;+  for (nsLineList::iterator line = begin_lines(), line_end = end_lines();</span >
line != line_end; ++line) {
<span class="quote">&gt;&gt;+    if (!line-&gt;IsBlock()) {
&gt;&gt;+      nsPoint firstChildOrigin;
&gt;&gt;+      line-&gt;mFirstChild-&gt;GetOrigin(firstChildOrigin);
&gt;&gt;+      aRenderingContext.FillRect(firstChildOrigin.x,
&gt;&gt;    
&gt;&gt;</span >
&gt;
<span class="quote">&gt;Seems like you should just use line-&gt;mBounds.x rather than
&gt;this |firstChildOrigin| stuff.</span >
&gt;
Nice to know I'm not the only one to think so :-D Only, as your testcase 
illustrated, line-&gt;mBounds.x is always 0, even when a short line is 
right-aligned or centered. Could be a bug in lineBox?

<span class="quote">&gt;&gt;+    nsCOMPtr&lt;nsIAtom&gt; frameType;
&gt;&gt;+    GetFrameType(getter_AddRefs(frameType));
&gt;&gt;+    if (frameType.get() == nsLayoutAtoms::blockFrame) {
&gt;&gt;+      PaintTextDecorations(aPresContext, aRenderingContext);
&gt;&gt;+    }
&gt;&gt;    
&gt;&gt;</span >
&gt;
<span class="quote">&gt;What other frame type do you expect an nsBlockFrame to be?  Is this
&gt;because of form controls?  If so, you need a comment.  However, this
&gt;seems like the wrong way to solve a form control problem, if that's
&gt;what it is.</span >
&gt;
Ah. Well, the thing is, I need to be sure that this frame is indeed a 
block frame, CSS box-model speaking. Form controls subclasses 
nsBlockFrame and don't override the Paint() so I need to do something to 
filter these and similar cases out.  I'll add a comment for now. What I 
really want is a &quot;isBlockFrame()&quot; member function, but no such function 
is avaible.

<span class="quote">&gt;(Any particular reason there were a very large number of blank lines
&gt;at the end of the patch?)
&gt;  </span >
&gt;

I only ran
    cvs diff -u [filenames] &gt;~/<a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - [TEXT] 'text-decoration' should not be drawn by children (underline) [INLINE]"
   href="/show_bug.cgi?id=1777">bug1777</a>-4.patch
Don't know why this should give a lot of blank lines... :-] But then, 
I'm no expert in this.

P.S: How do you guys quote each other in bugzilla? I used the composer, then
converted the message to plaintext by sending it to myself, and then copied this
to bugzilla... not exactly elegant :O)

P.P.S: I have the patch working for all the above testcases, URL and with
dbarons suggestions incorporated, except the issue with the painting layer. I'll
spare you the spam, though, but if anyone wants to see the patch, just tell me :)</pre></div><div class="change-set" id="c119"><div class="comment" data-id="1335800" data-no="119"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-119" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_21544" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/42c480cac44896ddf47ea1bc5ce03027?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_21544" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=21544" > <span class="fna">Håkan Waara</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-119"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-119" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c119">Comment 119</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-11 06:42 PDT" data-time="1021124569">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-119">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-119" data-comment-id="1335800"><span class="quote">&gt; How can I &quot;analyse&quot; why it was put in?</span >

Here's one way:  go to <a rel="nofollow" href="http://lxr.mozilla.org/seamonkey">http://lxr.mozilla.org/seamonkey</a>, find the file you are
interested in, open it, click on the &quot;CVS blame&quot; link at the top of the page.

Now you can go to any line of that file you are interested in, and see who
changed it last, what bug that change was part of a fix for etc.</pre></div><div class="change-set" id="c120"><div class="comment" data-id="1335869" data-no="120"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-120" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a107120874_30078"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-120"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-120" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c120">Comment 120</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-11 07:48 PDT" data-time="1021128482">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-120">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-120" data-comment-id="1335869"><span class="quote">&gt; Right you are. This may be a bigger problem, since pictures, forms and 
&gt; such are already drawn in the foreground, and I need to do it in a layer 
&gt; before this. Adding another layer seems a bit drastic, but currently I 
&gt; see no other way.... See also my comments at the top of this comment.</span >

I don't think you need a new layer, and I don't think this is a bug.  I think
you just should be consistent and allow children to paint over their ancestors'
text decorations by putting the painting of text decorations before PaintChildren.</pre></div><div class="change-set" id="c121"><div class="comment" data-id="1335891" data-no="121"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-121" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a107120874_30078"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-121"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-121" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c121">Comment 121</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-11 07:57 PDT" data-time="1021129025">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-121">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-121" data-comment-id="1335891">If aLineBoxAscent is the wrong number, then I think it should be fixed.  Do you
have a testcase where it does the wrong thing?  It should be giving the ascent
for the &quot;root inline box&quot;, i.e., the anonymous inline box that doesn't really
exist that wraps all the children of the block.</pre></div><div class="change-set" id="c122"><div class="comment" data-id="1336075" data-no="122"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-122" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a107120874_30078"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-122"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-122" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c122">Comment 122</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-11 09:48 PDT" data-time="1021135720">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-122">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-122" data-comment-id="1336075">I can't remember where I read this, but IIRC the paint order should be:

 ,-------------------.
 '-&gt; underline       |
     overline        |
     text            |
     children -------'
     line-through

I thought it was in the latest CSS3 Text Module draft but I can't find it there.

So:

   .outer { text-underline-color: red; text-line-through-color: green; }
   .inner { text-underline-color: green; text-line-through-color: red; }
   span { text-underline-style: solid; text-line-through-style: solid; }

   &lt;span class=&quot;outer&quot;&gt;&lt;span class=&quot;inner&quot;&gt;
     This should have green underline and green line-through.
   &lt;/span&gt;&lt;/span&gt;

Of course that is hard to test with the current patch since it only supports
CSS2 and not CSS3, but it should give you an idea as to how to best implement it
if it has to be easily extended to CSS3. (Not implementing CSS3 is fine, BTW.
The spec isn't even a last call draft, so we shouldn't be implementing it yet.
As far as I can tell this patch should make implementing CSS3's new properties a
lot easier when the spec is published, which is great.)</pre></div><div class="change-set" id="c123"><div class="comment" data-id="1336868" data-no="123"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-123" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-123"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-123" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c123">Comment 123</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-12 01:34 PDT" data-time="1021192454">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-123">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-123" data-comment-id="1336868">On the FONT quirk: Well, lxr+bugzilla is way cool 8-) dbaron, thanks for
pointing this out to me. Unfortunately, it didn't help me much. The relevant
lines were checked in for a performance bug; probably hyatt moved them from
somewhere else.... perhaps hyatt can remember from where or something? I do
remember reding somewhere that the PaintTextDecorations() in nsTextFrame was
coalescented from existing code. 

I also tried to query bugzilla, but I didn't find anything...

The relevant entry from lxr/CVS blame:

*1769 hyatt*      1.306     const nsStyleTextReset* styleText = 
1770                          (const
nsStyleTextReset*)context-&gt;GetStyleData(eStyleStruct_TextReset);
1771                        if (!useOverride &amp;&amp;
(NS_STYLE_TEXT_DECORATION_OVERRIDE_ALL &amp; styleText-&gt;mTextDecoration)) {
1772                          // This handles the &lt;a href=&quot;blah.html&quot;&gt;&lt;font
color=&quot;green&quot;&gt;La la la&lt;/font&gt;&lt;/a&gt; case.
1773                          // The link underline should be green.
1774                          const nsStyleColor* styleColor =
1775                            (const
nsStyleColor*)context-&gt;GetStyleData(eStyleStruct_Color);
1776                          useOverride = PR_TRUE;
1777                          overrideColor = styleColor-&gt;mColor;          
1778                        }
1779                    
</pre></div><div class="change-set" id="c124"><div class="comment" data-id="1336906" data-no="124"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-124" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-124"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-124" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c124">Comment 124</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-12 02:34 PDT" data-time="1021196080">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-124">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-124" data-comment-id="1336906">dbaron: you were right about the mLineAscent calculated is the right one... the
ascent was measured from the top of the containing block frame, and somehow, I
misintepreted this :-( Thanks for pointing this out to me. I've changed my patch
to reflect this. Also, since the patch stores the ascent of each line anyway,
I've removed aLineAscent from the parameter list of VerticalAlignLine, as any
function who calls VerticalAlignLine and needs aLineAscent might as well query
the nsLineBox directly. I've changed the one place VerticalAlignLine is called
to reflect this.

The other line issue, that is that the line-&gt;mBounds.x is always zero, even when
the origin of the first child frame is non-zero:
line-&gt;mBounds.x=0, firstChildOrigin.x=14638
This is from a test I ran. Is this a bug in nsLineBox? It sure does look like one...</pre></div><div class="change-set" id="c125"><div class="comment" data-id="1336914" data-no="125"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-125" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-125"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-125" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c125">Comment 125</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-12 02:49 PDT" data-time="1021196988">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-125">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-125" data-comment-id="1336914">Some further investigation regarding painting order:

According to the CCS2 specs, block frames should be painting /behind/ floats
which should be painted behind inline frames. See
<a rel="nofollow" href="http://bugzilla.mozilla.org/show_bug.cgi?id=36710">http://bugzilla.mozilla.org/show_bug.cgi?id=36710</a> Practically, this means that
some content (inline frames) are painted in the foreground layer, which, in
turn, means that textdecorations get painted behind these frames. This cannot be
the expected, or correct, behaviour?! This means, e.g., that strike-though is
painted behind any images in the flow...</pre></div><div class="change-set" id="c126"><div class="comment" data-id="1337055" data-no="126"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-126" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a107120874_30078"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-126"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-126" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c126">Comment 126</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-12 07:26 PDT" data-time="1021213567">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-126">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-126" data-comment-id="1337055">On searching LXR (Re <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - [TEXT] 'text-decoration' should not be drawn by children (underline) [INLINE]"
   href="/show_bug.cgi?id=1777#c123">comment 123</a>):  If you're looking at CVS blame for a file,
you can add, e.g., &quot;&amp;rev=1.32&quot; to the end of the URL to get blame for that
revision.  You can use this (and queries of bonsai, <a rel="nofollow" href="http://bonsai.mozilla.org/">http://bonsai.mozilla.org/</a> ,
to trace code that moved around).

On the line box (Re <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - [TEXT] 'text-decoration' should not be drawn by children (underline) [INLINE]"
   href="/show_bug.cgi?id=1777#c124">comment 124</a>): It might be better not to change what
nsLineBox::mBounds::x means, since a lot of complicated code has been written
around the current assumptions.  However, it really seems wrong that the x is
not the x that corresponds to the range of the width.  Perhaps leave your
current workaround and file a separate bug?

On the painting order (Re <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - [TEXT] 'text-decoration' should not be drawn by children (underline) [INLINE]"
   href="/show_bug.cgi?id=1777#c125">comment 125</a>):  Ian's <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - [TEXT] 'text-decoration' should not be drawn by children (underline) [INLINE]"
   href="/show_bug.cgi?id=1777#c122">comment 122</a> seems correct, so I
think you should call GetTextDecorations from the paint method and then call
PaintTextDecorations twice, with diffent parameters for which decorations to paint.

One more comment:  The |isBlock| check in the loop in GetTextDecorations really
isn't the right test.  You really want to pass in a boolean parameter |aIsBlock|
depending on who is calling the function, and if it's true, check the bits on
the style context and walk all the way up (except we might need a quirk for
tables to stop the walking in quirks mode).</pre></div><div class="change-set" id="c127"><div class="comment" data-id="1343058" data-no="127"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-127" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_20209" id="a107120874_30078"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_20209" id="a107120874_30078"><a class="email " href="/user_profile?user_id=20209" > <span class="fna">Boris Zbarsky [:bzbarsky]</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-127"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-127" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c127">Comment 127</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-15 00:26 PDT" data-time="1021447591">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-127">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-127" data-comment-id="1343058">*** <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED DUPLICATE - Bad alignment on underlined words"
   href="/show_bug.cgi?id=144596">Bug 144596</a> has been marked as a duplicate of this bug. ***</pre></div><div class="change-set" id="c128"><div class="comment" data-id="1348644" data-no="128"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-128" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-128"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-128" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c128">Comment 128</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-17 14:48 PDT" data-time="1021672138">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-128">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-128" data-comment-id="1348644">OK, I *think* I've made it all work :) Tomorrow I'll clean up the code and
submit another patch. However, in order to make form controls work, I've had to
specialcase them, and I'm somewhat unhappy with this. However, since the buttom
of a tree containing a form control looks something like this:

scrollFrame
 textInputFrame  &lt;--- the text-decorations are here
  scrollFrame
   AreaFrame     &lt;--- the lines, and consequently, the text, are here.

I need to use a fairly tight criterium to detect a possible situation like this,
and then walk up the tree to find (if) there is a textInputFrame above 
the AreaFrame in the tree. From this textInputFrame I need to pull the
textdecorations. The criterium I use is that the frame must be an areaFrame with
NS_FRAME_HAS_VIEW state, view the styleContext having the HasTextDecoration
property.

This specialcasing raises another issue: I would want this kind of logic in the
GetTextDecoration function; otherwise I'll either need to encumber nsBlockFrame
with another helpermethod or make nsBlockFrame::Paint() longer than I would
like. This means that dbarons suggestion in <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - [TEXT] 'text-decoration' should not be drawn by children (underline) [INLINE]"
   href="/show_bug.cgi?id=1777#c126">comment 126</a> about the aIsBlock will
have to be replaced with a logic based on the current frameType. I'll try to
come up with something reasonable, and then you can pick it apart :o)

On this node: Can somebody create a point to a reasonable complex form testcase
with text-decorations? I'm really quite unfamiliar with forms, so I'm not too
sure I've covered all eventualities. Some table testcases would be neat, too.

Re <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - [TEXT] 'text-decoration' should not be drawn by children (underline) [INLINE]"
   href="/show_bug.cgi?id=1777#c126">comment 126</a> and others: I've implemented Ian suggestion. I'll file a bug
regarding the nsLineBox tomorrow. 
I'm unable to find anything on hyatt's code regarding the FONT quirk excepting
the checkin comment to 1.306 of nsTextFrame.cpp stating &quot;rule matching
improvements&quot;. This seems to part of a rather large checkin, but scanning this
has given me no new insights. But given the size, I might easily have missed
something. This is the complete checkin, should anyone care :) 
<a rel="nofollow" href="http://bonsai.mozilla.org/cvsquery.cgi?treeid=default&amp;module=SeaMonkeyAll&amp;branch=HEAD&amp;branchtype=match&amp;dir=&amp;file=&amp;filetype=match&amp;who=hyatt.*&amp;whotype=regexp&amp;sortby=Date&amp;hours=2&amp;date=explicit&amp;mindate=05%2F31%2F2001+15%3A00&amp;maxdate=05%2F31%2F2001+16%3A00&amp;cvsroot=%2Fcvsrootcheck-in">http://bonsai.mozilla.org/cvsquery.cgi?treeid=default&amp;module=SeaMonkeyAll&amp;branch=HEAD&amp;branchtype=match&amp;dir=&amp;file=&amp;filetype=match&amp;who=hyatt.*&amp;whotype=regexp&amp;sortby=Date&amp;hours=2&amp;date=explicit&amp;mindate=05%2F31%2F2001+15%3A00&amp;maxdate=05%2F31%2F2001+16%3A00&amp;cvsroot=%2Fcvsrootcheck-in</a>,


That was my 5€. Now I need some sleep, and tomorrow I'll create a new &quot;final&quot;
version of the patch. I'll also attach the a testcase not represented above
regarding nested text-decorations and block frames.

P.S: One thing mystified me about forms: in the form control testcase above
<a rel="nofollow" href="http://bugzilla.mozilla.org/attachment.cgi?id=81295&amp;action=view">http://bugzilla.mozilla.org/attachment.cgi?id=81295&amp;action=view</a>
the entire tree rendering the form has display property set to block. Shouldn't
this property be inline?! If not, then form controls are invalid in &lt;P&gt;&lt;/P&gt;
tags, I suppose.</pre></div><div class="change-set" id="c129"><div class="comment" data-id="1348764" data-no="129"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-129" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_5038" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/e1cadeaaf04bd425d597a571ffe0f522?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_5038" id="a107120874_30078"><a class="email " href="/user_profile?user_id=5038" > <span class="fna">Robert O'Callahan (:roc) (email my personal email if necessary)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-129"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-129" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c129">Comment 129</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-17 15:46 PDT" data-time="1021675617">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-129">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-129" data-comment-id="1348764"><span class="quote">&gt; The criterium I use is that the frame must be an areaFrame with
&gt; NS_FRAME_HAS_VIEW state</span >

Don't do that; there are many ways a frame can have that state set.

<span class="quote">&gt; Can somebody create a point to a reasonable complex form testcase
&gt; with text-decorations?</span >

Debug | Viewer Demos | #5 More Styles</pre></div><div class="change-set" id="c130"><div class="comment" data-id="1349818" data-no="130"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-130" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-130"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-130" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c130">Comment 130</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-18 13:28 PDT" data-time="1021753686">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-130">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-84174"
         class="attachment"
         data-id="84174" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="test3.html">
      <meta itemprop="contentSize" content="1253">
      <meta itemprop="encodingFormat" content="text/html">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=84174" itemprop="contentUrl">
        <span id="att-84174-description" itemprop="description">Testcase covering issues from comment 122 and comment 83</span></a>
        — <a href="attachment.cgi?id=84174&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div></div><div class="change-set" id="c131"><div class="comment" data-id="1349826" data-no="131"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-131" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-131"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-131" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c131">Comment 131</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-18 13:34 PDT" data-time="1021754099">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-131">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-131" data-comment-id="1349826">Robert O'Callahan: Don't worry about the NS_FRAME_HAS_VIEW, it's only used as (a
part of) a neccessary criterium, not to determine when to draw text-decorations.
Regarding the viewer demo: I've no idea if it should look like this. It look
reasonable, but whether the rendering is 100% correct, I really don't know. It
is, IMHO, better than the current rendering.</pre></div><div class="change-set" id="c132"><div class="comment" data-id="1349833" data-no="132"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-132" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-132"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-132" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c132">Comment 132</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-18 13:48 PDT" data-time="1021754888">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-132">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-84175"
         class="attachment patch obsolete"
         data-id="84175" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1777.patch">
      <meta itemprop="contentSize" content="17784">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=84175">
          <a class="link" href="attachment.cgi?id=84175&amp;action=diff">
        <span id="att-84175-description" itemprop="description">Take 5:Final., unless otherwise proven. </span></a> (obsolete)
        — <a href="attachment.cgi?id=84175&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=84175">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-132" data-comment-id="1349833">I've implemented the suggestions from David Baron and Ian Hixie. This patch
correctly renders all the testcases in this bug. I've also watched choffman's
international browser bust for some time without encountering anything
untoward. See my comments above for implementation details.

What I havn't done is make any performance regression checks; I couldn't figure
out how to do this. However, I don't see anything in the patch that should
cause much worse performance than today, except perhaps if a frame with
text-decorations have a large subtree without any text-frames.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=83043&amp;action=edit"
           title="Take 4. This patch is final (until otherwise proven :o) )"
           class=""
        >Attachment #83043</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c133"><div class="comment" data-id="1349897" data-no="133"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-133" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a107120874_30078"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-133"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-133" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c133">Comment 133</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-18 14:40 PDT" data-time="1021758002">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-133">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-133" data-comment-id="1349897">Robert's <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - [TEXT] 'text-decoration' should not be drawn by children (underline) [INLINE]"
   href="/show_bug.cgi?id=1777#c129">comment 129</a> is correct in that you should not be checking whether a
frame has a view for something like this.

I haven't had a chance to look at the patch yet.</pre></div><div class="change-set" id="c134"><div class="comment" data-id="1350213" data-no="134"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-134" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-134"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-134" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c134">Comment 134</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-19 00:26 PDT" data-time="1021793187">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-134">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-134" data-comment-id="1350213">Re: NS_FRAME_HAS_VIEW. I added the check for performance reasons, so it's not
essential. But why not use it? Is the statement

AreaFrame is part of a frame control =&gt; NS_FRAME_HAS_VIEW is set

false? It seemed to be true judging from the code, and also from my
understanding. Is it something else? Note, I'm not interested in the opposite
implication (which, as pointed out, is false), only left to right.

</pre></div><div class="change-set" id="c135"><div class="comment" data-id="1351085" data-no="135"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-135" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a107120874_30078"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-135"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-135" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c135">Comment 135</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-20 08:59 PDT" data-time="1021910350">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-135">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-135" data-comment-id="1351085">What exactly is &quot;the form control problem&quot;? (i.e. what behaviour are you trying 
to implement and what is the problem you run into?) I couldn't find a 
description above, although I may have just missed it (feel free to just point 
me to a previous comment :-) ).</pre></div><div class="change-set" id="c136"><div class="comment" data-id="1351563" data-no="136"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-136" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-136"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-136" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c136">Comment 136</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-20 12:17 PDT" data-time="1021922228">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-136">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-136" data-comment-id="1351563">I've detailed the problem at the top of <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - [TEXT] 'text-decoration' should not be drawn by children (underline) [INLINE]"
   href="/show_bug.cgi?id=1777#c128">comment 128</a>. Basically, the problem is
to detect the text form controls, as the style information is associated further
up the tree than the actual line which contain the text-frames.</pre></div><div class="change-set" id="c137"><div class="comment" data-id="1351806" data-no="137"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-137" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a107120874_30078"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-137"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-137" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c137">Comment 137</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-20 14:08 PDT" data-time="1021928919">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-137">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-137" data-comment-id="1351806">No, I mean, what is the problem. You say &quot;in order to make form controls work&quot;
but, what do you call &quot;work&quot;, and what doesn't &quot;work&quot; about them without any
special coding?</pre></div><div class="change-set" id="c138"><div class="comment" data-id="1353345" data-no="138"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-138" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-138"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-138" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c138">Comment 138</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-21 09:38 PDT" data-time="1021999126">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-138">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-138" data-comment-id="1353345">Sorry. Without special coding the textdecoration are drawn on all form controls
which have any text-decorated parents, as the form controls report themselves as
display: block even though they are inline. If I force them to be
display:inline, no text-decorations are drawn, as the text-decoration reside
further up the tree. To draw...

text-decorated frame
  [...]
    textInputFrame, where any text-decoraton style info reside
     ^[...]
     |   areaFrame, where the lines to be text-decorated reside.
     +--------+
       where text-decotaion should be fetched from (only)

Simply having the text form controls report the display property as inline would
help to make the special case cleaner, BTW. </pre></div><div class="change-set" id="c139"><div class="comment" data-id="1354031" data-no="139"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-139" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a107120874_30078"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-139"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-139" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c139">Comment 139</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-21 14:34 PDT" data-time="1022016848">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-139">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-139" data-comment-id="1354031"><span class="quote">&gt; Without special coding the textdecoration are drawn on all form controls
&gt; which have any text-decorated parents</span >

...and why is that a problem?


Form controls should be display: -moz-inline-box or inline-block or something
like that. If they are contained within underlined text, the underline should go
under the form controls. If they are contained within line-through text, they
should be struck out:

      
   _( )__Underlined_Radio_Button_And_Label._

   ...
   :-: Unchecked checkbox with dotted border and line-through text decoration.
   '''
  ___________________________________
  Edit box with overline: [         ]

Note how the radio button overlaps the underlining, the line-through goes over
the checkbox, and the overline would go under the text box except that (in this
case) the textbox is smaller.

Now, take this case:

   &lt;p&gt; abc &lt;textarea&gt; def &lt;/textarea&gt; ghi &lt;/p&gt;

...which might look like this:

       ,---------------.
       | def           |
   abc |               | ghi
       `---------------'

...would change, if you added these styles:

   p { text-decoration: underline; }
   textarea { text-decoration: overline; }

...so that there would be a single underline from abc to ghi, and the text def
would be struck out. The def text would not be underlined though.

Note that this has nothing to do with special casing form elements. A normal
block, inline-block, table, inline-table, or xul element in an inline element
all have exactly the same effect.

See also the recently published <a rel="nofollow" href="http://www.w3.org/TR/css3-text/#text-decoration">http://www.w3.org/TR/css3-text/#text-decoration</a></pre></div><div class="change-set" id="c140"><div class="comment" data-id="1354118" data-no="140"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-140" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a107120874_30078"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-140"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-140" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c140">Comment 140</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-21 14:57 PDT" data-time="1022018234">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-140">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-140" data-comment-id="1354118">It is, however, a bug if we paint an *additional* text decoration inside form
controls, which I presume is what's happening (since we have an anonymous div
inside of textarea and input type=text).</pre></div><div class="change-set" id="c141"><div class="comment" data-id="1354380" data-no="141"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-141" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a107120874_30078"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-141"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-141" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c141">Comment 141</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-21 16:34 PDT" data-time="1022024098">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-141">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-141" data-comment-id="1354380">Right. Similarly, a block within an underlined inline element should not be
underlined. (Right? That's what the draft says. Is it what I said above? No,
it's not. Bummer. Ok, how do we handle this...)</pre></div><div class="change-set" id="c142"><div class="comment" data-id="1354400" data-no="142"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-142" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a107120874_30078"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-142"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-142" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c142">Comment 142</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-21 16:42 PDT" data-time="1022024537">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-142">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-142" data-comment-id="1354400">Oh, if that's true, then it's easy -- for a block, only walk up as long as the
parent is a block.</pre></div><div class="change-set" id="c143"><div class="comment" data-id="1354519" data-no="143"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-143" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a107120874_30078"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-143"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-143" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c143">Comment 143</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-21 17:45 PDT" data-time="1022028341">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-143">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-143" data-comment-id="1354519">From the draft:

: If they are specified for a block-level element, it affects the root inline 
: element (the anonymous inline element which wraps all the inline children of 
: the block element).
:
: If they are specified for (or affects) an inline-level element, it affects all 
: boxes generated by the element.

That seems to me to back what dbaron just said in <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - [TEXT] 'text-decoration' should not be drawn by children (underline) [INLINE]"
   href="/show_bug.cgi?id=1777#c142">comment 142</a>. Which is fine. It
makes it easy to implement. I'm not entirely sure if it's what authors expect
though. Maybe we should take this back to the WG.</pre></div><div class="change-set" id="c144"><div class="comment" data-id="1355577" data-no="144"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-144" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-144"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-144" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c144">Comment 144</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-22 10:32 PDT" data-time="1022088736">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-144">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-144" data-comment-id="1355577">Walking up until the parent isn't a block frame anymore is what I always wanted
to do ( ;-) ) Unfortunately, this doesn't solve my problem, since the frame
where the text-decoration for a form control would reside, is INLINE, as it
should be, BTW. (You can disregard my writing about the frame being having
display: block as a tired man's blunderings :-[ ) So in this case, the above
stategy will never yield a text-decoration. To avoid confusion, I'm talking
about text-decoration specified for the form control, not for the surrounding
context (which works fine.) I suppose this is due to an INLINE frame being
expanded to an inline frame containing several box-frames which contain the
context. If this happens in other other circumstances, maybe a general strategy
for this situaiton could be developed. The strategy could be to walk up the tree
until the _current_ frame is an inline frame, thus including this frame's
text-decoration in the result.(is IFRAME such a situation?)

Ian Hixie: The textInputFrame has display=NS_STYLE_DISPLAY_INLINE, while the
children have display=NS_STYLE_DISPLAY_BLOCK.</pre></div><div class="change-set" id="c145"><div class="comment" data-id="1361287" data-no="145"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-145" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-145"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-145" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c145">Comment 145</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-25 00:15 PDT" data-time="1022310940">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-145">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-85015"
         class="attachment patch obsolete"
         data-id="85015" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1777-6.patch">
      <meta itemprop="contentSize" content="25003">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=85015">
          <a class="link" href="attachment.cgi?id=85015&amp;action=diff">
        <span id="att-85015-description" itemprop="description">Take 6. Redesign to walk up only to first inline frame.</span></a> (obsolete)
        — <a href="attachment.cgi?id=85015&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=85015">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-145" data-comment-id="1361287">Besides changing the code to walk up only to the first inline frame only, I've
redone GetTextDecorations to walk up the frame tree, rather than the
styleContext tree. This enabled me to do the textInputFrame special case in a
much more canonical way, without relying on any &quot;neccessary, but not
sufficient&quot; criteria. 

I've discovered something that doesn't work as espected: scroll frames are not
slashed through with text-decoration: line-through, see e.g. Viewer Demo 5. But
as this is IMHO a bordercase, and as this would probably be difficult to fix, I
would like to open a separate bug on this. My patch doesn't change the current
behaviour in this regard, and so I would rather fix the 99% cases.

Hope this patch is acceptable :-) It really does improve the text-decoration
handling, and I believe that my code and the code I stole should now be in
alignment of it's context.

Oh, one final thing: The bug about lineBox.mBounds.x=0 thing mentioned above
has been marked INVALID, with no explanation outside &quot;lineBox doesn't work like
this.&quot; I've asked for a more detailed explanation, but that seems to be it.</pre></div><div class="change-set" id="c146"><div class="comment" data-id="1361303" data-no="146"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-146" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-146"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-146" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c146">Comment 146</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-25 00:48 PDT" data-time="1022312928">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-146">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-85019"
         class="attachment patch obsolete"
         data-id="85019" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1777-6.patch">
      <meta itemprop="contentSize" content="25003">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=85019">
          <a class="link" href="attachment.cgi?id=85019&amp;action=diff">
        <span id="att-85019-description" itemprop="description">Take 6. Redesign to walk up only to first inline frame.</span></a> (obsolete)
        — <a href="attachment.cgi?id=85019&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=85019">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-146" data-comment-id="1361303">Besides changing the code to walk up only to the first inline frame only, I've
redone GetTextDecorations to walk up the frame tree, rather than the
styleContext tree. This enabled me to do the textInputFrame special case in a
much more canonical way, without relying on any &quot;neccessary, but not
sufficient&quot; criteria. 

I've discovered something that doesn't work as espected: scroll frames are not
slashed through with text-decoration: line-through, see e.g. Viewer Demo 5. But
as this is IMHO a bordercase, and as this would probably be difficult to fix, I
would like to open a separate bug on this. My patch doesn't change the current
behaviour in this regard, and so I would rather fix the 99% cases.

Hope this patch is acceptable :-) It really does improve the text-decoration
handling, and I believe that my code and the code I stole should now be in
alignment of it's context.

Oh, one final thing: The bug about lineBox.mBounds.x=0 thing mentioned above
has been marked INVALID, with no explanation outside &quot;lineBox doesn't work like
this.&quot; I've asked for a more detailed explanation, but that seems to be it.</pre></div><div class="change-set" id="c147"><div class="comment" data-id="1361750" data-no="147"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-147" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-147"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-147" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c147">Comment 147</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-25 11:26 PDT" data-time="1022351200">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-147">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-147" data-comment-id="1361750">This page breaks with my patch:

<a rel="nofollow" href="http://velvet.net/~fun/mozilla/faq-1.0rc2.xml">http://velvet.net/~fun/mozilla/faq-1.0rc2.xml</a> 

The underline of the &quot;Back to top&quot; links are not below. I will investigate
tomorrow or tonight, perhaps.</pre></div><div class="change-set" id="c148"><div class="comment" data-id="1370722" data-no="148"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-148" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-148"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-148" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c148">Comment 148</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-05-30 11:15 PDT" data-time="1022782517">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-148">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-85627"
         class="attachment patch obsolete"
         data-id="85627" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1777-7.patch">
      <meta itemprop="contentSize" content="25119">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=85627">
          <a class="link" href="attachment.cgi?id=85627&amp;action=diff">
        <span id="att-85627-description" itemprop="description">Take 7: Now handles padding and borders in inline frames correctly</span></a> (obsolete)
        — <a href="attachment.cgi?id=85627&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=85627">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-148" data-comment-id="1370722">The bug turned out to be that I had forgotten about padding and border. Shame
on me. The new patch fixes this. The patch is IMO ready for review, if anybody
can spare the time. 
If somebody can supply an test case of the more exotic cases, like inline
tables, this would be great, too.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=84175&amp;action=edit"
           title="Take 5:Final., unless otherwise proven. "
           class=""
        >Attachment #84175</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=85015&amp;action=edit"
           title="Take 6. Redesign to walk up only to first inline frame."
           class=""
        >Attachment #85015</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=85019&amp;action=edit"
           title="Take 6. Redesign to walk up only to first inline frame."
           class=""
        >Attachment #85019</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c149"><div class="comment" data-id="1386279" data-no="149"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-149" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a107120874_30078"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-149"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-149" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c149">Comment 149</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-06-07 13:40 PDT" data-time="1023482436">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-149">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-149" data-comment-id="1386279">That patch doesn't build for me on Linux, CVS tip:

nsBlockFrame.cpp:5456: no `void nsBlockFrame::PaintTextDecorationLines 
(nsIRenderingContext &amp;, unsigned int, int, int, int)' member function 
declared in class `nsBlockFrame'
make[1]: *** [nsBlockFrame.o] Error 1
make[1]: Leaving directory `/home/ianh/Mozilla/opt/mozilla/layout/html/base/src'
make: *** [all] Error 2</pre></div><div class="change-set" id="c150"><div class="comment" data-id="1387374" data-no="150"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-150" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-150"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-150" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c150">Comment 150</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-06-08 01:29 PDT" data-time="1023524985">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-150">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-150" data-comment-id="1387374">Ian: I'm sorry, but I'm unable to either understand or reproduce it. The unfound
function declaration reside in nsBlockFrame.h, which is included at the very
buttom of the patch:

+  virtual void PaintTextDecorationLines(nsIRenderingContext&amp; aRenderingContext,
+                                        nscolor color,
+                                        nscoord offset,
+                                        nscoord ascent,
+                                        nscoord size);

I've just tried to make a new, clean build of mozilla and apply the patch, and
it works perfectly. This is in Linux (SuSE 7.2). This is very frustrating, and
unfortunately, cross-platform is a weak point for me (part of why I wanted to
get involved in hacking mozilla in the first place.)

Could I impose on you to check if this function declaration is actually in your
patched version of nsBlockFrame.h? (in mozilla/layout/html/base/src, though you
probably knew that.) If it is, could you post it here or send it to me together
with the actual function call? If it isn't, could you try to apply the patch
again? I'll make a new patch, too, in case this bug is due to the patch being
old to be applied.</pre></div><div class="change-set" id="c151"><div class="comment" data-id="1387380" data-no="151"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-151" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-151"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-151" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c151">Comment 151</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-06-08 01:34 PDT" data-time="1023525299">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-151">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-86924"
         class="attachment patch obsolete"
         data-id="86924" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1777-7a.patch">
      <meta itemprop="contentSize" content="24522">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=86924">
          <a class="link" href="attachment.cgi?id=86924&amp;action=diff">
        <span id="att-86924-description" itemprop="description">Same as take 7, but from a newer build (2002-06-08)</span></a> (obsolete)
        — <a href="attachment.cgi?id=86924&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=86924">Splinter Review</a>
      </div>
    </div></div><div class="change-set" id="c152"><div class="comment" data-id="1387532" data-no="152"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-152" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a107120874_30078"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-152"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-152" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c152">Comment 152</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-06-08 05:34 PDT" data-time="1023539690">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-152">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-152" data-comment-id="1387532">I see the problem. The declaration is hidden inside an |#ifdef DEBUG| section,
and I'm building an optimised build.</pre></div><div class="change-set" id="c153"><div class="comment" data-id="1387538" data-no="153"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-153" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a107120874_30078"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-153"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-153" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c153">Comment 153</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-06-08 05:40 PDT" data-time="1023540012">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-153">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-153" data-comment-id="1387538">Now I get a different error (below). I suggest getting a new tree, applying the
patch, and trying to compile it as an optimised build. :-)


nsBlockFrame.cpp: In method `nsresult nsBlockFrame::PlaceLine 
(nsBlockReflowState &amp;, nsLineLayout &amp;, nsLineList_iterator, PRBool *, 
int)':
nsBlockFrame.cpp:4073: no matching function for call to 
`nsLineLayout::VerticalAlignLine (nsLineList_iterator &amp;, nsSize &amp;)'
nsLineLayout.h:117: candidates are: void 
nsLineLayout::VerticalAlignLine (nsLineBox *, nsSize &amp;, int &amp;)
make[4]: *** [nsBlockFrame.o] Error 1
make[4]: Leaving directory `/home/ianh/Mozilla/opt/mozilla/layout/html/base/src'
</pre></div><div class="change-set" id="c154"><div class="comment" data-id="1387908" data-no="154"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-154" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-154"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-154" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c154">Comment 154</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-06-08 11:01 PDT" data-time="1023559288">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-154">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-86952"
         class="attachment patch obsolete"
         data-id="86952" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1777-7b.patch">
      <meta itemprop="contentSize" content="13920">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=86952">
          <a class="link" href="attachment.cgi?id=86952&amp;action=diff">
        <span id="att-86952-description" itemprop="description">The same patch as 86924 above, but with the missing file (nsLineLayout.h)</span></a> (obsolete)
        — <a href="attachment.cgi?id=86952&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=86952">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-154" data-comment-id="1387908">The optimized build works now. Turned out I was a shade too hasty when
rebuilding the patch, and forgot a file :-(((
This time I've: Wiped a build dir. Fetched mozilla. Patched mozilla. Build with
debug. &quot;make -f client.mk clean&quot;. Build with optimization (-O) and without
debug. Both worked. So now I hope it works, this time. I'll add this procedure
to my future &quot;final&quot; patches :-)</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=85627&amp;action=edit"
           title="Take 7: Now handles padding and borders in inline frames correctly"
           class=""
        >Attachment #85627</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=86924&amp;action=edit"
           title="Same as take 7, but from a newer build (2002-06-08)"
           class=""
        >Attachment #86924</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c155"><div class="comment" data-id="1388352" data-no="155"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-155" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a107120874_30078"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-155"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-155" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c155">Comment 155</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-06-08 16:20 PDT" data-time="1023578438">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-155">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-155" data-comment-id="1388352">My optimised build will build, but it won't run... I get this error:

  nsNativeComponentLoader: GetFactory(/home/ianh/Mozilla/opt/mozilla/dist/bin/com
  ponents/libgklayout.so) Load FAILED with error: /home/ianh/Mozilla/opt/mozilla/
  dist/bin/components/libgklayout.so: undefined symbol: PaintTextDecorationLines_
  _20nsHTMLContainerFrameR19nsIRenderingContextUiiii

I tried a complete clobber and rebuild, it didn't help. I'll attach my
mozconfig, which may be the cause of the trouble.</pre></div><div class="change-set" id="c156"><div class="comment" data-id="1388355" data-no="156"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-156" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a107120874_30078"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-156"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-156" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c156">Comment 156</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-06-08 16:22 PDT" data-time="1023578550">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-156">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-86964"
         class="attachment"
         data-id="86964" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="mozconfig">
      <meta itemprop="contentSize" content="878">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=86964" itemprop="contentUrl">
        <span id="att-86964-description" itemprop="description">Hixie's mozconfig, with which the last patch doesn't run</span></a>
        — <a href="attachment.cgi?id=86964&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div></div><div class="change-set" id="c157"><div class="comment" data-id="1388763" data-no="157"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-157" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-157"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-157" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c157">Comment 157</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-06-09 00:03 PDT" data-time="1023606194">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-157">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-86988"
         class="attachment patch obsolete"
         data-id="86988" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1777-7c.patch">
      <meta itemprop="contentSize" content="25371">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=86988">
          <a class="link" href="attachment.cgi?id=86988&amp;action=diff">
        <span id="att-86988-description" itemprop="description">As above, but now it compiles AND runs in optimized builds</span></a> (obsolete)
        — <a href="attachment.cgi?id=86988&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=86988">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-157" data-comment-id="1388763">It is not Hixie fault, it's mine, again :-( Somehow, I managed to enter the
nsHTMLContainerFrame.h twice; and stupid me didn't think to test this far. I've
done a complete rebuild to see that it all works, including a few testcases,
using Hixies .mozconfig. I'm sorry to have caused all that bother for nothing.
Note: The patch is pulled from my old tree again. Put it worked find on a CVS
pull from yesterday.

P.S: Mozilla really flies with that .mozconfig, doesn't it?</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=86952&amp;action=edit"
           title="The same patch as 86924 above, but with the missing file (nsLineLayout.h)"
           class=""
        >Attachment #86952</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c158"><div class="comment" data-id="1388946" data-no="158"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-158" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a107120874_30078"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-158"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-158" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c158">Comment 158</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-06-09 04:39 PDT" data-time="1023622742">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-158">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-158" data-comment-id="1388946">Yup, why d'you think I use it? :-)

I'm building now.</pre></div><div class="change-set" id="c159"><div class="comment" data-id="1388961" data-no="159"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-159" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a107120874_30078"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-159"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-159" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c159">Comment 159</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-06-09 05:06 PDT" data-time="1023624377">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-159">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-159" data-comment-id="1388961">Well, it seems to do well on several pages. However, it crashes on my main
testcase: <a rel="nofollow" href="http://www.bath.ac.uk/%7Epy8ieh/internet/eviltests/underline.html">http://www.bath.ac.uk/%7Epy8ieh/internet/eviltests/underline.html</a>
As well as on this bug: <a rel="nofollow" href="http://bugzilla.mozilla.org/show_bug.cgi?id=1777">http://bugzilla.mozilla.org/show_bug.cgi?id=1777</a>

Other than that, it looks sweet. The form control handling in particular looks
very nice, and the painting order seems to be correct.</pre></div><div class="change-set" id="c160"><div class="comment" data-id="1388970" data-no="160"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-160" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-160"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-160" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c160">Comment 160</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-06-09 05:21 PDT" data-time="1023625260">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-160">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-160" data-comment-id="1388970">Strange. I'm looking at these two pages now with a build from (too) early this
morning, and no crash (obviously.) I'll do a CVS update and see if that, erhm, 
helps. I do hope I can reproduce this... Crashing, that's BAD. 

Could you also take a look at viewer demos #5 and tell me what you think?

We should write that .mozconfig with huge letters somewhere :-D I wonder what
options the milestones are built with.</pre></div><div class="change-set" id="c161"><div class="comment" data-id="1388988" data-no="161"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-161" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-161"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-161" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c161">Comment 161</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-06-09 05:40 PDT" data-time="1023626432">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-161">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-161" data-comment-id="1388988">No luck :-( Both pages show up nice and stunningly fast. Even bugzilla flies
Sunday afternoon :-)
Any ideas?</pre></div><div class="change-set" id="c162"><div class="comment" data-id="1389007" data-no="162"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-162" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a107120874_30078"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-162"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-162" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c162">Comment 162</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-06-09 06:00 PDT" data-time="1023627624">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-162">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-162" data-comment-id="1389007">Hmm. I can't get either to crash in my debug build. Trying again with my opt
build. BTW, I see no unexpected problems with Viewer #5 nor with my underlining
evil test. I love it. :-)</pre></div><div class="change-set" id="c163"><div class="comment" data-id="1389028" data-no="163"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-163" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a107120874_30078"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-163"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-163" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c163">Comment 163</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-06-09 06:13 PDT" data-time="1023628436">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-163">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-163" data-comment-id="1389028">It's not crashing in my opt build either now. I assume I made some stupid
mistake while building it the first time. Sorry about the false alarm!

Alright, qa=hixie on the patch. :-)

I'll run with it to see if I see any problems.</pre></div><div class="change-set" id="c164"><div class="comment" data-id="1389747" data-no="164"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-164" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-164"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-164" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c164">Comment 164</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-06-09 13:46 PDT" data-time="1023655579">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-164">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-164" data-comment-id="1389747">Found this keyword :o)
BTW: The cvs-build is quite bugridden at the moment, I get some random crashes.
I even got paranoid to make a clean, optimized build, and it's the same. (I got
one reproducible, and filed it as a bug.)
Thanks to all of you have helped me stumble along this first patch :-) It's been
a real experience :-)</pre><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=review&amp;resolution=---">review</a></div></div></div><div class="change-set" id="c165"><div class="comment" data-id="1390556" data-no="165"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-165" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a107120874_30078"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-165"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-165" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c165">Comment 165</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-06-10 05:22 PDT" data-time="1023711728">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-165">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-165" data-comment-id="1390556">Is the crash on <a rel="nofollow" href="http://off.net/~shaver/diary/">http://off.net/~shaver/diary/</a> related to this patch?</pre></div><div class="change-set" id="c166"><div class="comment" data-id="1390637" data-no="166"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-166" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_31357" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/bf1bcc6bb5ae141ffc17e081ae099287?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_31357" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=31357" > <span class="fna">Christian Eyrich</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-166"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-166" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c166">Comment 166</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-06-10 06:38 PDT" data-time="1023716284">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-166">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-166" data-comment-id="1390637">No, I don't think so since my nightly 2002060808 without the patch also crashes.</pre></div><div class="change-set" id="c167"><div class="comment" data-id="1393207" data-no="167"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-167" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a107120874_30078"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-167"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-167" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c167">Comment 167</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-06-11 13:14 PDT" data-time="1023826486">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-167">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-167" data-comment-id="1393207">*** <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED DUPLICATE - CSS"
   href="/show_bug.cgi?id=150949">Bug 150949</a> has been marked as a duplicate of this bug. ***</pre></div><div class="change-set" id="c168"><div class="comment" data-id="1393220" data-no="168"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-168" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a107120874_30078"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-168"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-168" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c168">Comment 168</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-06-11 13:23 PDT" data-time="1023826986">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-168">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-168" data-comment-id="1393220">I found a few bugs, but I haven't checked if they are specific to this patch or
not yet. Here are a couple of test cases that fail:

   <a rel="nofollow" href="http://www.hixie.ch/tests/adhoc/compat/fonts/002.html">http://www.hixie.ch/tests/adhoc/compat/fonts/002.html</a>
   <a rel="nofollow" href="http://www.hixie.ch/tests/adhoc/compat/fonts/003.html">http://www.hixie.ch/tests/adhoc/compat/fonts/003.html</a>

(The first spotted on theonion.org's &quot;feature&quot; sidebar, the second seen in
various places, such as on satirewire.com's links on the left hand side.)</pre></div><div class="change-set" id="c169"><div class="comment" data-id="1393233" data-no="169"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-169" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a107120874_30078"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-169"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-169" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c169">Comment 169</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-06-11 13:31 PDT" data-time="1023827461">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-169">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-169" data-comment-id="1393233">Well, neither bug occurs on the 1.0 branch, so I'm going to guess both are
caused by this bug's patch. These bugs are, in my opinion, serious enough (in
the first case) and common enough (in the second) to require further work before
we check this patch in.

Both are caused by our having to support compatability renderings. If only we
could junk quirks mode altogether... :-(</pre></div><div class="change-set" id="c170"><div class="comment" data-id="1395008" data-no="170"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-170" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-170"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-170" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c170">Comment 170</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-06-12 10:15 PDT" data-time="1023902144">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-170">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-170" data-comment-id="1395008">First, from the standard on the FONT (to see what we're supposed to do in
standardsmode):

<a rel="nofollow" href="http://www.w3.org/TR/html401/present/graphics.html#edef-FONT">http://www.w3.org/TR/html401/present/graphics.html#edef-FONT</a>
 &quot;The FONT element changes the font size and color for text in its contents.&quot; 

Text decorations aren't mentioned here, so in standards mode, at least, the
text-decoration should hold true to the containing &lt;A&gt; block. 

I see 3 problems with my patch in your textcases:

1) The text-decorations in constructions like &lt;A&gt;&lt;FONT size=&quot;1&quot;&gt;Blah
blah&lt;/FONT&gt;&lt;/A&gt; are drawn twice, and may not overlap. I believe that the right
solution for this would be to either 
   a) REVERT to the old behaviour for quirksmode,  and only use my code (without
 the FONT-quirk) with standards mode.
   b) Drop the quirk behaviour, that is, not handle FONT specially.

2) The text-decoration is much too heavy for the font. Solution for b) would
reduce this to the &quot;normal font-sized&quot; underlining, which is IMHO the correct,
but not quirklike, behaviour. Solution a) would give the size=1 underline weight
in quirksmode and behave like b) in standardsmode.

3) The underlining is off. This shouldn't happen; but it does even with the FONT
code turned off. I'll try to fix it one of these days. 

Some more thoughts:

What should happen in cases like this?
&lt;A href=&quot;#top&quot;&gt;Some people &lt;font size=&quot;1&quot;&gt;like different&lt;/font&gt; sized fonts
&lt;font size=&quot;1&gt; in their links&lt;/font&gt;&lt;/A&gt;
1a) and 1b) gives quite different results here. I'm not sure what's supposed to
happen.

That said, there's something awfully wrong with the line-height on that last
line; this bug isn't introduced by my patch, but it seems my code doesn't follow
the bug :O) 

In conclusion: The text-decorations should at least use the same line-height as
the rest of the layout engine on the last line. I'll look into this. 

Tell me what you think. I don't really have any opionion about quirksmode.</pre></div><div class="change-set" id="c171"><div class="comment" data-id="1395321" data-no="171"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-171" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-171"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-171" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c171">Comment 171</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-06-12 12:35 PDT" data-time="1023910559">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-171">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-171" data-comment-id="1395321">Ok, I'm stupid. The 
<a rel="nofollow" href="http://www.hixie.ch/tests/adhoc/compat/fonts/002.html">http://www.hixie.ch/tests/adhoc/compat/fonts/002.html</a>
renders as it does because the text-decoration code believes that the baseline
of the &lt;A&gt; tag is at the &lt;A&gt;'s font ascent. In standards mode, this is true, but
in quirks, it obviusly isn't. So if people here'll agree that reverting to the
old behaviour/code for quirks mode is a good solution, then I won't have to fix
this. 

(Actually, this will be pretty hard to fix in quirks mode as the &lt;A&gt; doesn't
contain the neccesary information (the baseline) to draw the text-decoration.
So, in this case I'll have to walk down the tree... like the 1a above.)

Please advice! If I hear nothing in a week or so, I'll make a patch where quirk
rendering is done by the old code and standard mode is done by the new code
minus the FONT tag workaround.

Maybe I should put this to discussion in the developer groups? If nothing else,
a bit of developer discussion there may lend credence to the &quot;this is a
developer group only&quot; banner :-D</pre></div><div class="change-set" id="c172"><div class="comment" data-id="1396222" data-no="172"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-172" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a107120874_30078"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-172"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-172" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c172">Comment 172</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-06-12 18:37 PDT" data-time="1023932254">19 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-172">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-172" data-comment-id="1396222">I would be ok with using the current code in quirks mode, if that is what is
easiest... I dunno, it's up to dbaron really.</pre></div><div class="change-set" id="c173"><div class="comment" data-id="1411806" data-no="173"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-173" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-173"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-173" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c173">Comment 173</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-06-21 08:31 PDT" data-time="1024673474">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-173">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-88644"
         class="attachment patch obsolete"
         data-id="88644" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1777-8.patch">
      <meta itemprop="contentSize" content="35801">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=88644">
          <a class="link" href="attachment.cgi?id=88644&amp;action=diff">
        <span id="att-88644-description" itemprop="description">Reverting to old code for quirks mode.</span></a> (obsolete)
        — <a href="attachment.cgi?id=88644&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=88644">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-173" data-comment-id="1411806">There is a problem with using the old code for quirks mode: The CSS1 test suite
renders incorrectly:

<a rel="nofollow" href="http://www.w3.org/Style/CSS/Test/CSS1/current/sec543.htm">http://www.w3.org/Style/CSS/Test/CSS1/current/sec543.htm</a>

This is because the DOCTYPE 
&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot;
&quot;<a rel="nofollow" href="http://www.w3.org/TR/REC-html40/loose.dtd">http://www.w3.org/TR/REC-html40/loose.dtd</a>&quot;&gt;
triggers quirks-mode, and thus, get rendered incorrectly. 

What to do? Attached is a patch using the old textdecoration code for quirks
mode and the new for standards. Should we evangalize w3.org? ;-)</pre></div><div class="change-set" id="c174"><div class="comment" data-id="1412416" data-no="174"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-174" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a107120874_30078"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-174"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-174" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c174">Comment 174</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-06-21 13:41 PDT" data-time="1024692061">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-174">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-174" data-comment-id="1412416">Don't worry about the CSS1 test suite. :-)</pre></div><div class="change-set" id="c175"><div class="comment" data-id="1412522" data-no="175"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-175" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a107120874_30078"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-175"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-175" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c175">Comment 175</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-06-21 14:13 PDT" data-time="1024693993">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-175">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-175" data-comment-id="1412522">In that case, the patch is ready for review. :-D Thanks, Ian.

Please don't blame me too much for the code in
nsTextFrame::PaintTextDecorations()... I didn't clean it up beyond linebreaking
and such :o) However, I indented half the function..</pre></div><div class="change-set" id="c176"><div class="comment" data-id="1412571" data-no="176"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-176" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a107120874_30078"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a107120874_30078"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-176"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-176" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c176">Comment 176</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-06-21 14:35 PDT" data-time="1024695323">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-176">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-176" data-comment-id="1412571">looks good to me; qa=hixie</pre></div><div class="change-set" id="a112131112_3858"><div class="change" id="aa112131112_3858">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3858" id="a112131112_3858"><img src="https://secure.gravatar.com/avatar/3d0a56a82f3db0e6bec9aefe6e84d17e?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_3858" id="a112131112_3858"><a class="email " href="/user_profile?user_id=3858" > <span class="fna">Akkana Peck</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a112131112_3858"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a112131112_3858">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a112131112_3858">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-06-24 12:16 PDT" data-time="1024946172">18 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Blocks: <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - composer creates &quot;underlined blanks&quot; after pictures with link"
   href="/show_bug.cgi?id=126259">126259</a></div></div></div><div class="change-set" id="c177"><div class="comment" data-id="1426901" data-no="177"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-177" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a112131112_3858"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a112131112_3858"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-177"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-177" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c177">Comment 177</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-07-01 11:54 PDT" data-time="1025549679">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-177">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-177" data-comment-id="1426901">So could you briefly explain why it's *not possible* to use the new code for the
quirk?  I'm not enthusiastic about this big a code fork, since we know the
standards-mode code won't get tested well.</pre></div><div class="change-set" id="c178"><div class="comment" data-id="1427277" data-no="178"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-178" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_35909" id="a112131112_3858"><img src="https://secure.gravatar.com/avatar/57621890f71cd23baefa459c753df127?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_35909" id="a112131112_3858"><a class="email disabled" href="/user_profile?user_id=35909" > <span class="fna">joakim_46</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-178"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-178" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c178">Comment 178</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-07-01 15:16 PDT" data-time="1025561803">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-178">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-178" data-comment-id="1427277">If you revert the old code for quirks mode, the bug will appear in most pages, 
as they are open in quirks mode by default. Mozilla should have an option to 
force page rendering in quirks/standard mode (I already suggested that).</pre></div><div class="change-set" id="c179"><div class="comment" data-id="1428426" data-no="179"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-179" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a112131112_3858"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a112131112_3858"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-179"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-179" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c179">Comment 179</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-07-02 09:59 PDT" data-time="1025629141">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-179">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-179" data-comment-id="1428426">I don't think it is impossible to do (mostly anything). I was merely fishing for
a recommended solution to the quirks problem :-) Here's the alternatives, as I
see it. 

1. Keep the old textdecoration layout code for quirks mode. Pros: Doesn't break
any quirks, easy to do. Con: forks the code, new code has low visibility.

2. Work around the problem. This would involve walking down the tree, finding
any FONT tags, get their color, and correct the color of the text-decoration.
Furthermore, the line height must be recalculated to the &quot;quirk lineheight&quot; in
these cases (this is probably diffucult). We'll also need a decision as to which
font ascent to use, see below.

3. Correct LineBox. This involves making the FONT tag correct the lineboxes in
quirk mode so that LineBox reports the correct height. Then I would still need
to work down the tree, find each FONT tag, extract the beginning and the ending
horizontal coordinates, and (re)draw the font decoration in the appropriate
color. Also, see below about the font ascent. Pro: The data in lineBox would get
useful again, the solution is IMHO the &quot;right&quot; solution. Con: It might a lot of
work, it might break some other code which depends on the quirky LineBox behaviour.

4. Ignore the quirks problem: According to Ian Hixie, this causes some highly
visible layout errors. Ignoring the FONT quirk would make 3 easier, but not
unneccessary, as the lineheight on the LineBox'es would still be incorrect and
throw the linedrawing off. Pro: Easy. Con: Breaks pages.

It also not clear what font ascent to use, really. Consider
&lt;P class=&quot;overlined&quot;&gt;&lt;FONT size=2&gt;I like to &lt;FONT size=20&gt;shout!&lt;/FONT&gt;&lt;FONT&gt;
I'll attach an image illustrating the dilemma.

Conclusion: I take it from Ian's comments that 4 is not an option. I also take
it from Davids comment that 1 is not a viable option. That leaves 2 and 3. I
really don't want to implement 2, but if you (David) want me to implement 3, I
will do it.... e.g. in <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - nsLineBox always have mBounds.x == 0 (zero), even when the a short line is right aligned."
   href="/show_bug.cgi?id=145467">bug 145467</a>. Then this one could be marked dependant on
the 145467, and the &quot;right&quot; solution could be made. I would recommmend this bug
for 1.2, since it would need at least some testing before it's ready for a
milestone....</pre></div><div class="change-set" id="c180"><div class="comment" data-id="1428439" data-no="180"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-180" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a112131112_3858"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a112131112_3858"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-180"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-180" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c180">Comment 180</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-07-02 10:04 PDT" data-time="1025629483">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-180">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-89942"
         class="attachment obsolete"
         data-id="89942" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="overline.png">
      <meta itemprop="contentSize" content="1938">
      <meta itemprop="encodingFormat" content="image/png">
      <div class="label">
        Attached image
          <a class="link lightbox" href="attachment.cgi?id=89942" itemprop="contentUrl">
        <span id="att-89942-description" itemprop="description">Picture describing three possible ways to overline in quirks mode.</span></a> (obsolete)
        — <a href="attachment.cgi?id=89942&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-180" data-comment-id="1428439">In the picture,
1: Using the ascent of the biggest font/the font which determines the
lineheight to draw the overline.
2: Using the ascent of the first font to draw the overline.
3: The way it is currently done.</pre></div><div class="change-set" id="c181"><div class="comment" data-id="1450964" data-no="181"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-181" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a112131112_3858"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a112131112_3858"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-181"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-181" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c181">Comment 181</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-07-17 09:11 PDT" data-time="1026922295">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-181">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-181" data-comment-id="1450964">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=88644" name="attach_88644" title="Reverting to old code for quirks mode.">attachment 88644</a> <a href="/attachment.cgi?id=88644&amp;action=edit" title="Reverting to old code for quirks mode.">[details]</a> <a href="/attachment.cgi?id=88644&amp;action=diff" title="Reverting to old code for quirks mode.">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1777&amp;attachment=88644'>[review]</a>
Reverting to old code for quirks mode.

<span class="quote">&gt;+      if (!useOverride &amp;&amp; (NS_STYLE_TEXT_DECORATION_OVERRIDE_ALL 
&gt;+                           &amp; styleText-&gt;mTextDecoration)) 
&gt;+      {</span >

This is one of a number of places in the code that you reindented where you
changed the bracing style to move the brace onto the next line.  Layout code
typically uses brace on the same line, so could you leave it that way?	Also,
expressions like this are probable more cleanly written as:

if (!useOverride &amp;&amp;
    (NS_STYLE_TEXT_DECORATION_OVERRIDE_ALL &amp; styletext-&gt;mTextDecoration)) {

(perhaps breaking after the &amp; as well).

<span class="quote">&gt;-      PaintTextDecorations(aRenderingContext, aStyleContext,
&gt;-                           aTextStyle, dx, dy, width, text, details,0,(PRUint32)textLength);
&gt;+      PaintTextDecorations(aRenderingContext, aStyleContext,aPresContext, 
&gt;+          aTextStyle, dx, dy, width, text, details,0,(PRUint32)textLength);</span >

Could you leave things like this so that the arguments line up?

<span class="quote">&gt;&#64;&#64; -3049,12 +3074,14 &#64;&#64;
&gt; 
&gt;         if (isPaginated &amp;&amp; !iter.IsBeforeOrAfter()) {
&gt;           aRenderingContext.SetColor(nsCSSRendering::TransformColor(aTextStyle.mColor-&gt;mColor,canDarkenColor));
&gt;-	        RenderString(aRenderingContext,aStyleContext, aTextStyle, currenttext, 
&gt;-					        currentlength, currentX, dy, width, details);
&gt;+	        RenderString(aRenderingContext,aStyleContext, aPresContext, 
&gt;+                       aTextStyle, currenttext, currentlength, 
&gt;+                       currentX, dy, width, details);
&gt;         } else if (!isPaginated) {
&gt;           aRenderingContext.SetColor(nsCSSRendering::TransformColor(currentFGColor,canDarkenColor));
&gt;-	        RenderString(aRenderingContext,aStyleContext, aTextStyle, currenttext, 
&gt;-					        currentlength, currentX, dy, width, details);
&gt;+	        RenderString(aRenderingContext,aStyleContext, aPresContext, 
&gt;+                       aTextStyle, currenttext, currentlength, currentX, 
&gt;+                       dy, width, details);
&gt;         }
&gt; 
&gt;           //increment twips X start but remember to get ready for next draw by reducing current x by letter spacing amount</span >

Again, it would be nice if the arguments lined up.  Also, getting rid of the
tabs is good, but there are a few that you missed on some of these RenderString
lines.	When you're changing code anyway, it's good to get rid of the tabs. :-)

It's also nice to provide an alternative diff -uw patch (in addition to the
diff -u) to make the parts that you reindented easier to review.  (For the
previous patch, though, there's no need, since I did it myself.)

I'll try and add some more substantive comments soon.  Sorry for the delay...</pre></div><div class="change-set" id="c182"><div class="comment" data-id="1451117" data-no="182"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-182" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a112131112_3858"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a112131112_3858"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-182"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-182" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c182">Comment 182</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-07-17 10:28 PDT" data-time="1026926935">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-182">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-182" data-comment-id="1451117">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=88644" name="attach_88644" title="Reverting to old code for quirks mode.">attachment 88644</a> <a href="/attachment.cgi?id=88644&amp;action=edit" title="Reverting to old code for quirks mode.">[details]</a> <a href="/attachment.cgi?id=88644&amp;action=diff" title="Reverting to old code for quirks mode.">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1777&amp;attachment=88644'>[review]</a>
Reverting to old code for quirks mode.

(nsTextFrame::PaintTextDecorations)
<span class="quote">&gt;+  // Quirks mode font decoration are rendered by children; see <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - [TEXT] 'text-decoration' should not be drawn by children (underline) [INLINE]"
   href="/show_bug.cgi?id=1777">bug 1777</a>
&gt;+  nsCompatibility mode;
&gt;+  aPresContext-&gt;GetCompatibilityMode(&amp;mode);
&gt;+  if (eCompatibility_NavQuirks == mode) {</span >

This comment should refer to nsHTMLContainerFrame::Paint, which does the
painting for non-quirks mode.

<span class="quote">&gt;+        kid-&gt;IsEmpty((mode == eCompatibility_NavQuirks), isPre, &amp;isEmpty);</span >

On the current trunk, |(mode == eCompatibility_NavQuirks)| should be replaced
by |mode|.  See <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Implement almost-standards rendering mode"
   href="/show_bug.cgi?id=153032">bug 153032</a>.

(nsHTMLContainerFrame::Paint)
+  if (eCompatibility_Standard == mode &amp;&amp; 
+      NS_FRAME_PAINT_LAYER_FOREGROUND == aWhichLayer 
+      &amp;&amp; frameType == nsLayoutAtoms::inlineFrame) {

1) There should be a comment here pointing to
nsTextFrame::PaintTextDecorations.
2) Thanks to <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Implement almost-standards rendering mode"
   href="/show_bug.cgi?id=153032">bug 153032</a>, this needs to be |eCompatibilityNavQuirks != mode| to
be symmetric with nsTextFrame::PaintTextDecorations</pre></div><div class="change-set" id="c183"><div class="comment" data-id="1451135" data-no="183"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-183" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a112131112_3858"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a112131112_3858"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-183"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-183" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c183">Comment 183</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-07-17 10:37 PDT" data-time="1026927454">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-183">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-183" data-comment-id="1451135">If you fix the issues in <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - [TEXT] 'text-decoration' should not be drawn by children (underline) [INLINE]"
   href="/show_bug.cgi?id=1777#c181">comment 181</a> and <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - [TEXT] 'text-decoration' should not be drawn by children (underline) [INLINE]"
   href="/show_bug.cgi?id=1777#c182">comment 182</a>, you'll have r=dbaron. 
(I'm trusting you that you've addressed the issues in my previous comments.  I
didn't go through the details of all the new code again.)

Once you fix those, you'll need to get super-review (see
<a rel="nofollow" href="http://mozilla.org/hacking/reviewers.html">http://mozilla.org/hacking/reviewers.html</a> ).  A good super-reviewer for this
would probably be bzbarsky.</pre></div><div class="change-set" id="c184"><div class="comment" data-id="1456035" data-no="184"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-184" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a112131112_3858"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a112131112_3858"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-184"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-184" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c184">Comment 184</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-07-19 17:23 PDT" data-time="1027124586">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-184">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-92046"
         class="attachment patch obsolete"
         data-id="92046" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1777-10.patch">
      <meta itemprop="contentSize" content="36115">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=92046">
          <a class="link" href="attachment.cgi?id=92046&amp;action=diff">
        <span id="att-92046-description" itemprop="description">Latest patch updated with David Baron's comments</span></a> (obsolete)
        — <a href="attachment.cgi?id=92046&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=92046">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-184" data-comment-id="1456035">I've updated the patch as per your comments. In answer to your question, I have
updated my patch with your other comments during previous iterations. 

Thank you for reviewing the patch :-)

I'll attach a -uw diff shortly; then I'll see about a super-review tomorrow.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=88644&amp;action=edit"
           title="Reverting to old code for quirks mode."
           class=""
        >Attachment #88644</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=89942&amp;action=edit"
           title="Picture describing three possible ways to overline in quirks mode."
           class=""
        >Attachment #89942</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c185"><div class="comment" data-id="1456042" data-no="185"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-185" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a112131112_3858"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a112131112_3858"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-185"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-185" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c185">Comment 185</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-07-19 17:27 PDT" data-time="1027124870">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-185">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-92047"
         class="attachment patch obsolete"
         data-id="92047" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1777-10b.patch">
      <meta itemprop="contentSize" content="32859">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=92047">
          <a class="link" href="attachment.cgi?id=92047&amp;action=diff">
        <span id="att-92047-description" itemprop="description">As 92046/The latest patch, but /sans/ changes in whitespace. Don't check this version into CVS, please.</span></a> (obsolete)
        — <a href="attachment.cgi?id=92047&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=92047">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-185" data-comment-id="1456042">Adding patch /sans/ whitespace, as requested.</pre></div><div class="change-set" id="c186"><div class="comment" data-id="1465266" data-no="186"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-186" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a112131112_3858"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a112131112_3858"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-186"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-186" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c186">Comment 186</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-07-25 10:56 PDT" data-time="1027619789">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-186">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-186" data-comment-id="1465266">Did you send email asking for super-review?</pre></div><div class="change-set" id="c187"><div class="comment" data-id="1466462" data-no="187"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-187" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a112131112_3858"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a112131112_3858"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-187"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-187" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c187">Comment 187</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-07-26 00:20 PDT" data-time="1027668058">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-187">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-187" data-comment-id="1466462">Sorry, my bad. I was under the impression form
<a rel="nofollow" href="http://mozilla.org/hacking/reviewers.html">http://mozilla.org/hacking/reviewers.html</a> that I should wait for the r=&lt;email&gt;
thingy.

The letter email has been sent a few seconds ago. Thanks for your time! :-D</pre></div><div class="change-set" id="c188"><div class="comment" data-id="1466711" data-no="188"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-188" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a112131112_3858"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a112131112_3858"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-188"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-188" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c188">Comment 188</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-07-26 06:31 PDT" data-time="1027690310">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-188">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-188" data-comment-id="1466711">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=92046" name="attach_92046" title="Latest patch updated with David Baron's comments">attachment 92046</a> <a href="/attachment.cgi?id=92046&amp;action=edit" title="Latest patch updated with David Baron's comments">[details]</a> <a href="/attachment.cgi?id=92046&amp;action=diff" title="Latest patch updated with David Baron's comments">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1777&amp;attachment=92046'>[review]</a>
Latest patch updated with David Baron's comments

Still one whitespace issue:

<span class="quote">&gt;&#64;&#64; -3217,8 +3245,8 &#64;&#64;
&gt;       // simplest rendering approach
&gt;       aRenderingContext.SetColor(nsCSSRendering::TransformColor(aTextStyle.mColor-&gt;mColor,canDarkenColor));
&gt;       aRenderingContext.DrawString(text, PRUint32(textLength), dx, dy + mAscent);
&gt;-      PaintTextDecorations(aRenderingContext, aStyleContext, aTextStyle,
&gt;-                           dx, dy, width);
&gt;+      PaintTextDecorations(aRenderingContext, aStyleContext, 
&gt;+                    aPresContext, aTextStyle, dx, dy, width);
&gt;     }
&gt;     else {
&gt;       SelectionDetails *details;</span >


<span class="quote">&gt;&#64;&#64; -126,11 +348,40 &#64;&#64;
&gt;       return NS_OK;
&gt;   }
&gt; 
&gt;+  // Paint underlines+overlines behind children, but line-throughs in front
&gt;+  // of children. See <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - [TEXT] 'text-decoration' should not be drawn by children (underline) [INLINE]"
   href="/show_bug.cgi?id=1777">bug 1777</a> for details.
&gt;+  // This for is standards mode only. For Quirks mode, see 
&gt;+  // nsTextFrame::PaintTextDecorations. 
&gt;+  nscolor underColor, overColor, strikeColor;
&gt;+  PRUint8 decorations = NS_STYLE_TEXT_DECORATION_NONE;
&gt;+  nsCompatibility mode;
&gt;+  aPresContext-&gt;GetCompatibilityMode(&amp;mode);
&gt;+  if (mode &amp;&amp; 
&gt;+      NS_FRAME_PAINT_LAYER_FOREGROUND == aWhichLayer &amp;&amp;
&gt;+      frameType == nsLayoutAtoms::inlineFrame) {</span >

Eh?  This mode check is definitely unclear, if not wrong.  Don't rely on a
named enum value being zero or nonzero.

<span class="quote">&gt;+  // Paint textdecorations: under+overline behind children, line-through 
&gt;+  // in front. 
&gt;+  // This for is standards mode only. For Quirks mode, see 
&gt;+  // nsTextFrame::PaintTextDecorations. 
&gt;+  PRUint8 decorations = NS_STYLE_TEXT_DECORATION_NONE;
&gt;+  nscolor underColor, overColor, strikeColor;
&gt;+  nsCompatibility mode;
&gt;+  aPresContext-&gt;GetCompatibilityMode(&amp;mode);
&gt;+  if (mode &amp;&amp; 
&gt;+      aWhichLayer == NS_FRAME_PAINT_LAYER_FOREGROUND &amp;&amp; !mLines.empty()) {</span >

Same for this one.</pre></div><div class="change-set" id="c189"><div class="comment" data-id="1468864" data-no="189"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-189" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a112131112_3858"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a112131112_3858"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-189"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-189" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c189">Comment 189</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-07-28 01:49 PDT" data-time="1027846175">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-189">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-93061"
         class="attachment patch obsolete"
         data-id="93061" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1777-11.patch">
      <meta itemprop="contentSize" content="36178">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=93061">
          <a class="link" href="attachment.cgi?id=93061&amp;action=diff">
        <span id="att-93061-description" itemprop="description">Patch for this bug and bug 20163. This is the full patch version.</span></a> (obsolete)
        — <a href="attachment.cgi?id=93061&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=93061">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-189" data-comment-id="1468864">Suggestion above implemented. Sorry for being unable to read english :-[</pre></div><div class="change-set" id="a115031116_22237"><div class="change" id="aa115031116_22237">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a115031116_22237"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_22237" id="a115031116_22237"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a115031116_22237"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a115031116_22237">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a115031116_22237">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-07-28 01:49 PDT" data-time="1027846176">18 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=92046&amp;action=edit"
           title="Latest patch updated with David Baron's comments"
           class=""
        >Attachment #92046</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=92047&amp;action=edit"
           title="As 92046/The latest patch, but /sans/ changes in whitespace. Don't check this version into CVS, please."
           class=""
        >Attachment #92047</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c190"><div class="comment" data-id="1468866" data-no="190"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-190" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a115031116_22237"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a115031116_22237"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-190"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-190" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c190">Comment 190</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-07-28 01:51 PDT" data-time="1027846288">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-190">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-93062"
         class="attachment patch obsolete"
         data-id="93062" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1777-11w.patch">
      <meta itemprop="contentSize" content="32922">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=93062">
          <a class="link" href="attachment.cgi?id=93062&amp;action=diff">
        <span id="att-93062-description" itemprop="description">As 93071,  but without whitespace differences. Meant for reviews only.</span></a> (obsolete)
        — <a href="attachment.cgi?id=93062&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=93062">Splinter Review</a>
      </div>
    </div></div><div class="change-set" id="c191"><div class="comment" data-id="1468968" data-no="191"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-191" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a115031116_22237"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a115031116_22237"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-191"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-191" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c191">Comment 191</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-07-28 06:02 PDT" data-time="1027861323">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-191">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-191" data-comment-id="1468968">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=93061" name="attach_93061" title="Patch for this bug and bug 20163. This is the full patch version.">attachment 93061</a> <a href="/attachment.cgi?id=93061&amp;action=edit" title="Patch for this bug and bug 20163. This is the full patch version.">[details]</a> <a href="/attachment.cgi?id=93061&amp;action=diff" title="Patch for this bug and bug 20163. This is the full patch version.">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1777&amp;attachment=93061'>[review]</a>
Patch for this bug and <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - 'text-decoration' should not apply to text-less inlines (underline) [INLINE]"
   href="/show_bug.cgi?id=20163">bug 20163</a>. This is the full patch version.

This still has an incorrect mode check in nsTextFrame.cpp.</pre></div><div class="change-set" id="c192"><div class="comment" data-id="1472934" data-no="192"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-192" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_21544" id="a115031116_22237"><img src="https://secure.gravatar.com/avatar/42c480cac44896ddf47ea1bc5ce03027?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_21544" id="a115031116_22237"><a class="email disabled" href="/user_profile?user_id=21544" > <span class="fna">Håkan Waara</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-192"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-192" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c192">Comment 192</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-07-30 19:53 PDT" data-time="1028083991">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-192">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-192" data-comment-id="1472934">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=93062" name="attach_93062" title="As 93071,  but without whitespace differences. Meant for reviews only.">attachment 93062</a> <a href="/attachment.cgi?id=93062&amp;action=edit" title="As 93071,  but without whitespace differences. Meant for reviews only.">[details]</a> <a href="/attachment.cgi?id=93062&amp;action=diff" title="As 93071,  but without whitespace differences. Meant for reviews only.">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1777&amp;attachment=93062'>[review]</a>
As 93071,  but without whitespace differences. Meant for reviews only.

You use a lot of weird indentations, like sometimes in the patch you use 4
spaces, and sometimes 2, and sometimes you don't indent the code under a if()
at all. I assume that you have fixed all of this (to comply with the current
coding style!) in the whitespace-sensitive patch. Please be consistent. :-)

Now for some nits.

You can combine the UNDERLINE and OVERLINE cases since they call
PaintTextDecorationLines() with the same arguments, and you already made the
checks one time above...

<span class="quote">&gt;+  if (decoration &amp; 
&gt;+      (NS_STYLE_TEXT_DECORATION_UNDERLINE 
&gt;+       | NS_STYLE_TEXT_DECORATION_OVERLINE)) {
&gt;+    normalFont-&gt;GetUnderline(offset, size);
&gt;+    if (NS_STYLE_TEXT_DECORATION_UNDERLINE &amp; decoration) {
&gt;+      PaintTextDecorationLines(aRenderingContext, color, offset, ascent, size);
&gt;+    }
&gt;+    else if (NS_STYLE_TEXT_DECORATION_OVERLINE &amp; decoration) {
&gt;+      PaintTextDecorationLines(aRenderingContext, color, ascent, ascent, size);
&gt;+    }
&gt;+  }</span >

Same here.

<span class="quote">&gt;+    GetTextDecorations(aPresContext, PR_FALSE, &amp;decorations, &amp;underColor, 
&gt;+                       &amp;overColor, &amp;strikeColor);
&gt;+    if (decorations &amp; NS_STYLE_TEXT_DECORATION_UNDERLINE) {
&gt;+      PaintTextDecorations(aPresContext, aRenderingContext, 
&gt;+                           NS_STYLE_TEXT_DECORATION_UNDERLINE, underColor);
&gt;+    }
&gt;+    if (decorations &amp; NS_STYLE_TEXT_DECORATION_OVERLINE) {
&gt;+      PaintTextDecorations(aPresContext, aRenderingContext, 
&gt;+                           NS_STYLE_TEXT_DECORATION_OVERLINE, overColor);
&gt;+    }
&gt;+  }
&gt;+</span ></pre></div><div class="change-set" id="a115297547_21544"><div class="change" id="aa115297547_21544">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_21544" id="a115297547_21544"><img src="https://secure.gravatar.com/avatar/42c480cac44896ddf47ea1bc5ce03027?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_21544" id="a115297547_21544"><a class="email disabled" href="/user_profile?user_id=21544" > <span class="fna">Håkan Waara</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a115297547_21544"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a115297547_21544">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a115297547_21544">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-07-31 03:50 PDT" data-time="1028112607">18 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Blocks: <a class="bz_bug_link
          bz_status_NEW"
   title="NEW - Underlines retain color while being selected"
   href="/show_bug.cgi?id=35146">35146</a></div></div></div><div class="change-set" id="c193"><div class="comment" data-id="1473568" data-no="193"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-193" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a115297547_21544"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a115297547_21544"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-193"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-193" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c193">Comment 193</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-07-31 09:46 PDT" data-time="1028134003">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-193">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-193" data-comment-id="1473568">Please don't comment on whitespace in a diff -w.

The two cases quoted above pass different arguments.  There might be an
advantage to using ?:, but that sometimes tends to make the code unclear.</pre></div><div class="change-set" id="c194"><div class="comment" data-id="1483475" data-no="194"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-194" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a115297547_21544"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a115297547_21544"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-194"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-194" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c194">Comment 194</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-08-06 12:09 PDT" data-time="1028660998">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-194">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-94210"
         class="attachment patch obsolete"
         data-id="94210" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1777-12.patch">
      <meta itemprop="contentSize" content="36200">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=94210">
          <a class="link" href="attachment.cgi?id=94210&amp;action=diff">
        <span id="att-94210-description" itemprop="description">Patch for this bug and bug 20163. This is the full patch version.</span></a> (obsolete)
        — <a href="attachment.cgi?id=94210&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=94210">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-194" data-comment-id="1483475">Corrected the missed mode check. 

I disagree with joining the two if's as the parameters differ. (offset vs.
ascent). Admittedly, I could trade one integer comparison for a little bloat by
moving the font thingy inside each if's, but I see little gain there. 

I must admit that emacs is the one that indent my code mostly. I've tried to
going over my code looking for the issues mentioned, but I havn't found
anything. It's probably me who are blind :-/

Whitespace patch to follow...</pre></div><div class="change-set" id="a115845941_22237"><div class="change" id="aa115845941_22237">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a115845941_22237"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_22237" id="a115845941_22237"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a115845941_22237"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a115845941_22237">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a115845941_22237">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-08-06 12:10 PDT" data-time="1028661001">18 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=86988&amp;action=edit"
           title="As above, but now it compiles AND runs in optimized builds"
           class=""
        >Attachment #86988</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=93061&amp;action=edit"
           title="Patch for this bug and bug 20163. This is the full patch version."
           class=""
        >Attachment #93061</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=93062&amp;action=edit"
           title="As 93071,  but without whitespace differences. Meant for reviews only."
           class=""
        >Attachment #93062</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c195"><div class="comment" data-id="1483482" data-no="195"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-195" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a115845941_22237"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a115845941_22237"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-195"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-195" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c195">Comment 195</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-08-06 12:13 PDT" data-time="1028661183">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-195">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-94213"
         class="attachment patch obsolete"
         data-id="94213" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1777-12w.patch">
      <meta itemprop="contentSize" content="32944">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=94213">
          <a class="link" href="attachment.cgi?id=94213&amp;action=diff">
        <span id="att-94213-description" itemprop="description">-w patch: Same as 94210, except whitespace difference are ignored. For review only.</span></a> (obsolete)
        — <a href="attachment.cgi?id=94213&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=94213">Splinter Review</a>
      </div>
    </div></div><div class="change-set" id="c196"><div class="comment" data-id="1490933" data-no="196"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-196" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_20209" id="a115845941_22237"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_20209" id="a115845941_22237"><a class="email " href="/user_profile?user_id=20209" > <span class="fna">Boris Zbarsky [:bzbarsky]</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-196"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-196" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c196">Comment 196</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-08-10 21:07 PDT" data-time="1029038826">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-196">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-196" data-comment-id="1490933">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=94213" name="attach_94213" title="-w patch: Same as 94210, except whitespace difference are ignored. For review only.">attachment 94213</a> <a href="/attachment.cgi?id=94213&amp;action=edit" title="-w patch: Same as 94210, except whitespace difference are ignored. For review only.">[details]</a> <a href="/attachment.cgi?id=94213&amp;action=diff" title="-w patch: Same as 94210, except whitespace difference are ignored. For review only.">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1777&amp;attachment=94213'>[review]</a>
-w patch: Same as 94210, except whitespace difference are ignored. For review only.

<span class="quote">&gt;+  // The ascent of the linebox, i.e. the distance from the top to the baseline 
&gt;+  // of the (initial) font:
&gt;+  nscoord mAscent;</span >

Use javadoc syntax?  So:

/**  (two stars, important!)
 * The ascent ....
 */

<span class="quote">&gt;+      if (!useOverride &amp;&amp; 
&gt;+          (NS_STYLE_TEXT_DECORATION_OVERRIDE_ALL 
&gt;+           &amp; styleText-&gt;mTextDecoration)) {</span >

Keep the two things being &amp;-ed on the same line?  It's not too long, as far as
I can tell....

<span class="quote">&gt;+      PaintTextDecorations(aRenderingContext, aStyleContext,aPresContext, 
&gt;+                           aTextStyle, dx, dy, width, text, details,0,</span >

space before the '0'?

<span class="quote">&gt;+   *  Input:   PRBool isBlock - whether _this_ is a block frame or no.</span >

&#64;param isBlock whether ...
&#64;param pDecorations [OUT] the decorations to apply.  Will be set to
NS_STYLE_....
&#64;param pUnderColor [OUT] the color of the underline or null if there is no
underline

And so forth.  If the colors will _not_ be set to null when the appropriate
decoration is not applied, the comment should say that.  Finally, is there a
good reason to use nscolor* instead of nscolor&amp; ?

Use aFoo instead of pFoo for arguments to functions, please ('a' for
'argument').  &quot;isBlock&quot; should be &quot;aIsBlock&quot;.

<span class="quote">&gt;+  /** 
&gt;+   * Function that does the actual drawing of the textdecoration. 
&gt;+   *   input:
&gt;+   *     aRenderingContext.
&gt;+   *    color: the color of the text-decoration
&gt;+   *    ascent: ascent of the font from which the text-decoration was derived. 
&gt;+   *    offset: distance *above* baseline where the text-decoration should be 
&gt;+   *            drawn, i.e. negative offsets draws *below* the baseline.
&gt;+   *    size: the thickness of the line
&gt;+   */</span >

Again, use &#64;param syntax for the params.

<span class="quote">&gt;+  if (!mStyleContext-&gt;HasTextDecorations()) {
&gt;+    //This is a neccessary, but not sufficient, condition for textdecorations.
&gt;+    return; 
&gt;+  }</span >

Should this not set *pDecorations to something useful before returning?  And
null out the other pointers?

+    if (frame) {
<span class="quote">&gt;+      /*
&gt;+       * Special case: text form controls.
&gt;+       */  </span >

So... since we broke out of the loop above and |frame| is non-null, decorMask
must be null.

<span class="quote">&gt;+        PRUint8 decors = decorMask &amp; styleText-&gt;mTextDecoration;</span >

Then how is this supposed to do anything useful?

In any case, please have a slightly more detailed explanation of why text
inputs are special.

<span class="quote">&gt;+    parent-&gt;FirstChild(aPresContext, nsnull, &amp;kid); 
&gt;+    nsCOMPtr&lt;nsIAtom&gt; frameType;
&gt;+    
&gt;+    for (parent-&gt;FirstChild(aPresContext, nsnull, &amp;kid); kid; </span >

That first FirstChild call can be removed, no?

HasTextFrameChild() seems to be potentially expensive... Any decent way of
caching that information so it does not have to be recomputed on every Paint()?
 We could invalidate the cached info on content changes.....

The rest looks good to me so far, but I'm still working on grokking this fully.</pre></div><div class="change-set" id="a116229755_20209"><div class="change" id="aa116229755_20209">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_20209" id="a116229755_20209"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_20209" id="a116229755_20209"><a class="email " href="/user_profile?user_id=20209" > <span class="fna">Boris Zbarsky [:bzbarsky]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a116229755_20209"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a116229755_20209">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a116229755_20209">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-08-10 22:46 PDT" data-time="1029044815">18 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Blocks: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - implement CSS3 text module's text-decoration-style and text-decoration-color"
   href="/show_bug.cgi?id=59109">59109</a></div></div></div><div class="change-set" id="c197"><div class="comment" data-id="1491062" data-no="197"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-197" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a116229755_20209"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a116229755_20209"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-197"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-197" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c197">Comment 197</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-08-11 01:05 PDT" data-time="1029053158">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-197">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-197" data-comment-id="1491062">I'm really sorry, but my Linux HD crashed a few days ago. I'll look into it when
I can, but I have no timeframe yet :-(

Good comments, though. I'll certainly make the corrections when I can. And look
into caching the HasTextFrameChild thing. It could be expensive if a large
subtree with no TextFrameChild is encountered, yes.</pre></div><div class="change-set" id="c198"><div class="comment" data-id="1536298" data-no="198"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-198" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a116229755_20209"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a116229755_20209"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-198"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-198" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c198">Comment 198</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-09-10 12:44 PDT" data-time="1031687066">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-198">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-198" data-comment-id="1536298">Any chance of a patch that addresses the comments?</pre></div><div class="change-set" id="c199"><div class="comment" data-id="1536613" data-no="199"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-199" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a116229755_20209"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a116229755_20209"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-199"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-199" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c199">Comment 199</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-09-10 15:21 PDT" data-time="1031696486">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-199">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-199" data-comment-id="1536613">Sure, I can have a patch without the caching thing ready in a couple of days, if
anybody want. It would be my pleasure.

The following is all about this caching. If anybody wants this caching, some
comments to these lines would be very, very welcome.

I'm currently trying to do some measuring for the HasTextFrameChild, for the
&quot;big&quot; comment below, the caching of hasTextFrameChild() in <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - [TEXT] 'text-decoration' should not be drawn by children (underline) [INLINE]"
   href="/show_bug.cgi?id=1777#c196">comment 196</a>. I'm
beginning to wonder whether caching anything is worth the bother. 85% or so hits
seems to find the answer in one level of recursion; 98--99% in 2 or less and the
rest in 3 and 4. (Taking from the &quot;Internation Browser Busting Test&quot; and some
personal poking around in pages with lots of links. So the first question is: Is
it worth it? Can we produce additional profiling data?

Anyway, it would be very helpful if anybody could hint at how such a caching
could be /invalidated/ (or updated)... it should be invalidated whenever a child
is added to or removed from the subtree. I can't figure out how to cache
something like that without making this invalidation (much) more expensive than
the recursive call :-/ However I look at it, I can only come up with these two
solutions:

1) Walk back up the tree from the inserted/removed frame, and invalidating as I
go. Looking at my &quot;profiling&quot; data, that's IMHO just not worth it.

2) Make a listener which registers itself to every child frame. This would make
the first calculation much more expensive and incur a significant memory
overhead, but would at least achieve cheap redraws.

So I just don't know. Any comments/ideas? 

P.S: When I started on this, I had a wild idea: All frames could have a bit,
HAS_TEXT_FRAME_CHILD, which would originally be set to false. Then, whenever a
textframe was added to the document tree, we could walk up the tree, setting the
bit to TRUE until we encounted a frame with HAS_TEXT_FRAME_CHILD already set to
TRUE. Then, when an TEXT_FRAME_CHILD was removed, the bit would have to be
recalculated for the entire tree. This would make initial draw and redraw very
cheap (O(1)), frame adding fairly cheap (O(treedepth)) and removal expensive
(O(treesize)). But then, everybody pays, whether text-decorations are used or
not, which is why I gave it up :-/ (the removal part could be optimized at the
expense of some memory, making it O(treedepth). </pre></div><div class="change-set" id="c200"><div class="comment" data-id="1536715" data-no="200"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-200" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_20209" id="a116229755_20209"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_20209" id="a116229755_20209"><a class="email " href="/user_profile?user_id=20209" > <span class="fna">Boris Zbarsky [:bzbarsky]</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-200"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-200" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c200">Comment 200</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-09-10 16:12 PDT" data-time="1031699568">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-200">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-200" data-comment-id="1536715">I say skip on the caching for now and land the rest.  We can then optimize
HasTextFrameChild() as a separate endeavor....</pre></div><div class="change-set" id="c201"><div class="comment" data-id="1545643" data-no="201"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-201" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a116229755_20209"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a116229755_20209"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-201"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-201" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c201">Comment 201</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-09-16 12:59 PDT" data-time="1032206360">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-201">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-201" data-comment-id="1545643">The comments /sans/ the caching of HasTextFrameChild is implemented, except this
one:

<span class="quote">&gt; So... since we broke out of the loop above and |frame| is non-null, decorMask
&gt; must be null.</span >

Well, no actually. There's a break statement in the block above. I've added more
commments to the logic to make this more apparent. Also, I've added &amp;&amp; decorMask
to emphasize that decorMask != 0. 

Finally:

<span class="quote">&gt; We could invalidate the cached info on content changes.....</span >

On 2nd reading, you seem to imply that there's some standard event system for
doing this. Any hints to where I might look? And why not go ahead and cache the
result fo the entire GetTextDecorations()?

Patches are comming up...</pre></div><div class="change-set" id="c202"><div class="comment" data-id="1545649" data-no="202"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-202" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a116229755_20209"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a116229755_20209"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-202"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-202" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c202">Comment 202</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-09-16 13:01 PDT" data-time="1032206469">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-202">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-99407"
         class="attachment patch obsolete"
         data-id="99407" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1777-1.patch">
      <meta itemprop="contentSize" content="37152">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=99407">
          <a class="link" href="attachment.cgi?id=99407&amp;action=diff">
        <span id="att-99407-description" itemprop="description">Latest patch, full version</span></a> (obsolete)
        — <a href="attachment.cgi?id=99407&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=99407">Splinter Review</a>
      </div>
    </div></div><div class="change-set" id="a119391410_22237"><div class="change" id="aa119391410_22237">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a119391410_22237"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_22237" id="a119391410_22237"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a119391410_22237"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a119391410_22237">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a119391410_22237">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-09-16 13:01 PDT" data-time="1032206470">18 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=94210&amp;action=edit"
           title="Patch for this bug and bug 20163. This is the full patch version."
           class=""
        >Attachment #94210</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=94213&amp;action=edit"
           title="-w patch: Same as 94210, except whitespace difference are ignored. For review only."
           class=""
        >Attachment #94213</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c203"><div class="comment" data-id="1545651" data-no="203"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-203" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a119391410_22237"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a119391410_22237"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-203"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-203" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c203">Comment 203</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-09-16 13:02 PDT" data-time="1032206532">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-203">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-99408"
         class="attachment patch obsolete"
         data-id="99408" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1777-1w.patch">
      <meta itemprop="contentSize" content="33890">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=99408">
          <a class="link" href="attachment.cgi?id=99408&amp;action=diff">
        <span id="att-99408-description" itemprop="description">Latest patch, -w version, for review /only/.</span></a> (obsolete)
        — <a href="attachment.cgi?id=99408&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=99408">Splinter Review</a>
      </div>
    </div></div><div class="change-set" id="c204"><div class="comment" data-id="1553279" data-no="204"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-204" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_20209" id="a119391410_22237"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_20209" id="a119391410_22237"><a class="email " href="/user_profile?user_id=20209" > <span class="fna">Boris Zbarsky [:bzbarsky]</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-204"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-204" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c204">Comment 204</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-09-20 09:18 PDT" data-time="1032538733">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-204">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-204" data-comment-id="1553279">Look at the ContentAppended, ContentInserted, ContentRemoved, ContentReplaced,
etc methods on nsIDocumentObserver...  These notifications get dispatched to the
PresShell and thence to the style set and the frame constructor.</pre></div><div class="change-set" id="c205"><div class="comment" data-id="1568237" data-no="205"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-205" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_20209" id="a119391410_22237"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_20209" id="a119391410_22237"><a class="email " href="/user_profile?user_id=20209" > <span class="fna">Boris Zbarsky [:bzbarsky]</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-205"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-205" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c205">Comment 205</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-09-30 16:06 PDT" data-time="1033427196">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-205">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-205" data-comment-id="1568237">Nits:

+        if (NS_STYLE_TEXT_DECORATION_LINE_THROUGH &amp; decorMask 
+            &amp; styleText-&gt;mTextDecoration) {

Keep the operator on the previous line in cases like this.  This comes up all
over in the code around that chunk.

+   *  &#64;param aUnderColor   The color of underline if the appropriate bit 
+   *                       above is set. It is undefined otherwise.

s/above/in aDecorations/ please?  Same for the other params.

+   *  NOTE: This function return with aDecorations==NS_STYLE_TEXT_DECORATION_NONE

&quot;This function returns&quot;

+                      | NS_STYLE_TEXT_DECORATION_OVERLINE 

again, put the operator on the previous line.

+      aUnderColor =styleColor-&gt;mColor;

space after the '='?

+  for (aParent-&gt;FirstChild(aPresContext, nsnull, &amp;kid); kid; 
+       kid-&gt;GetNextSibling(&amp;kid))
+    {

follow the prevailing bracing style in the file?  (either brace-on-same-line
or brace-on-next-line-lined-up-with-&quot;for&quot;, whichever is used more)

+       | NS_STYLE_TEXT_DECORATION_OVERLINE)) {

the usual.  Put the '|' on the previous line.

Fix those, and sr=bzbarsky, assuming dbaron reviews.</pre></div><div class="change-set" id="c206"><div class="comment" data-id="1568364" data-no="206"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-206" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_15223" id="a119391410_22237"><img src="https://secure.gravatar.com/avatar/e4a0566b254d665aa267b7874726fbbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_15223" id="a119391410_22237"><a class="email " href="/user_profile?user_id=15223" > <span class="fna">timeless</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-206"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-206" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c206">Comment 206</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-09-30 17:12 PDT" data-time="1033431137">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-206">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-206" data-comment-id="1568364">+   *  &#64;param aUnderColor   The color of the underline if the appropriate bit 
+   *                       in aDecorations is set. It is undefined otherwise.
+   *  &#64;param aOverColor    The color of overline if the appropriate bit 
+   *                       in aDecorations is set. It is undefined otherwise.
+   *  &#64;param aStrikeColor  The color of strike-through if the appropriate bit 
+   *                       in aDecorations is set. It is undefined otherwise.

If this were a public interface, i'd prefer
aUnderlineColor/aOverlineColor/aStrikethroughColor, but this isn't :-)</pre></div><div class="change-set" id="c207"><div class="comment" data-id="1571560" data-no="207"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-207" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a119391410_22237"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a119391410_22237"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-207"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-207" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c207">Comment 207</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-10-02 13:41 PDT" data-time="1033591312">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-207">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-101439"
         class="attachment patch obsolete"
         data-id="101439" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1777-2.patch">
      <meta itemprop="contentSize" content="37097">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=101439">
          <a class="link" href="attachment.cgi?id=101439&amp;action=diff">
        <span id="att-101439-description" itemprop="description">Latest patch, including (most of) Boris Zbarsky comments</span></a> (obsolete)
        — <a href="attachment.cgi?id=101439&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=101439">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-207" data-comment-id="1571560">I've decided not to change the &#64;param as requested. For one, the sed installed
in my brain could not find a match for the pattern requested, and for another,
my version looks like the other code with &#64;param:

<a rel="nofollow" href="http://lxr.mozilla.org/seamonkey/source/layout/html/base/src/nsBlockFrame.h#322">http://lxr.mozilla.org/seamonkey/source/layout/html/base/src/nsBlockFrame.h#322</a>


So if anyone feel it is important enough that I should correct this, could you
please give a reference to some layout-code that uses the syntax you want? 

re timeless: I agree, on both counts.</pre></div><div class="change-set" id="c208"><div class="comment" data-id="1571563" data-no="208"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-208" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a119391410_22237"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a119391410_22237"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-208"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-208" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c208">Comment 208</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-10-02 13:44 PDT" data-time="1033591458">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-208">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-101440"
         class="attachment patch obsolete"
         data-id="101440" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1777-2w.patch">
      <meta itemprop="contentSize" content="33835">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=101440">
          <a class="link" href="attachment.cgi?id=101440&amp;action=diff">
        <span id="att-101440-description" itemprop="description">as  101439, but without whitespace diffs. *For review only*.</span></a> (obsolete)
        — <a href="attachment.cgi?id=101440&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=101440">Splinter Review</a>
      </div>
    </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=99407&amp;action=edit"
           title="Latest patch, full version"
           class=""
        >Attachment #99407</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=99408&amp;action=edit"
           title="Latest patch, -w version, for review /only/."
           class=""
        >Attachment #99408</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c209"><div class="comment" data-id="1571592" data-no="209"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-209" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_20209" id="a119391410_22237"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_20209" id="a119391410_22237"><a class="email " href="/user_profile?user_id=20209" > <span class="fna">Boris Zbarsky [:bzbarsky]</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-209"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-209" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c209">Comment 209</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-10-02 14:07 PDT" data-time="1033592841">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-209">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-209" data-comment-id="1571592">All I meant was to replace &quot;if the appropriate bit above is set&quot; with &quot;if the
appropriate bit in aDecorations is set&quot;.</pre></div><div class="change-set" id="c210"><div class="comment" data-id="1575916" data-no="210"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-210" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_20209" id="a119391410_22237"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_20209" id="a119391410_22237"><a class="email " href="/user_profile?user_id=20209" > <span class="fna">Boris Zbarsky [:bzbarsky]</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-210"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-210" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c210">Comment 210</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-10-05 18:46 PDT" data-time="1033868761">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-210">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-210" data-comment-id="1575916">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=101439" name="attach_101439" title="Latest patch, including (most of) Boris Zbarsky comments">attachment 101439</a> <a href="/attachment.cgi?id=101439&amp;action=edit" title="Latest patch, including (most of) Boris Zbarsky comments">[details]</a> <a href="/attachment.cgi?id=101439&amp;action=diff" title="Latest patch, including (most of) Boris Zbarsky comments">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1777&amp;attachment=101439'>[review]</a>
Latest patch, including (most of) Boris Zbarsky comments

sr=bzbarsky, but please do make that comment clarification change...</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=101439&amp;action=edit"
           title="Latest patch, including (most of) Boris Zbarsky comments"
           class=""
        >Attachment #101439</a> -
        Flags: superreview+</div></div></div><div class="change-set" id="c211"><div class="comment" data-id="1576061" data-no="211"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-211" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a119391410_22237"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a119391410_22237"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-211"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-211" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c211">Comment 211</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-10-05 23:37 PDT" data-time="1033886243">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-211">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-101870"
         class="attachment patch obsolete"
         data-id="101870" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1777-3.patch">
      <meta itemprop="contentSize" content="37229">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=101870">
          <a class="link" href="attachment.cgi?id=101870&amp;action=diff">
        <span id="att-101870-description" itemprop="description">Latest patch including the last of Boris Zbarsky comments.</span></a> (obsolete)
        — <a href="attachment.cgi?id=101870&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=101870">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-211" data-comment-id="1576061">But of course. Your wish is my command :O) Thanks for spelling that last one
out....</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=101439&amp;action=edit"
           title="Latest patch, including (most of) Boris Zbarsky comments"
           class=""
        >Attachment #101439</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c212"><div class="comment" data-id="1576062" data-no="212"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-212" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a119391410_22237"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a119391410_22237"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-212"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-212" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c212">Comment 212</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-10-05 23:38 PDT" data-time="1033886320">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-212">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-101871"
         class="attachment patch obsolete"
         data-id="101871" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1777-3w.patch">
      <meta itemprop="contentSize" content="33967">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=101871">
          <a class="link" href="attachment.cgi?id=101871&amp;action=diff">
        <span id="att-101871-description" itemprop="description">as  101870, but without whitespace diffs. *For review only*.</span></a> (obsolete)
        — <a href="attachment.cgi?id=101871&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=101871">Splinter Review</a>
      </div>
    </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=101440&amp;action=edit"
           title="as  101439, but without whitespace diffs. *For review only*."
           class=""
        >Attachment #101440</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c213"><div class="comment" data-id="1576066" data-no="213"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-213" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_15223" id="a119391410_22237"><img src="https://secure.gravatar.com/avatar/e4a0566b254d665aa267b7874726fbbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_15223" id="a119391410_22237"><a class="email " href="/user_profile?user_id=15223" > <span class="fna">timeless</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-213"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-213" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c213">Comment 213</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-10-05 23:49 PDT" data-time="1033886974">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-213">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-213" data-comment-id="1576066">err, i messed up when i commented, this is what i was going for, i think...
+   *  &#64;param aUnderColor   The color of the underline if the appropriate
+   *                       bit in aDecoration is set. It is 
+   *                       undefined otherwise.
+   *  &#64;param aOverColor    The color of the overline if the appropriate
+   *                       bit in aDecoration is set. It is 
+   *                       undefined otherwise.
+   *  &#64;param aStrikeColor  The color of the strike-through if the 
+   *                       appropriate bit in aDecoration is set. It is 
+   *                       undefined otherwise.</pre></div><div class="change-set" id="c214"><div class="comment" data-id="1576072" data-no="214"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-214" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a119391410_22237"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a119391410_22237"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-214"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-214" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c214">Comment 214</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-10-05 23:57 PDT" data-time="1033887468">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-214">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-214" data-comment-id="1576072">This is how it looks in the latests patch. It may be early in the morning, but
it looks identical to me :-D (Admittedly, it's minutes since I change it :o) )

   *  &#64;param aUnderColor   The color of underline if the appropriate bit 
   *                       in aDecoration above is set. It is undefined 
   *                       otherwise.
   *  &#64;param aOverColor    The color of overline if the appropriate bit 
   *                       in aDecoration above is set. It is undefined 
   *                       otherwise.
   *  &#64;param aStrikeColor  The color of strike-through if the appropriate bit 
   *                       in aDecoration above is set. It is undefined 
   *                       otherwise.
</pre></div><div class="change-set" id="a121112256_20209"><div class="change" id="aa121112256_20209">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_20209" id="a121112256_20209"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_20209" id="a121112256_20209"><a class="email " href="/user_profile?user_id=20209" > <span class="fna">Boris Zbarsky [:bzbarsky]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a121112256_20209"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a121112256_20209">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a121112256_20209">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-10-06 11:01 PDT" data-time="1033927316">18 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=101870&amp;action=edit"
           title="Latest patch including the last of Boris Zbarsky comments."
           class=""
        >Attachment #101870</a> -
        Flags: superreview+</div></div></div><div class="change-set" id="c215"><div class="comment" data-id="1589578" data-no="215"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-215" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a121112256_20209"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a121112256_20209"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-215"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-215" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c215">Comment 215</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-10-15 11:09 PDT" data-time="1034705348">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-215">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-102946"
         class="attachment patch obsolete"
         data-id="102946" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1777-5.patch">
      <meta itemprop="contentSize" content="36907">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=102946">
          <a class="link" href="attachment.cgi?id=102946&amp;action=diff">
        <span id="att-102946-description" itemprop="description">Merge conflicts resolved; textual nonsense removed</span></a> (obsolete)
        — <a href="attachment.cgi?id=102946&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=102946">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-215" data-comment-id="1589578">The patch for 

<a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - More use of already_AddRefed, please!"
   href="/show_bug.cgi?id=171808">Bug 171808</a>, r=jkeiser, sr=dbaron

caused merge conflicts with my patch, so I resolved them. This also gave me an
opportunity to correct a textual error pointed out by timeless (thanks!)

Whitespace-patch coming up.

Also, could I ask you to please not cut the part of the patch where the file
you're commenting on is mentioned? The patch is big enough that I don't care to
hunt for the correct file. Thanks!</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=101870&amp;action=edit"
           title="Latest patch including the last of Boris Zbarsky comments."
           class=""
        >Attachment #101870</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=101871&amp;action=edit"
           title="as  101870, but without whitespace diffs. *For review only*."
           class=""
        >Attachment #101871</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c216"><div class="comment" data-id="1589581" data-no="216"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-216" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a121112256_20209"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a121112256_20209"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-216"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-216" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c216">Comment 216</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-10-15 11:10 PDT" data-time="1034705415">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-216">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-102947"
         class="attachment patch obsolete"
         data-id="102947" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1777-5w.patch">
      <meta itemprop="contentSize" content="33842">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=102947">
          <a class="link" href="attachment.cgi?id=102947&amp;action=diff">
        <span id="att-102947-description" itemprop="description">Whitespace-less patch. For review only.</span></a> (obsolete)
        — <a href="attachment.cgi?id=102947&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=102947">Splinter Review</a>
      </div>
    </div></div><div class="change-set" id="c217"><div class="comment" data-id="1589860" data-no="217"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-217" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_15661" id="a121112256_20209"><img src="https://secure.gravatar.com/avatar/80ef9e8cf2739567a75dbd94e6eb124a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_15661" id="a121112256_20209"><a class="email " href="/user_profile?user_id=15661" > <span class="fna">Christian :Biesinger (don't email me, ping me on IRC)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-217"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-217" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c217">Comment 217</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-10-15 14:08 PDT" data-time="1034716098">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-217">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-217" data-comment-id="1589860">nsBlockFrame.cpp:
+  // This for is standards mode only

shouldn't that be &quot;This is for standards mode only&quot;?</pre></div><div class="change-set" id="c218"><div class="comment" data-id="1607728" data-no="218"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-218" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_20209" id="a121112256_20209"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_20209" id="a121112256_20209"><a class="email " href="/user_profile?user_id=20209" > <span class="fna">Boris Zbarsky [:bzbarsky]</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-218"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-218" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c218">Comment 218</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-10-25 23:20 PDT" data-time="1035613249">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-218">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-218" data-comment-id="1607728">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=102946" name="attach_102946" title="Merge conflicts resolved; textual nonsense removed">attachment 102946</a> <a href="/attachment.cgi?id=102946&amp;action=edit" title="Merge conflicts resolved; textual nonsense removed">[details]</a> <a href="/attachment.cgi?id=102946&amp;action=diff" title="Merge conflicts resolved; textual nonsense removed">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1777&amp;attachment=102946'>[review]</a>
Merge conflicts resolved; textual nonsense removed

sr=bzbarsky still applies...</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=102946&amp;action=edit"
           title="Merge conflicts resolved; textual nonsense removed"
           class=""
        >Attachment #102946</a> -
        Flags: superreview+</div></div></div><div class="change-set" id="a123378408_30078"><div class="change" id="aa123378408_30078">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_30078" id="a123378408_30078"><img src="https://secure.gravatar.com/avatar/29c87e93a312e15101a96780da0a263e?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_30078" id="a123378408_30078"><a class="email " href="/user_profile?user_id=30078" > <span class="fna">Andrew Hagen</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a123378408_30078"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a123378408_30078">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a123378408_30078">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-11-01 15:31 PST" data-time="1036193468">18 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=mozilla1.0.1&amp;resolution=---">mozilla1.0.1</a> &rarr; <a href="/buglist.cgi?keywords=mozilla1.0.2&amp;resolution=---">mozilla1.0.2</a>, 
          
            <a href="/buglist.cgi?keywords=mozilla1.3&amp;resolution=---">mozilla1.3</a></div></div></div><div class="change-set" id="a123515938_15223"><div class="change" id="aa123515938_15223">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_15223" id="a123515938_15223"><img src="https://secure.gravatar.com/avatar/e4a0566b254d665aa267b7874726fbbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_15223" id="a123515938_15223"><a class="email " href="/user_profile?user_id=15223" > <span class="fna">timeless</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a123515938_15223"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a123515938_15223">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a123515938_15223">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-11-03 05:43 PST" data-time="1036330998">18 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Component: Layout &rarr; Layout: Fonts and Text</div></div></div><div class="change-set" id="a124238574_3881"><div class="change" id="aa124238574_3881">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a124238574_3881"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_3881" id="a124238574_3881"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a124238574_3881"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a124238574_3881">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a124238574_3881">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-11-11 14:27 PST" data-time="1037053634">18 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=102946&amp;action=edit"
           title="Merge conflicts resolved; textual nonsense removed"
           class=""
        >Attachment #102946</a> -
        Flags: review?(dbaron)</div></div></div><div class="change-set" id="c219"><div class="comment" data-id="1640281" data-no="219"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-219" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a124238574_3881"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a124238574_3881"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-219"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-219" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c219">Comment 219</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-11-18 09:00 PST" data-time="1037638845">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-219">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-219" data-comment-id="1640281">dbaron: Could you take this, fix the problems you have with it, and check it in?
It has sr=bz and is just waiting for your review. Cheers!</pre></div><div class="change-set" id="a125095268_4054"><div class="change" id="aa125095268_4054">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a125095268_4054"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_4054" id="a125095268_4054"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a125095268_4054"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a125095268_4054">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a125095268_4054">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-11-21 12:25 PST" data-time="1037910328">18 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Blocks: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - small-caps are drawn in underline colour"
   href="/show_bug.cgi?id=181336">181336</a></div></div></div><div class="change-set" id="c220"><div class="comment" data-id="1666094" data-no="220"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-220" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a125095268_4054"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a125095268_4054"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-220"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-220" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c220">Comment 220</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-12-06 05:22 PST" data-time="1039180937">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-220">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-108484"
         class="attachment"
         data-id="108484" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="text-inputs.html">
      <meta itemprop="contentSize" content="1384">
      <meta itemprop="encodingFormat" content="text/html">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=108484" itemprop="contentUrl">
        <span id="att-108484-description" itemprop="description">testcase for text-decoration on text inputs</span></a>
        — <a href="attachment.cgi?id=108484&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-220" data-comment-id="1666094">This tests 'text-decoration' on text inputs, for which a large chunk of code
was added in nsHTMLContainerFrame in the patch.  I replaced that code with two
single line changes to nsTextControlFrame.cpp (modifying DIV_STRING and
DIV_SINGLELINE_STRING) that cause the same results.  However, I question
whether those results are even correct and we need the changes at all.

(I have a bunch of other changes to the patch in my tree, but I've only gone
through one file so far).</pre></div><div class="change-set" id="c221"><div class="comment" data-id="1666814" data-no="221"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-221" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a125095268_4054"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a125095268_4054"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-221"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-221" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c221">Comment 221</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-12-06 12:51 PST" data-time="1039207872">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-221">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-108525"
         class="attachment patch"
         data-id="108525" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="1777.9.diff">
      <meta itemprop="contentSize" content="53283">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=108525">
          <a class="link" href="attachment.cgi?id=108525&amp;action=diff">
        <span id="att-108525-description" itemprop="description">patch, with dbaron's modifications</span></a>
        — <a href="attachment.cgi?id=108525&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1777&attachment=108525">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-221" data-comment-id="1666814">This is the previous patch, merged to the tip and with a significant number of
modifications I made.  (See Hixie's suggestion a few comments up.)

I have to run now, but I'll provide a description of the changes I made later
this evening.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=102946&amp;action=edit"
           title="Merge conflicts resolved; textual nonsense removed"
           class=""
        >Attachment #102946</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="a126392813_3881"><div class="change" id="aa126392813_3881">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a126392813_3881"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_3881" id="a126392813_3881"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a126392813_3881"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a126392813_3881">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a126392813_3881">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-12-06 12:51 PST" data-time="1039207873">18 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=102947&amp;action=edit"
           title="Whitespace-less patch. For review only."
           class=""
        >Attachment #102947</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c222"><div class="comment" data-id="1667868" data-no="222"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-222" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a126392813_3881"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a126392813_3881"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-222"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-222" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c222">Comment 222</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-12-07 12:48 PST" data-time="1039294082">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-222">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-222" data-comment-id="1667868">The modifications I made in <span class=""><a href="/attachment.cgi?id=108525" name="attach_108525" title="patch, with dbaron's modifications">attachment 108525</a> <a href="/attachment.cgi?id=108525&amp;action=edit" title="patch, with dbaron's modifications">[details]</a> <a href="/attachment.cgi?id=108525&amp;action=diff" title="patch, with dbaron's modifications">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1777&amp;attachment=108525'>[review]</a> (relative to <span class="bz_obsolete"><a href="/attachment.cgi?id=102946" name="attach_102946" title="Merge conflicts resolved; textual nonsense removed">attachment 102946</a> <a href="/attachment.cgi?id=102946&amp;action=edit" title="Merge conflicts resolved; textual nonsense removed">[details]</a> <a href="/attachment.cgi?id=102946&amp;action=diff" title="Merge conflicts resolved; textual nonsense removed">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1777&amp;attachment=102946'>[review]</a>) are:

Cleaned up whitespace (particularly extra blank lines and extra whitespace at
the end of lines) throughout.  Also made some indentation changes to new and
existing code.  I also removed many of the comments on end braces saying what
they were closing.

Renamed |HasTextFrameChild| to |HasTextFrameDescendant|.

Moved the declaration and use of the |styleContext| variable in
nsHTMLContainerFrame::GetTextDecorations down to where it can be different from
|mStyleContext|.

Added .get() to many places where |::GetStyleData| was used with an
nsCOMPtr&lt;nsIStyleContext&gt;, since otherwise we'll break IRIX and OS/2.

Removed the huge text inputs hack in nsHTMLContainerFrame::GetTextDecorations
and replaced it with a two line change to CSS in nsTextControlFrame.cpp.

Changed the loop in nsTextFrame::PaintTextDecorations from do-while to while,
added |useDecorations| variable to avoid repeated calculation of the same thing,
converted existing code to use typesafe |GetStyleData|.  I might have done some
other cleanup here that I've forgotten.

Fixed up spaces between parameters for function calls in nsTextFrame (and lots
of whitespace at end of line).

Changed the ascent stored on the line box to being relative to the top of the
line box (so that it's the ascent of the anonymous inline box for the block that
we don't actually create) rather than being relative to the parent block.

Refactored a number of paint methods significantly to reduce the duplicated code
in this patch:
 * Moved the stuff in nsHTMLContainerFrame::Paint that was specific to inline
   frames and canvas frame into paint methods on those frames (creating new one
   on inline frames)
 * In order to do this, I consolidated the background, border, and outline code
   into a nonvirtual member function of nsHTMLContainerFrame, |PaintSelf|.
   (I could probably do a bit more conversion to PaintSelf.)  Note that this
   makes one minor change, which is that nsHTMLContainerFrame's Paint method
   is now using nsIFrame::IsVisibleForPainting whereas it used to do the
   visibility check manually.  (There's a slight difference.)

Changed nsHTMLContainerFrame::PaintTextDecorations so that the caller passes in
the font metrics.  (This probably isn't worth it as an optimization, but it
really isn't any simpler the old way.)
 * I then moved the common pattern of painting underline and overline, painting
   children, and then painting line-through (strict mode text decorations only)
   into another new nonvirtual member function of nsHTMLContainerFrame,
   |PaintDecorationsAndChildren|.  This is called by Paint methods on
   nsInlineFrame and nsBlockFrame.</pre></div><div class="change-set" id="a126479075_3881"><div class="change" id="aa126479075_3881">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a126479075_3881"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_3881" id="a126479075_3881"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a126479075_3881"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a126479075_3881">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a126479075_3881">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-12-07 12:48 PST" data-time="1039294135">18 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=108525&amp;action=edit"
           title="patch, with dbaron's modifications"
           class=""
        >Attachment #108525</a> -
        Flags: superreview?(bzbarsky)</div></div></div><div class="change-set" id="a126479163_3881"><div class="change" id="aa126479163_3881">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a126479163_3881"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_3881" id="a126479163_3881"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a126479163_3881"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a126479163_3881">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a126479163_3881">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-12-07 12:50 PST" data-time="1039294223">18 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=102946&amp;action=edit"
           title="Merge conflicts resolved; textual nonsense removed"
           class=""
        >Attachment #102946</a> -
        Flags: <span class="activity-deleted">review?(dbaron)</span></div></div></div><div class="change-set" id="c223"><div class="comment" data-id="1669273" data-no="223"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-223" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a126479163_3881"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a126479163_3881"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-223"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-223" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c223">Comment 223</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-12-08 22:03 PST" data-time="1039413826">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-223">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-223" data-comment-id="1669273">It would be excellent if this could go into 1.3a to get some testing.</pre><div class="activity"><div class="change">Flags: blocking1.3a?</div></div></div><div class="change-set" id="c224"><div class="comment" data-id="1669276" data-no="224"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-224" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_20209" id="a126479163_3881"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_20209" id="a126479163_3881"><a class="email " href="/user_profile?user_id=20209" > <span class="fna">Boris Zbarsky [:bzbarsky]</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-224"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-224" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c224">Comment 224</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-12-08 22:06 PST" data-time="1039413967">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-224">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-224" data-comment-id="1669276">I have a final till about 1pm CST tomorrow... I can try to review right after that.</pre></div><div class="change-set" id="a126633638_3881"><div class="change" id="aa126633638_3881">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a126633638_3881"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_3881" id="a126633638_3881"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a126633638_3881"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a126633638_3881">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#a126633638_3881">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-12-09 07:44 PST" data-time="1039448698">18 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: blocking1.3a? &rarr; blocking1.3a-</div></div></div><div class="change-set" id="c225"><div class="comment" data-id="1669986" data-no="225"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-225" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22237" id="a126633638_3881"><img src="https://secure.gravatar.com/avatar/0db74aa70d584223507422f6d570ec91?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_22237" id="a126633638_3881"><a class="email disabled" href="/user_profile?user_id=22237" > <span class="fna">Esben Mose Hansen</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-225"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-225" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c225">Comment 225</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-12-09 10:15 PST" data-time="1039457745">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-225">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-225" data-comment-id="1669986">The changes look really cool, especially the bit about the special-handling for
input forms. 

Anyway, I consider this patch out of my hands now (i.e., I won't post any more
updates if the patch break.)</pre></div><div class="change-set" id="c226"><div class="comment" data-id="1670446" data-no="226"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-226" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_20209" id="a126633638_3881"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_20209" id="a126633638_3881"><a class="email " href="/user_profile?user_id=20209" > <span class="fna">Boris Zbarsky [:bzbarsky]</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-226"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-226" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c226">Comment 226</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-12-09 13:40 PST" data-time="1039470051">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-226">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-226" data-comment-id="1670446">Comment on <span class=""><a href="/attachment.cgi?id=108525" name="attach_108525" title="patch, with dbaron's modifications">attachment 108525</a> <a href="/attachment.cgi?id=108525&amp;action=edit" title="patch, with dbaron's modifications">[details]</a> <a href="/attachment.cgi?id=108525&amp;action=diff" title="patch, with dbaron's modifications">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1777&amp;attachment=108525'>[review]</a>
patch, with dbaron's modifications

<span class="quote">&gt; +      // XXXldb This is the wrong way to set |isPre|.</span >

Is there a bug on having a function on the style struct for that?  If not, we
should file one....

Nice cleanup.  ;)</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=108525&amp;action=edit"
           title="patch, with dbaron's modifications"
           class=""
        >Attachment #108525</a> -
        Flags: superreview?(bzbarsky) &rarr; superreview+</div></div></div><div class="change-set" id="c227"><div class="comment" data-id="1672163" data-no="227"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-227" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a126633638_3881"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a126633638_3881"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-227"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-227" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c227">Comment 227</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-12-10 12:14 PST" data-time="1039551242">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-227">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-227" data-comment-id="1672163">Filed <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - further refactoring of Paint methods"
   href="/show_bug.cgi?id=184702">bug 184702</a> (more Paint refactoring) and <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED WORKSFORME - Better way of setting |isPre| parameters."
   href="/show_bug.cgi?id=184703">bug 184703</a> (pre method on style
struct and fixing the XXX comment bz quoted above).</pre></div><div class="change-set" id="c228"><div class="comment" data-id="1672168" data-no="228"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-228" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a126633638_3881"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a126633638_3881"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-228"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-228" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c228">Comment 228</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-12-10 12:21 PST" data-time="1039551667">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-228">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-228" data-comment-id="1672168">Taking this bug so I remember to check it in.</pre><div class="activity"><div class="change">Assignee: esben &rarr; dbaron</div><div class="change">Status: ASSIGNED &rarr; NEW</div><div class="change">Whiteboard: [Hixie-P1][CSS1-5.4.3] (high profile: css1 test suite) underline not displayed properly across bold modifications [Hixie-B] &rarr; [patch][Hixie-P1][CSS1-5.4.3] (high profile: css1 test suite) underline not displayed properly across bold modifications [Hixie-B]</div></div></div><div class="change-set" id="c229"><div class="comment" data-id="1672872" data-no="229"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-229" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a126633638_3881"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a126633638_3881"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-229"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-229" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c229">Comment 229</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-12-10 19:52 PST" data-time="1039578756">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-229">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-229" data-comment-id="1672872">I removed the firstChildOrigin hack in nsBlockFrame::PaintTextDecorationLines
(and just used line-&gt;mBounds.x) since <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - nsLineBox always have mBounds.x == 0 (zero), even when the a short line is right aligned."
   href="/show_bug.cgi?id=145467">bug 145467</a> is fixed now.</pre></div><div class="change-set" id="c230"><div class="comment" data-id="1672886" data-no="230"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-230" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a126633638_3881"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a126633638_3881"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-230"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-230" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c230">Comment 230</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-12-10 20:03 PST" data-time="1039579389">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-230">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-230" data-comment-id="1672886">-&gt;esben, for credit</pre><div class="activity"><div class="change">Assignee: dbaron &rarr; esben</div></div></div><div class="change-set" id="c231"><div class="comment" data-id="1672889" data-no="231"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-231" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a126633638_3881"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a126633638_3881"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-231"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-231" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c231">Comment 231</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-12-10 20:04 PST" data-time="1039579461">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-231">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-231" data-comment-id="1672889">Fix checked in to trunk, 2002-12-10 20:00 PDT.  (That's *after* the 1.3alpha
release was tagged, so it won't be in 1.3alpha.)</pre><div class="activity"><div class="change">Status: NEW &rarr; RESOLVED</div><div class="change">Closed: <span class="rel-time" title="2002-12-10 20:04 PST" data-time="1039579461">18 years ago</span></div><div class="change">Resolution: --- &rarr; FIXED</div><div class="change">Target Milestone: --- &rarr; mozilla1.3beta</div></div></div><div class="change-set" id="c232"><div class="comment" data-id="1673103" data-no="232"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-232" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1069" id="a126633638_3881"><img src="https://secure.gravatar.com/avatar/44c5ebd5d937c79e6bea7f088578a463?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_1069" id="a126633638_3881"><a class="email " href="/user_profile?user_id=1069" > <span class="fna">Aleksey Nogin</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-232"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-232" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c232">Comment 232</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-12-11 01:08 PST" data-time="1039597730">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-232">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-232" data-comment-id="1673103">This commit have added a warning on Brad Tbox: 

+layout/html/base/src/nsTextFrame.cpp:1952
+ `nscoord baseline' might be used uninitialized in this function

Indeed the baseline variable declared on line 1952 (do not confuse it with the
one declared on line 1895) is *never* initialized at all, but is being used in
many places!

P.S. Per <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED WONTFIX - Turn uninitialized warnings into errors"
   href="/show_bug.cgi?id=179819">bug 179819</a> the &quot;uninitialized&quot; warnings ought to be treated as errors,
so I am reopening the bug.</pre><div class="activity"><div class="change">Status: RESOLVED &rarr; REOPENED</div><div class="change">Resolution: FIXED &rarr; ---</div></div></div><div class="change-set" id="c233"><div class="comment" data-id="1673263" data-no="233"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-233" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_20209" id="a126633638_3881"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_20209" id="a126633638_3881"><a class="email " href="/user_profile?user_id=20209" > <span class="fna">Boris Zbarsky [:bzbarsky]</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-233"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-233" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c233">Comment 233</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-12-11 04:37 PST" data-time="1039610276">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-233">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-233" data-comment-id="1673263">Doh.  

+          nscoord offset, size, baseline;

should be 

+          nscoord offset, size, baseline = mAscent;

no?</pre></div><div class="change-set" id="c234"><div class="comment" data-id="1673426" data-no="234"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-234" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a126633638_3881"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a126633638_3881"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-234"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-234" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c234">Comment 234</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-12-11 07:59 PST" data-time="1039622392">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-234">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-234" data-comment-id="1673426">Fixed.</pre><div class="activity"><div class="change">Status: REOPENED &rarr; RESOLVED</div><div class="change">Closed: <span class="rel-time" title="2002-12-10 20:04 PST" data-time="1039579461">18 years ago</span> &rarr; <span class="rel-time" title="2002-12-11 07:59 PST" data-time="1039622392">18 years ago</span></div><div class="change">Resolution: --- &rarr; FIXED</div></div></div><div class="change-set" id="c235"><div class="comment" data-id="1674383" data-no="235"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-235" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4054" id="a126633638_3881"><img src="https://secure.gravatar.com/avatar/8393b8cb5ce8371dcfe93f5d4f76e90a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4054" id="a126633638_3881"><a class="email " href="/user_profile?user_id=4054" > <span class="fna">Hixie (not reading bugmail)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-235"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-235" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c235">Comment 235</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-12-12 00:41 PST" data-time="1039682498">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-235">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-235" data-comment-id="1674383">VERIFIED.

Esben: If I'm ever in Copenhagen, I'll buy you dinner. :-)</pre><div class="activity"><div class="change">Status: RESOLVED &rarr; VERIFIED</div></div></div><div class="change-set" id="c236"><div class="comment" data-id="1679059" data-no="236"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-236" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_3881" id="a126633638_3881"><img src="https://secure.gravatar.com/avatar/0a32391d55cfa63276f87eb9819dfbd0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_3881" id="a126633638_3881"><a class="email " href="/user_profile?user_id=3881" > <span class="fna">David Baron :dbaron: 🏴󠁵󠁳󠁣󠁡󠁿 ⌚UTC-8</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-236"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-236" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c236">Comment 236</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2002-12-16 07:39 PST" data-time="1040053152">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-236">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-236" data-comment-id="1679059">This caused regression <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - visibility:hidden links' underline displayed"
   href="/show_bug.cgi?id=185581">bug 185581</a> (which was simple to fix).</pre></div><div class="change-set" id="c237"><div class="comment" data-id="1845094" data-no="237"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-237" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_17519" id="a126633638_3881"><img src="https://secure.gravatar.com/avatar/0558dbd4c30646e4e376322697a118d2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_17519" id="a126633638_3881"><a class="email disabled" href="/user_profile?user_id=17519" > <span class="fna">Koike Kazuhiko</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-237"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-237" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c237">Comment 237</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2003-05-10 02:18 PDT" data-time="1052558298">18 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-237">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-237" data-comment-id="1845094">*** <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED DUPLICATE - Mis-matched fonts have poor underlining result"
   href="/show_bug.cgi?id=44232">Bug 44232</a> has been marked as a duplicate of this bug. ***</pre></div><div class="change-set" id="c238"><div class="comment" data-id="2379225" data-no="238"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-238" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_72978" id="a126633638_3881"><img src="https://secure.gravatar.com/avatar/dc22086628dabf2c3d58d59a157bb92c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_72978" id="a126633638_3881"><a class="email disabled" href="/user_profile?user_id=72978" > <span class="fna">Caleb</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-238"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-238" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c238">Comment 238</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2005-01-07 07:26 PST" data-time="1105111601">16 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-238">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-238" data-comment-id="2379225">How come is this bug marked VERIFIED FIXED when the first testcase can still be
reproduced in the latest moz 1.8a5 ?

Will this problem remain in mozilla FOREVER ???? 

It is really ugly and all the other browsers treat it correctly (I'm talking
about the first/second testcase).

I'm tired of seeing that thick underline :(

Please fix it!</pre></div><div class="change-set" id="c239"><div class="comment" data-id="2379248" data-no="239"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-239" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_20209" id="a126633638_3881"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_20209" id="a126633638_3881"><a class="email " href="/user_profile?user_id=20209" > <span class="fna">Boris Zbarsky [:bzbarsky]</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-239"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-239" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c239">Comment 239</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2005-01-07 07:55 PST" data-time="1105113357">16 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-239">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-239" data-comment-id="2379248">The first two testcases in this bug are in quirks mode.  In quirks mode, we do
quirky, more-compatible-with-IE decoration painting.  Please test in standards
mode to see the fix for this bug.</pre></div><div class="change-set" id="c240"><div class="comment" data-id="2379303" data-no="240"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-240" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_72978" id="a126633638_3881"><img src="https://secure.gravatar.com/avatar/dc22086628dabf2c3d58d59a157bb92c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_72978" id="a126633638_3881"><a class="email disabled" href="/user_profile?user_id=72978" > <span class="fna">Caleb</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-240"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-240" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c240">Comment 240</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2005-01-07 08:43 PST" data-time="1105116231">16 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-240">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-240" data-comment-id="2379303">Oh, that's very interesting, I have tested it and it works perfectly in
standards mode.

Will this be fixed in quirks mode then? Since most pages do not specify a doctype.

This bug has been bugging me for years since I see its effects on pages that I
regularly visit, like Google.com for example.</pre></div><div class="change-set" id="c241"><div class="comment" data-id="2379316" data-no="241"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-241" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_20209" id="a126633638_3881"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_20209" id="a126633638_3881"><a class="email " href="/user_profile?user_id=20209" > <span class="fna">Boris Zbarsky [:bzbarsky]</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-241"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-241" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c241">Comment 241</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2005-01-07 09:00 PST" data-time="1105117212">16 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-241">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-241" data-comment-id="2379316"><span class="quote">&gt; Will this be fixed in quirks mode then? </span >

No, because doing full-standards painting treats colors and such very
differently from the way most pages expect them to be treated.</pre></div><div class="change-set" id="c242"><div class="comment" data-id="3089588" data-no="242"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-242" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_14006" id="a126633638_3881"><img src="https://secure.gravatar.com/avatar/4307f29a5e955ad308b790df81138d5d?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_14006" id="a126633638_3881"><a class="email " href="/user_profile?user_id=14006" > <span class="fna">neil&#64;parkwaycc.co.uk</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-242"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-242" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c242">Comment 242</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2007-01-22 06:51 PST" data-time="1169477484">14 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-242">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-242" data-comment-id="3089588">Comment on <span class=""><a href="/attachment.cgi?id=108525" name="attach_108525" title="patch, with dbaron's modifications">attachment 108525</a> <a href="/attachment.cgi?id=108525&amp;action=edit" title="patch, with dbaron's modifications">[details]</a> <a href="/attachment.cgi?id=108525&amp;action=diff" title="patch, with dbaron's modifications">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1777&amp;attachment=108525'>[review]</a>
patch, with dbaron's modifications

<span class="quote">&gt;+      if (!styleDisplay-&gt;IsBlockLevel()) {
&gt;+        // If an inline frame is discovered while walking up the tree,
&gt;+        // we should stop according to CSS3 draft. CSS2 is rather vague
&gt;+        // about this.
&gt;+        break;
&gt;+      }</span >
This seems to have broken painting of decorations on &lt;label&gt; elements with child text nodes i.e. &lt;xul:label style=&quot;color: blue; text-decoration: underline;&quot;&gt;Click here&lt;/xul:label&gt;. (labels aren't blocks). Bug coming up.</pre></div><div class="change-set" id="c243"><div class="comment" data-id="3089606" data-no="243"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-243" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_14006" id="a126633638_3881"><img src="https://secure.gravatar.com/avatar/4307f29a5e955ad308b790df81138d5d?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_14006" id="a126633638_3881"><a class="email " href="/user_profile?user_id=14006" > <span class="fna">neil&#64;parkwaycc.co.uk</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-243"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-243" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c243">Comment 243</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2007-01-22 07:30 PST" data-time="1169479858">14 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-243">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-243" data-comment-id="3089606">I don't see the issue on branch, so maybe this bug isn't directly responsible; fallout from the paint refactoring perhaps?</pre></div><div class="change-set" id="c244"><div class="comment" data-id="3089630" data-no="244"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-244" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_20209" id="a126633638_3881"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_20209" id="a126633638_3881"><a class="email " href="/user_profile?user_id=20209" > <span class="fna">Boris Zbarsky [:bzbarsky]</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-244"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-244" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1777#c244">Comment 244</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2007-01-22 07:56 PST" data-time="1169481384">14 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-244">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-244" data-comment-id="3089630">The quote in <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - [TEXT] 'text-decoration' should not be drawn by children (underline) [INLINE]"
   href="/show_bug.cgi?id=1777#c242">comment 242</a> is for the case when a block-level container is asked to paint its decorations.  All that check does is make block-inside-inline situations not go up to the inline looking for decorations.

So in your case, if you have a block somewhere inside the label it could be an issue...</pre></div><div id="new-comment-notice">
          You need to <a href="/show_bug.cgi?id=1777&amp;GoAheadAndLogIn=1">log in</a>
          before you can comment on or make changes to this bug.
        </div>



<div id="bottom-actions">
  <div id="bottom-right-actions">
    <button type="button" id="top-btn" class="secondary" aria-label="Go to Page Top">Top &uarr;</button>
  </div>
</div></div> 
</main> 
</div> 


</body>
</html>