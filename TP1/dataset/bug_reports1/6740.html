<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
<meta property="og:type" content="website">
<meta property="og:title" content="6740 - regression:crashing when displaying messages">
<meta property="og:url" content="https://bugzilla.mozilla.org/show_bug.cgi?id=6740">
<meta property="og:description"
      content="VERIFIED (nhottanscp) in MailNews Core - Backend. Last updated 2008-07-31.">
<meta name="twitter:label1" value="Type">
<meta name="twitter:data1" value="defect">
<meta name="twitter:label2" value="Priority">
<meta name="twitter:data2" value="P1">

    <meta name="viewport" content="width=1024">
    <meta name="color-scheme" content="dark light">
    <meta name="generator" content="Bugzilla 20200805.1">
    <meta name="bugzilla-global" content="dummy"
        id="bugzilla-global" data-bugzilla="{&quot;api_token&quot;:&quot;&quot;,&quot;config&quot;:{&quot;basepath&quot;:&quot;\/&quot;},&quot;constant&quot;:{&quot;COMMENT_COLS&quot;:80},&quot;param&quot;:{&quot;maxattachmentsize&quot;:&quot;10240&quot;,&quot;maxusermatches&quot;:&quot;50&quot;,&quot;splinter_base&quot;:&quot;\/page.cgi?id=splinter.html&amp;ignore=\/&quot;},&quot;string&quot;:{&quot;bug_type_required&quot;:&quot;You must select a Type for this bug&quot;,&quot;component_required&quot;:&quot;You must select a Component for this bug&quot;,&quot;description_required&quot;:&quot;You must enter a Description for this bug&quot;,&quot;short_desc_required&quot;:&quot;You must enter a Summary for this bug&quot;,&quot;version_required&quot;:&quot;You must select a Version for this bug&quot;},&quot;user&quot;:{&quot;is_new&quot;:1,&quot;login&quot;:&quot;&quot;}}">
    <title>6740 - regression:crashing when displaying messages</title>

<link rel="Top" href="/">

  


  
    <link rel="Show" title="Dependency Tree"
          href="/showdependencytree.cgi?id=6740&amp;hide_resolved=1">
      <link rel="Show" title="Dependency Graph"
            href="/showdependencygraph.cgi?id=6740">

      <link rel="Show" title="Bug Activity"
            href="/show_activity.cgi?id=6740">

<link href="https://bugzilla.mozilla.org/static/v20200805.1/skins/yui.css" rel="stylesheet" type="text/css"><link href="https://bugzilla.mozilla.org/static/v20200805.1/skins/standard/global.css" rel="stylesheet" type="text/css"><link href="https://bugzilla.mozilla.org/static/v20200805.1/extensions/BugModal/web/bug_modal.css" rel="stylesheet" type="text/css"><link href="https://bugzilla.mozilla.org/static/v20200805.1/js/jquery/plugins/contextMenu/contextMenu.css" rel="stylesheet" type="text/css"><link href="https://bugzilla.mozilla.org/static/v20200805.1/extensions/BMO/web/styles/bug_modal.css" rel="stylesheet" type="text/css"><link href="https://bugzilla.mozilla.org/static/v20200805.1/extensions/EditComments/web/styles/inline-editor.css" rel="stylesheet" type="text/css"><link href="https://bugzilla.mozilla.org/static/v20200805.1/js/jquery/ui/jquery-ui-min.css" rel="stylesheet" type="text/css"><link href="https://bugzilla.mozilla.org/static/v20200805.1/js/jquery/ui/jquery-ui-structure-min.css" rel="stylesheet" type="text/css"><link href="https://bugzilla.mozilla.org/static/v20200805.1/js/jquery/ui/jquery-ui-theme-min.css" rel="stylesheet" type="text/css"><link href="https://bugzilla.mozilla.org/static/v20200805.1/skins/lib/prism.css" rel="stylesheet" type="text/css"><link href="https://bugzilla.mozilla.org/static/v20200805.1/extensions/Needinfo/web/styles/needinfo.css" rel="stylesheet" type="text/css"><link href="https://bugzilla.mozilla.org/static/v20200805.1/extensions/Review/web/styles/badge.css" rel="stylesheet" type="text/css">



    
<script nonce="Buis02i6c9Gii8QPNHYozqY39AlVnYe3yfGzY22l7Z67arUU" src="https://bugzilla.mozilla.org/static/v20200805.1/js/jquery/jquery-min.js"></script><script nonce="Buis02i6c9Gii8QPNHYozqY39AlVnYe3yfGzY22l7Z67arUU" src="https://bugzilla.mozilla.org/static/v20200805.1/js/jquery/ui/jquery-ui-min.js"></script><script nonce="Buis02i6c9Gii8QPNHYozqY39AlVnYe3yfGzY22l7Z67arUU" src="https://bugzilla.mozilla.org/static/v20200805.1/js/yui.js"></script><script nonce="Buis02i6c9Gii8QPNHYozqY39AlVnYe3yfGzY22l7Z67arUU" src="https://bugzilla.mozilla.org/static/v20200805.1/js/jquery/plugins/contextMenu/contextMenu-min.js"></script><script nonce="Buis02i6c9Gii8QPNHYozqY39AlVnYe3yfGzY22l7Z67arUU" src="https://bugzilla.mozilla.org/static/v20200805.1/js/jquery/plugins/devbridgeAutocomplete/devbridgeAutocomplete-min.js"></script><script nonce="Buis02i6c9Gii8QPNHYozqY39AlVnYe3yfGzY22l7Z67arUU" src="https://bugzilla.mozilla.org/static/v20200805.1/js/global.js"></script><script nonce="Buis02i6c9Gii8QPNHYozqY39AlVnYe3yfGzY22l7Z67arUU" src="https://bugzilla.mozilla.org/static/v20200805.1/js/util.js"></script><script nonce="Buis02i6c9Gii8QPNHYozqY39AlVnYe3yfGzY22l7Z67arUU" src="https://bugzilla.mozilla.org/static/v20200805.1/js/dropdown.js"></script>

      <script nonce="Buis02i6c9Gii8QPNHYozqY39AlVnYe3yfGzY22l7Z67arUU">
          YAHOO.namespace('bugzilla');
          if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
              YAHOO.util.Event._simpleRemove(window, "unload",
                                             YAHOO.util.Event._unload);
          }BUGZILLA.value_descs = JSON.parse('{\"bug_status\":{},\"resolution\":{\"\":\"---\"}}');

  
    var tracking_flags_str = "{\"comments\":{\"cf_tracking_firefox_relnote\":{\"?\":\"Release Note Request (optional, but appreciated)\\n[Why is this notable]:\\n[Affects Firefox for Android]:\\n[Suggested wording]:\\n[Links (documentation, blog post, etc)]:\"},\"cf_tracking_firefox_sumo\":{\"none-needed\":\"Release Note Request (optional, but appreciated)\\n[Why is this notable]:\\n[Affects Firefox for Android]:\\n[Suggested wording]:\\n[Links (documentation, blog post, etc)]:\"}},\"types\":[\"tracking\"],\"flags\":{\"tracking\":{\"cf_tracking_thunderbird_82\":\"---\",\"cf_status_thunderbird_esr78\":\"---\",\"cf_tracking_firefox_relnote\":\"---\",\"cf_status_thunderbird_80\":\"---\",\"cf_tracking_seamonkey257esr\":\"---\",\"cf_status_seamonkey257esr\":\"---\",\"cf_tracking_thunderbird_esr78\":\"---\",\"cf_status_thunderbird_81\":\"---\",\"cf_tracking_thunderbird_81\":\"---\",\"cf_status_seamonkey253\":\"---\",\"cf_tracking_thunderbird_80\":\"---\",\"cf_status_thunderbird_esr68\":\"---\",\"cf_status_thunderbird_82\":\"---\",\"cf_tracking_thunderbird_esr68\":\"---\",\"cf_tracking_seamonkey253\":\"---\"},\"project\":{\"cf_tracking_firefox_sumo\":\"---\"}}}";
    var TrackingFlags = $.parseJSON(tracking_flags_str);

  

  
  BUGZILLA.bug_id = 6740;
  BUGZILLA.bug_title = '6740 - regression:crashing when displaying messages';
  BUGZILLA.bug_summary = 'regression:crashing when displaying messages';
  BUGZILLA.bug_url = 'https:\/\/bugzilla.mozilla.org\/show_bug.cgi?id=6740';
  BUGZILLA.bug_keywords = '',
  BUGZILLA.user = {
    id: 0,
    login: '',
    is_insider: false,
    is_timetracker: false,
    can_tag: false,
    timezone: 'America\/Los_Angeles',
    settings: {
      quote_replies: 'quoted_reply',
      zoom_textareas: true,
      remember_collapsed: true,
      inline_attachments: true,
      autosize_comments: false
    }
  };

  BUGZILLA.bug_secure = false;
      </script>
<script nonce="Buis02i6c9Gii8QPNHYozqY39AlVnYe3yfGzY22l7Z67arUU" src="https://bugzilla.mozilla.org/static/v20200805.1/extensions/BugModal/web/autosize.min.js"></script><script nonce="Buis02i6c9Gii8QPNHYozqY39AlVnYe3yfGzY22l7Z67arUU" src="https://bugzilla.mozilla.org/static/v20200805.1/extensions/ProdCompSearch/web/js/prod_comp_search.js"></script><script nonce="Buis02i6c9Gii8QPNHYozqY39AlVnYe3yfGzY22l7Z67arUU" src="https://bugzilla.mozilla.org/static/v20200805.1/extensions/BugModal/web/bug_modal.js"></script><script nonce="Buis02i6c9Gii8QPNHYozqY39AlVnYe3yfGzY22l7Z67arUU" src="https://bugzilla.mozilla.org/static/v20200805.1/extensions/BugModal/web/comments.js"></script><script nonce="Buis02i6c9Gii8QPNHYozqY39AlVnYe3yfGzY22l7Z67arUU" src="https://bugzilla.mozilla.org/static/v20200805.1/extensions/ComponentWatching/web/js/overlay.js"></script><script nonce="Buis02i6c9Gii8QPNHYozqY39AlVnYe3yfGzY22l7Z67arUU" src="https://bugzilla.mozilla.org/static/v20200805.1/js/bugzilla-readable-status-min.js"></script><script nonce="Buis02i6c9Gii8QPNHYozqY39AlVnYe3yfGzY22l7Z67arUU" src="https://bugzilla.mozilla.org/static/v20200805.1/js/field.js"></script><script nonce="Buis02i6c9Gii8QPNHYozqY39AlVnYe3yfGzY22l7Z67arUU" src="https://bugzilla.mozilla.org/static/v20200805.1/js/comments.js"></script><script nonce="Buis02i6c9Gii8QPNHYozqY39AlVnYe3yfGzY22l7Z67arUU" src="https://bugzilla.mozilla.org/static/v20200805.1/extensions/TrackingFlags/web/js/flags.js"></script><script nonce="Buis02i6c9Gii8QPNHYozqY39AlVnYe3yfGzY22l7Z67arUU" src="https://bugzilla.mozilla.org/static/v20200805.1/extensions/BMO/web/js/firefox-crash-table.js"></script><script nonce="Buis02i6c9Gii8QPNHYozqY39AlVnYe3yfGzY22l7Z67arUU" src="https://bugzilla.mozilla.org/static/v20200805.1/js/lib/prism.js"></script><script nonce="Buis02i6c9Gii8QPNHYozqY39AlVnYe3yfGzY22l7Z67arUU" src="https://bugzilla.mozilla.org/static/v20200805.1/extensions/GoogleAnalytics/web/js/analytics.js"></script><script nonce="Buis02i6c9Gii8QPNHYozqY39AlVnYe3yfGzY22l7Z67arUU" src="https://bugzilla.mozilla.org/static/v20200805.1/js/lib/md5.min.js"></script><script nonce="Buis02i6c9Gii8QPNHYozqY39AlVnYe3yfGzY22l7Z67arUU" src="https://bugzilla.mozilla.org/static/v20200805.1/extensions/Review/web/js/badge.js"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla@Mozilla" href="/search_plugin.cgi"><link rel="shortcut icon" href="/extensions/BMO/web/images/favicon.ico">
<link rel="canonical" href="https://bugzilla.mozilla.org/show_bug.cgi?id=6740">
<link rel="shorturl" href="https://bugzilla.mozilla.org/6740"><meta name="google-analytics" content="UA-36116321-3" data-location="https://bugzilla.mozilla.org/bug/show-modal" data-title="6740 - regression:crashing when displaying messages">
<script async src="https://www.google-analytics.com/analytics.js"></script><meta name="robots" content="noarchive">
  </head>



  <body
        class="bugzilla-mozilla-org
               skin-standard bug_modal yui-skin-sam">



<div id="wrapper">

<aside id="message-container" role="complementary">
  <noscript>
    <div class="noscript">
      <div class="inner">
        <p>Please enable JavaScript in your browser to use all the features on this site.</p>
      </div>
    </div>
  </noscript>
</aside>

<header id="header" role="banner">
  <div class="inner">
    <h1 id="header-title" class="title"><a href="https://bugzilla.mozilla.org/home" title="Go to home page">Bugzilla</a></h1>
    <form role="search" id="header-search" class="quicksearch" action="/buglist.cgi" data-no-csrf>
      <section class="searchbox-outer dropdown" role="combobox" aria-expanded="false" aria-haspopup="listbox"
               aria-labelledby="header-search-label" aria-owns="header-search-dropdown">
        <h2 id="header-search-label">Quick Search</h2>
        <span class="icon" aria-hidden="true"></span>
        <input role="searchbox" id="quicksearch_top" class="dropdown-button" name="quicksearch" autocomplete="off"
               value="" placeholder="Search Bugs"
               title="Enter a bug number or some search terms" aria-controls="header-search-dropdown"
               aria-label="Quick Search"><div id="header-search-dropdown" class="dropdown-content right" role="listbox" style="display: none;">
  <div id="header-search-dropdown-wrapper">
  </div>
</div>
      </section>
    </form>
    <nav id="header-nav">
      <ul class="links">
        <li class="link-browse">
          <a href="/describecomponents.cgi" title="Browse bugs by component">
            <span class="icon" aria-hidden="true"></span>
            <span class="label">Browse</span>
          </a>
        </li>
        <li class="link-search">
          <a href="/query.cgi?format=advanced" title="Search bugs using various criteria">
            <span class="icon" aria-hidden="true"></span>
            <span class="label">Advanced Search</span>
          </a>
        </li>
      </ul>
      <div class="dropdown">
        <button type="button" id="header-tools-menu-button" class="dropdown-button minor" title="More tools…"
                aria-label="More tools…" aria-expanded="false" aria-haspopup="true" aria-controls="header-tools-menu">
          <span class="icon" aria-hidden="true"></span>
        </button>
        <ul class="dropdown-content left" id="header-tools-menu" role="menu" style="display:none;">
          <li role="presentation">
            <a href="/report.cgi" role="menuitem" tabindex="-1">Reports</a>
          </li>
            <li role="separator"></li>
            <li role="presentation">
              <a href="https://bmo.readthedocs.io/en/latest/" role="menuitem" tabindex="-1">Documentation</a>
            </li>
        </ul>
      </div>
    </nav>
      <ul id="header-login" class="links">
          <li id="moz_new_account_container_top"><a href="/createaccount.cgi">New Account</a></li><li id="mini_login_container_top">
  <a id="login_link_top" href="/show_bug.cgi?id=6740&amp;GoAheadAndLogIn=1"
     class='show_mini_login_form' data-qs-suffix="_top">Log In</a>

  <div id="mini_login_top" class="mini-popup mini_login bz_default_hidden"><span id="github_mini_login_top" class="mini_login_top">
    <form method="post" action="/github.cgi">
      <input type="hidden" name="github_secret" value="rdqtMVLL4dxS8DGzi0B0FdyEG7dT4sgtURgpqoQt7dSAMCwDN8cJf2cgakDvVgueS3XcOdu0WMr0cPkzs4rYQ4tIY8mFpYNGWQyDM2VV6GEBxSCQLNZnJMsN1Tt8Fl25XcgcgHJWwPURwdmihpEmvDVCL1OGPTqcspkAnlmt3ENOIyf4HMRXBAAqjinmuW7wNvEorUEBNATyGR2nkFRaXGKwGbOnV8SbZzxTdP4dokE9u31EPxlLzeUTvYf7AtIG">
      <input type="hidden" name="target_uri" value="https://bugzilla.mozilla.org/show_bug.cgi?id=6740">
      <input type="image" src="/extensions/GitHubAuth/web/images/sign_in.png" height="22" width="75" align="absmiddle"
             alt="Sign in with GitHub"
             title="Sign in with GitHub"> or
    </form>
  </span>

  <form action="/show_bug.cgi?id=6740" method="POST"
        data-qs-suffix="_top">

    <input id="Bugzilla_login_top"
           class="bz_login"
           name="Bugzilla_login"
           title="Login"
           placeholder="Email"
           aria-label="Email"
           type="email"
           required
    >
    <input class="bz_password"
           id="Bugzilla_password_top"
           name="Bugzilla_password"
           type="password"
           title="Password"
           placeholder="Password"
           aria-label="Password"
           required
    >
    <input class="bz_password bz_default_hidden bz_mini_login_help" type="text"
           id="Bugzilla_password_dummy_top" value="password"
           title="Password"
    >
      <input type="checkbox" id="Bugzilla_remember_top"
             name="Bugzilla_remember" value="on" class="bz_remember"
                 checked>
      <label for="Bugzilla_remember_top">Remember</label>
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
           class="check_mini_login_fields"
            id="log_in_top">
    <a href="#" id="hide_mini_login_top" aria-label="Close"
       class="close-button hide_mini_login_form" data-qs-suffix="_top">
      <span class="icon" aria-hidden="true"></span>
    </a>
  </form>
  </div>
</li>
<li id="forgot_container_top">
  <a id="forgot_link_top" href="/show_bug.cgi?id=6740&amp;GoAheadAndLogIn=1#forgot"
     class='show_forgot_form'
     data-qs-suffix="_top">Forgot Password</a>
  <div id="forgot_form_top" class="mini-popup mini_forgot bz_default_hidden">
  <form action="/token.cgi" method="post">
    <input type="email" name="loginname" size="20" placeholder="Email" aria-label="Email" required>
    <input id="forgot_button_top" value="Reset Password"
           type="submit">
    <input type="hidden" name="a" value="reqpw">
    <input type="hidden" id="token_top" name="token" value="1598309350-a_xI6fHFAxPY6gdsh71gAoghRT6msC0XHREU0TsOrto">
    <a href="#" class="close-button hide_forgot_form" aria-label="Close" data-qs-suffix="_top">
      <span class="icon" aria-hidden="true"></span>
    </a>
  </form>
  </div>
</li>
      </ul><div id="header-external-links" class="dropdown first">
  <button type="button" id="header-external-menu-button" class="dropdown-button minor" title="Mozilla"
          aria-label="Mozilla" aria-expanded="false" aria-haspopup="true" aria-controls="header-external-menu">
    <img src="https://bugzilla.mozilla.org/static/v20200805.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg" width="32" height="32" alt="">
  </button>
  <ul class="dropdown-content right" id="header-external-menu" role="menu" style="display:none;">
    <li role="presentation">
      <a href="https://www.mozilla.org/" role="menuitem" tabindex="-1">Mozilla Home</a>
    </li>
    <li role="separator"></li>
    <li role="presentation">
      <a href="https://www.mozilla.org/privacy/websites/" role="menuitem" tabindex="-1">Privacy</a>
    </li>
    <li role="presentation">
      <a href="https://www.mozilla.org/privacy/websites/#cookies" role="menuitem" tabindex="-1">Cookies</a>
    </li>
    <li role="presentation">
      <a href="https://www.mozilla.org/about/legal/" role="menuitem" tabindex="-1">Legal</a>
    </li>
  </ul>
</div>
  </div>
</header> 


<main id="bugzilla-body" tabindex="-1">
<div id="main-inner">




<div role="toolbar" id="page-toolbar">
  <div role="group" class="buttons">
    <button type="button" id="copy-summary" class="secondary"
      title="Copy bug number and summary to your clipboard">Copy Summary</button>
    <div id="clip-container" style="display:none"><input type="text" id="clip"></div>
    <div class="dropdown">
      <button type="button" id="action-menu-btn" aria-haspopup="true" aria-label="View"
        aria-expanded="false" aria-controls="action-menu" class="dropdown-button secondary">View &#9662;</button>
      <ul class="dropdown-content left" id="action-menu" role="menu" style="display:none;">
        <li role="presentation">
          <a id="action-reset" role="menuitem" tabindex="-1">Reset Sections</a>
        </li>
        <li role="presentation">
          <a id="action-expand-all" role="menuitem" tabindex="-1">Expand All Sections</a>
        </li>
        <li role="presentation">
          <a id="action-collapse-all" role="menuitem" tabindex="-1">Collapse All Sections</a>
        </li>
        <li role="separator"></li>
        <li role="presentation">
          <a id="action-history" role="menuitem" tabindex="-1">History</a>
        </li>
        <li role="separator"></li>
        <li role="presentation">
          <a href="/rest/bug/6740" role="menuitem" tabindex="-1">JSON</a>
        </li>
        <li role="presentation">
          <a href="/show_bug.cgi?ctype=xml&amp;id=6740" role="menuitem" tabindex="-1">XML</a>
        </li>
      </ul>
    </div>
  </div>
</div>



<div role="status" id="io-error" style="display:none"></div>
<div role="status" id="floating-message" style="display:none">
  <div id="floating-message-text"></div>
</div>
<section class="module"
>
  <div class="module-content"
  >
  <div id="summary-container">
    <div class="field indent" id="field-status_summary"
>


  
    <div class=" container">
        <span id="field-value-status_summary">
      <span class="bug-status-label text" data-status="closed">Closed</span>
      <span id="field-value-bug_id">
        <a href="/show_bug.cgi?id=6740">Bug 6740</a>
      </span>
      <span>
        <span class="bug-time-label">Opened <span class="rel-time" title="1999-05-19 12:03 PDT" data-time="927140583">22 years ago</span></span>
          <span class="bug-time-label">Closed <span class="rel-time" title="1999-05-26 07:45 PDT" data-time="927729902">22 years ago</span></span>
      </span>
        </span>
    </div>

  
</div>
<div class="field indent edit-hide"
>


  
    <div class=" container">
      

      <h1 id="field-value-short_desc">regression:crashing when displaying messages</h1>
    </div>

  
</div>

    <div class="field edit-show" id="field-short_desc" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc" id="short_desc-help-link" class="help">Summary:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-short_desc">
            regression:crashing when displaying messages

        </span>
    </div>

  
</div>
  </div>
  </div>
</section>


<section class="module" id="module-categories"
>
    <header id="module-categories-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Categories section"
           data-label-collapsed="Expand Categories section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-categories-content"
             aria-expanded="true"
             aria-labeledby="module-categories-title"
             aria-describedby="module-categories-subtitle"></div>
        <h2 class="module-title" id="module-categories-title">Categories</h2>
          <h3 class="module-subtitle" id="module-categories-subtitle">
            (MailNews Core :: Backend, defect, P1)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-categories-content"
  ><div class="fields-lhs">

    <div class="field" id="field-product"
>
    <div class="name">
        <a href="/describecomponents.cgi?product=MailNews%20Core" id="product-help-link" class="help">Product:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-product">
      <div class="name-info-outer dropdown">
        <span id="product-name" class="dropdown-button" tabindex="0" role="button"
             aria-haspopup="menu" aria-controls="product-info">MailNews Core
          <span class="icon" aria-hidden="true">&#x25BE;</span>
        </span>
        <aside id="product-info" class="name-info-popup dropdown-content right hover-display" hidden role="menu"
               aria-label="Product description and actions">
          <header>
            <div class="title">MailNews Core</div>
            <div class="description">Mail and news components common to Thunderbird and SeaMonkey</div>
          </header>
          <li role="separator"></li>
          <div class="actions">
            <div><a href="/buglist.cgi?product=MailNews%20Core&amp;bug_status=__open__"
                    target="_blank" role="menuitem" tabindex="-1">See Open Bugs in This Product</a></div>
            <div><a href="/enter_bug.cgi?product=MailNews%20Core"
                    target="_blank" role="menuitem" tabindex="-1">File New Bug in This Product</a></div>
            <div><button disabled type="button" class="secondary component-watching" role="menuitem" tabindex="-1"
                         data-product="MailNews Core"
                         data-label-watch="Watch This Product" data-label-unwatch="Unwatch This Product"
                         data-source="BugModal">Watch This Product</button></div>
          </div>
        </aside>
      </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-component"
>
    <div class="name">
        <a href="/describecomponents.cgi?product=MailNews%20Core&component=Backend#Backend" id="component-help-link" class="help">Component:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-component">
      <div class="name-info-outer dropdown">
        <span id="component-name" class="dropdown-button" tabindex="0" role="button"
             aria-haspopup="menu" aria-controls="component-info">Backend
          <span class="icon" aria-hidden="true">&#x25BE;</span>
        </span>
        <aside id="component-info" class="name-info-popup dropdown-content right hover-display" hidden role="menu"
               aria-label="Component description and actions">
          <header>
            <div class="title">MailNews Core :: Backend</div>
            <div class="description">Problems with RDF data sources and application logic.  Most likely, your problem can fit in one of the other components so this component should be rarely used.</div>
          </header>
          <li role="separator"></li>
          <div class="actions">
            <div><a href="/buglist.cgi?product=MailNews%20Core&amp;component=Backend&amp;bug_status=__open__"
                    target="_blank" role="menuitem" tabindex="-1">See Open Bugs in This Component</a></div>
            <div><a href="/buglist.cgi?product=MailNews%20Core&amp;component=Backend&amp;chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__"
                    target="_blank" role="menuitem" tabindex="-1">Recently Fixed Bugs in This Component</a></div>
            <div><a href="/enter_bug.cgi?product=MailNews%20Core&amp;component=Backend"
                    target="_blank" role="menuitem" tabindex="-1">File New Bug in This Component</a></div>
            <div><button disabled type="button" class="secondary component-watching" role="menuitem" tabindex="-1"
                         data-product="MailNews Core" data-component="Backend"
                         data-label-watch="Watch This Component" data-label-unwatch="Unwatch This Component"
                         data-source="BugModal">Watch This Component</button></div>
          </div>
        </aside>
      </div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-version" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#version" id="version-help-link" class="help">Version:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-version">
            Trunk

        </span>
    </div>

  
</div>

    <div class="field edit-show" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform" id="-help-link" class="help">Platform:
        </a>
    </div>


  
    <div class=" container"><div class="field inline" id="field-rep_platform"
>


  
    <div class="value">
        <span id="field-value-rep_platform">
            All

        </span>
    </div>

  
</div><div class="field indent inline" id="field-op_sys"
>


  
    <div class="value">
        <span id="field-value-op_sys">
            All

        </span>
    </div>

  
</div><div class="field indent inline"
>


  
    <div class=" container">
    </div>

  
</div>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field contains-buttons" id="field-bug_type"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type" id="bug_type-help-link" class="help">Type:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_type">
      <span class="bug-type-label iconic-text" data-type="defect">
        <span class="icon" aria-hidden="true"></span>defect</span>
        </span>
    </div>

  
</div>

    <div class="field" id="field-importance"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority" id="importance-help-link" class="help">Priority:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-importance"><div class="field inline" id="field-priority"
>


  
    <div class="value">
        <span id="field-value-priority">P1
        </span>
    </div>

  
</div><div class="field inline" id="field-bug_severity"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity" id="bug_severity-help-link" class="help">Severity:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_severity">
            blocker

        </span>
    </div>

  
</div>
        </span>
    </div>

  
</div>

    
</div>
  </div>
</section>


<section class="module" id="module-tracking"
>
    <header id="module-tracking-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Tracking section"
           data-label-collapsed="Expand Tracking section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-tracking-content"
             aria-expanded="true"
             aria-labeledby="module-tracking-title"
             aria-describedby="module-tracking-subtitle"></div>
        <h2 class="module-title" id="module-tracking-title">Tracking</h2>
          <h3 class="module-subtitle" id="module-tracking-subtitle">
            (Not tracked)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-tracking-content"
  ><div class="fields-lhs">

    <div class="field edit-hide" id="field-status-view"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugStatuses" id="status-view-help-link" class="help">Status:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-status-view">VERIFIED
        FIXED
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-status-edit" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugStatuses" id="status-edit-help-link" class="help">Status:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-status-edit"><div class="field inline" id="field-bug_status"
>


  
    <div class="value">
        <span id="field-value-bug_status">
            VERIFIED

        </span>
    </div>

  
</div><div class="field indent inline" id="field-resolution"
>


  
    <div class="value">
        <span id="field-value-resolution">
            FIXED

        </span>
    </div>

  
</div>
  <div id="status-action-buttons">
      <div id="assigned-container" style="display:none">
        <button type="button" class="secondary" id="mark-as-assigned-btn">
          Mark as Assigned
        </button>
      </div>
  </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-target_milestone"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone" id="target_milestone-help-link" class="help">Milestone:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-target_milestone">
            M6

        </span>
    </div>

  
</div>

    


      <div class="field edit-show" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags" id="-help-link" class="help">Project Flags:
        </a>
    </div>


  
    <div class=" container"><div class="flags edit-show" style="display:none">
  <table class="layout-table tracking-flags">
      <tr>
        <td class="tracking-flag-name">user-doc-firefox</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_tracking_firefox_sumo-dirty">
  <select id="cf_tracking_firefox_sumo" name="cf_tracking_firefox_sumo">
        <option value="---"
          id="v4660_cf_tracking_firefox_sumo" selected
        >---
        </option>
  </select></td>
      </tr>
  </table>
</div>
    </div>

  
</div>
</div><div class="fields-rhs">

      <div class="field edit-show" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags" id="-help-link" class="help">Tracking Flags:
        </a>
    </div>


  
    <div class=" container"><div class="flags edit-show" style="display:none">
  <table class="layout-table tracking-flags">
      <tr>
        <th></th>
        <th>Tracking</th>
        <th>Status</th>
      </tr>
      <tr>
        <td class="tracking-flag-name">relnote-firefox</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_tracking_firefox_relnote-dirty">
  <select id="cf_tracking_firefox_relnote" name="cf_tracking_firefox_relnote">
        <option value="---"
          id="v539_cf_tracking_firefox_relnote" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird_esr68</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_thunderbird_esr68-dirty">
  <select id="cf_tracking_thunderbird_esr68" name="cf_tracking_thunderbird_esr68">
        <option value="---"
          id="v4353_cf_tracking_thunderbird_esr68" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_esr68-dirty">
  <select id="cf_status_thunderbird_esr68" name="cf_status_thunderbird_esr68">
        <option value="---"
          id="v4347_cf_status_thunderbird_esr68" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird_esr78</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_thunderbird_esr78-dirty">
  <select id="cf_tracking_thunderbird_esr78" name="cf_tracking_thunderbird_esr78">
        <option value="---"
          id="v4823_cf_tracking_thunderbird_esr78" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_esr78-dirty">
  <select id="cf_status_thunderbird_esr78" name="cf_status_thunderbird_esr78">
        <option value="---"
          id="v4829_cf_status_thunderbird_esr78" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird80</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_thunderbird_80-dirty">
  <select id="cf_tracking_thunderbird_80" name="cf_tracking_thunderbird_80">
        <option value="---"
          id="v4846_cf_tracking_thunderbird_80" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_80-dirty">
  <select id="cf_status_thunderbird_80" name="cf_status_thunderbird_80">
        <option value="---"
          id="v4840_cf_status_thunderbird_80" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird81</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_thunderbird_81-dirty">
  <select id="cf_tracking_thunderbird_81" name="cf_tracking_thunderbird_81">
        <option value="---"
          id="v4904_cf_tracking_thunderbird_81" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_81-dirty">
  <select id="cf_status_thunderbird_81" name="cf_status_thunderbird_81">
        <option value="---"
          id="v4898_cf_status_thunderbird_81" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird82</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_thunderbird_82-dirty">
  <select id="cf_tracking_thunderbird_82" name="cf_tracking_thunderbird_82">
        <option value="---"
          id="v4936_cf_tracking_thunderbird_82" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_82-dirty">
  <select id="cf_status_thunderbird_82" name="cf_status_thunderbird_82">
        <option value="---"
          id="v4930_cf_status_thunderbird_82" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">seamonkey2.53</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_seamonkey253-dirty">
  <select id="cf_tracking_seamonkey253" name="cf_tracking_seamonkey253">
        <option value="---"
          id="v3334_cf_tracking_seamonkey253" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_seamonkey253-dirty">
  <select id="cf_status_seamonkey253" name="cf_status_seamonkey253">
        <option value="---"
          id="v3338_cf_status_seamonkey253" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">seamonkey2.57esr</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_seamonkey257esr-dirty">
  <select id="cf_tracking_seamonkey257esr" name="cf_tracking_seamonkey257esr">
        <option value="---"
          id="v3594_cf_tracking_seamonkey257esr" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_seamonkey257esr-dirty">
  <select id="cf_status_seamonkey257esr" name="cf_status_seamonkey257esr">
        <option value="---"
          id="v3588_cf_status_seamonkey257esr" selected
        >---
        </option>
  </select></td>
      </tr>
  </table>
</div>
    </div>

  
</div>

</div>
  </div>
</section>



<section class="module" id="module-people"
>
    <header id="module-people-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse People section"
           data-label-collapsed="Expand People section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-people-content"
             aria-expanded="false"
             aria-labeledby="module-people-title"
             aria-describedby="module-people-subtitle"></div>
        <h2 class="module-title" id="module-people-title">People</h2>
          <h3 class="module-subtitle" id="module-people-subtitle">
            (Reporter: scurtis, Assigned: nhottanscp)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-people-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field edit-hide" id="field-assigned_to"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to" id="assigned_to-help-link" class="help">Assignee:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-assigned_to"><div class="vcard vcard_4467" ><img src="https://secure.gravatar.com/avatar/4bf552ae2539db4a738d6c00c01a5628?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email disabled" href="/user_profile?user_id=4467" > <span class="fna">nhottanscp</span></a>
</div>
        </span>
    </div>

  
</div><div class="field edit-show" id="field-assigned_to" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to" id="assigned_to-help-link" class="help">Assignee:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-assigned_to">
      <div class="set-default-container" style="display:none">
        <input type="checkbox" id="set-default-assignee" name="set_default_assignee" class="set-default"
          value="1" data-for="assigned_to">
        <label for="set-default-assignee">Reset Assignee to default</label>
      </div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-bug_mentors" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor" id="bug_mentors-help-link" class="help">Mentors:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_mentors">---
        </span>
    </div>

  
</div>

    <div class="field edit-hide" id="field-qa_contact"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact" id="qa_contact-help-link" class="help">QA Contact:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-qa_contact"><div class="vcard vcard_1308" ><img src="https://secure.gravatar.com/avatar/f876f649c463562da857f5609d8a58d5?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email disabled" href="/user_profile?user_id=1308" > <span class="fna">momoi</span></a>
</div>
        </span>
    </div>

  
</div><div class="field edit-show" id="field-qa_contact" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact" id="qa_contact-help-link" class="help">QA Contact:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-qa_contact">
      <div class="set-default-container" style="display:none">
        <input type="checkbox" id="set-default-qa-contact" name="set_default_qa_contact" class="set-default"
          value="1" data-for="qa_contact">
        <label for="set-default-qa-contact">Reset QA Contact to default</label>
      </div>
        </span>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field" id="field-reporter"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter" id="reporter-help-link" class="help">Reporter:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-reporter">
            <div class="vcard vcard_4098" ><img src="https://secure.gravatar.com/avatar/00ebaf04a035d2efa7ff97b8ccb575cd?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email disabled" href="/user_profile?user_id=4098" > <span class="fna">scurtis</span></a>
</div>

        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-triage_owner" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner" id="triage_owner-help-link" class="help">Triage Owner:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-triage_owner">
            ---

        </span>
    </div>

  
</div>

    

    <div class="field"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc" id="-help-link" class="help">CC:
        </a>
    </div>


  
    <div class=" container">


        <span aria-owns="cc-summary cc-latch">
          <span role="button" tabindex="0" id="cc-summary" data-count="10">10 people
          </span>
        </span>


        <div id="cc-list" style="display:none"></div>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-references"
>
    <header id="module-references-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse References section"
           data-label-collapsed="Expand References section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-references-content"
             aria-expanded="false"
             aria-labeledby="module-references-title"
             aria-describedby="module-references-subtitle"></div>
        <h2 class="module-title" id="module-references-title">References</h2>
      </div>
    </header>
  <div class="module-content" id="module-references-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field bug-list edit-show" id="field-dependson" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson" id="dependson-help-link" class="help">Depends on:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-dependson">
        ---
        </span>
    </div>

  
</div><div class="field bug-list edit-show" id="field-blocked" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks" id="blocked-help-link" class="help">Blocks:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-blocked">
        ---
        </span>
    </div>

  
</div>

    <div class="field bug-list edit-show" id="field-regresses" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses" id="regresses-help-link" class="help">Regressions:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-regresses">
        ---
        </span>
    </div>

  
</div><div class="field bug-list edit-show" id="field-regressed_by" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by" id="regressed_by-help-link" class="help">Regressed by:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-regressed_by">
        ---
        </span>
    </div>

  
</div>

    
</div><div class="fields-rhs">

    <div class="field edit-show" id="field-bug_file_loc" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc" id="bug_file_loc-help-link" class="help">URL:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_file_loc"><div class="link">
    <a href="" target="_blank"
      rel="noreferrer" title=""
      class="bug-url" data-safe="0"></a>
  </div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-see_also" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also" id="see_also-help-link" class="help">See Also:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-see_also">
        ---
        </span>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-details"
>
    <header id="module-details-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Details section"
           data-label-collapsed="Expand Details section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-details-content"
             aria-expanded="false"
             aria-labeledby="module-details-title"
             aria-describedby="module-details-subtitle"></div>
        <h2 class="module-title" id="module-details-title">Details</h2>
          <h3 class="module-subtitle" id="module-details-subtitle">
            (Whiteboard: Have temp fix in local tree, wait branch open to check in.)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-details-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field edit-show" id="field-alias" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias" id="alias-help-link" class="help">Alias:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-alias">
        ---
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-keywords" style="display:none"
>
    <div class="name">
        <a href="/describekeywords.cgi" id="keywords-help-link" class="help">Keywords:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-keywords">---
        </span>
    </div>

  
</div>

    <div class="field" id="field-status_whiteboard"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/Whiteboard" id="status_whiteboard-help-link" class="help">Whiteboard:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-status_whiteboard">Have temp fix in local tree, wait branch open to check in.
        </span>
    </div>

  
</div>

    

    

    <div class="field" id="field-votes"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes" id="votes-help-link" class="help">Votes:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-votes">0
        </span>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field edit-show" id="field-bug_flags" style="display:none"
>
    <div class="name">Bug Flags:
    </div>


  
    <div class=" container">
        <span id="field-value-bug_flags"><div id="bug-flags" class="flags">
  <table class="layout-table">
    <tbody class="edit-show" style="display:none"><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="This bug should be considered by thunderbird-drivers and developers as high-value and worthy of design &amp; review attention if a contributor offers a patch." for="flag_type-598">wanted-thunderbird</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-598-dirty">
      <select id="flag_type-598" name="flag_type-598"
        title="This bug should be considered by thunderbird-drivers and developers as high-value and worthy of design &amp; review attention if a contributor offers a patch."
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Flag is used to track security bug bounty nominations. Mail security(at)mozilla.org to nominate a bug." for="flag_type-803">sec-bounty</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-803-dirty">
      <select id="flag_type-803" name="flag_type-803"
        title="Flag is used to track security bug bounty nominations. Mail security(at)mozilla.org to nominate a bug."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Flag is used to track whether the bug report is eligible for inclusion in the Bug Bounty Hall of Fame." for="flag_type-913">sec-bounty-hof</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-913-dirty">
      <select id="flag_type-913" name="flag_type-913"
        title="Flag is used to track whether the bug report is eligible for inclusion in the Bug Bounty Hall of Fame."
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Whether the bug has a testcase in the qa test suite or not. Set it to &quot;in-qa-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-qa-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-qa-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword." for="flag_type-787">in-qa-testsuite</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-787-dirty">
      <select id="flag_type-787" name="flag_type-787"
        title="Whether the bug has a testcase in the qa test suite or not. Set it to &quot;in-qa-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-qa-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-qa-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>

      <td class="flag-requestee">
        <div id="requestee_type-787-container" style="display:none"><input
    name="requestee_type-787"
    value="" class="requestee bz_autocomplete_user"  id="requestee_type-787" 
  >
        </div>
      <td>

  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Whether the bug has a testcase in the test suite or not. Set it to &quot;in-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword." for="flag_type-37">in-testsuite</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-37-dirty">
      <select id="flag_type-37" name="flag_type-37"
        title="Whether the bug has a testcase in the test suite or not. Set it to &quot;in-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Include a summary of changes made by this bug in the release notes." for="flag_type-893">relnote</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-893-dirty">
      <select id="flag_type-893" name="flag_type-893"
        title="Include a summary of changes made by this bug in the release notes."
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr>
    </tbody>
  </table>
</div>
        </span>
    </div>

  
</div>
</div>

  
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-crash-data"
>
    <header id="module-crash-data-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Crash Data section"
           data-label-collapsed="Expand Crash Data section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-crash-data-content"
             aria-expanded="false"
             aria-labeledby="module-crash-data-title"
             aria-describedby="module-crash-data-subtitle"></div>
        <h2 class="module-title" id="module-crash-data-title">Crash Data</h2>
      </div>
    </header>
  <div class="module-content" id="module-crash-data-content" style="display:none"
  ><div class="field edit-show" id="field-cf_crash_signature" style="display:none"
>
    <div class="name">Signature:
    </div>


  
    <div class="value">
        <span id="field-value-cf_crash_signature">
        </span>
    </div>

  
</div>
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-security"
>
    <header id="module-security-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Security section"
           data-label-collapsed="Expand Security section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-security-content"
             aria-expanded="false"
             aria-labeledby="module-security-title"
             aria-describedby="module-security-subtitle"></div>
        <h2 class="module-title" id="module-security-title">Security</h2>
          <h3 class="module-subtitle" id="module-security-subtitle">
            (public)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-security-content" style="display:none"
  ><div class="groups edit-hide">
    This bug is publicly visible.
</div>

<div class="groups edit-show" style="display:none">


</div>
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-user-story" data-non-stick="1"
>
    <header id="module-user-story-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse User Story section"
           data-label-collapsed="Expand User Story section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-user-story-content"
             aria-expanded="false"
             aria-labeledby="module-user-story-title"
             aria-describedby="module-user-story-subtitle"></div>
        <h2 class="module-title" id="module-user-story-title">User Story</h2>
      </div>
    </header>
  <div class="module-content" id="module-user-story-content" style="display:none"
  >
    <pre id="user-story"></pre>
  </div>
</section>







<section class="module" id="module-attachments"
>
    <header id="module-attachments-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Attachments section"
           data-label-collapsed="Expand Attachments section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-attachments-content"
             aria-expanded="true"
             aria-labeledby="module-attachments-title"
             aria-describedby="module-attachments-subtitle"></div>
        <h2 class="module-title" id="module-attachments-title">Attachments</h2>
          <h3 class="module-subtitle" id="module-attachments-subtitle">
            (1 file)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-attachments-content"
  ><table role="table" class="layout-table" id="attachments">
    <tr class="
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=229">If you view this attachment with apprunner, you should see the problem</a>
        </div>
        <div>
            <a href="#c7" class="attach-time activity-ref"><span class="rel-time" title="1999-05-19 19:06 PDT" data-time="927166019">22 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_4172" ><a class="email disabled" href="/user_profile?user_id=4172" > <span class="fna">rhp (gone)</span></a>
</div></span>
        </div>
        <div class="attach-info">7.01 KB,
          message/rfc822        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=229&amp;action=edit">Details</a>
    </tr>
</table>

<footer id="attachments-footer">
  <div id="attachments-actions">
  </div>
  
</footer>
  </div>
</section>



<script nonce="Buis02i6c9Gii8QPNHYozqY39AlVnYe3yfGzY22l7Z67arUU">
  init_module_visibility();
</script>



<meta name="firefox-versions" content="{&quot;FIREFOX_AURORA&quot;:&quot;&quot;,&quot;FIREFOX_DEVEDITION&quot;:&quot;80.0b8&quot;,&quot;FIREFOX_ESR&quot;:&quot;68.11.0esr&quot;,&quot;FIREFOX_ESR_NEXT&quot;:&quot;78.1.0esr&quot;,&quot;FIREFOX_NIGHTLY&quot;:&quot;81.0a1&quot;,&quot;LAST_MERGE_DATE&quot;:&quot;2020-07-27&quot;,&quot;LAST_RELEASE_DATE&quot;:&quot;2020-07-28&quot;,&quot;LAST_SOFTFREEZE_DATE&quot;:&quot;2020-07-23&quot;,&quot;LATEST_FIREFOX_DEVEL_VERSION&quot;:&quot;80.0b8&quot;,&quot;LATEST_FIREFOX_OLDER_VERSION&quot;:&quot;3.6.28&quot;,&quot;LATEST_FIREFOX_RELEASED_DEVEL_VERSION&quot;:&quot;80.0b8&quot;,&quot;LATEST_FIREFOX_VERSION&quot;:&quot;79.0&quot;,&quot;NEXT_MERGE_DATE&quot;:&quot;2020-08-24&quot;,&quot;NEXT_RELEASE_DATE&quot;:&quot;2020-08-25&quot;,&quot;NEXT_SOFTFREEZE_DATE&quot;:&quot;2020-08-20&quot;}">


<div id="comment-actions">
    <button type="button" id="bottom-btn" class="secondary" aria-label="Go to Page Bottom">Bottom &darr;</button>
  <div class="dropdown">
    <button type="button" id="comment-tags-btn" aria-haspopup="true" aria-label="Tags"
      aria-expanded="false" aria-controls="comment-tags-menu" class="dropdown-button minor">Tags &#9662;</button>
    <ul id="comment-tags-menu" role="menu" tabindex="0" class="dropdown-content left" style="display:none">
      <li role="presentation">
        <a role="menuitem" tabindex="-1" data-comment-tag="">Reset</a>
      </li>
    </ul>
  </div>
  <div class="dropdown">
    <button type="button" id="view-menu-btn" aria-haspopup="true" aria-label="Timeline"
      aria-expanded="false" aria-controls="view-menu" class="dropdown-button minor">Timeline &#9662;</button>
    <ul id="view-menu" role="menu" tabindex="0" class="dropdown-content left" style="display:none">
      <li role="presentation">
        <a id="view-reset" role="menuitem" tabindex="-1">Reset</a>
      </li>
      <li role="separator"></li>
      <li role="presentation">
        <a id="view-collapse-all" role="menuitem" tabindex="-1">Collapse All</a>
      </li>
      <li role="presentation">
        <a id="view-expand-all" role="menuitem" tabindex="-1">Expand All</a>
      </li>
      <li role="presentation">
        <a id="view-comments-only" role="menuitem" tabindex="-1">Comments Only</a>
      </li>
    </ul>
   </div>
</div>
<div class="change-set" id="c0"><div class="comment" data-id="50222" data-no="0"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-0" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4098" ><img src="https://secure.gravatar.com/avatar/00ebaf04a035d2efa7ff97b8ccb575cd?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4098" ><a class="email disabled" href="/user_profile?user_id=4098" > <span class="fna">scurtis</span></a>
</div>
            <span class="user-role">Reporter</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-0"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-0" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c0">Description</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-19 12:03 PDT" data-time="927140583">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-0">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-0" data-comment-id="50222">5_19 builds, all 3 platforms are not displaying messages when the message
subject in the thread pane is clicked on.

Linux and Mac are crashing. Windows is just not displaying the message. (Peter
or Esther may add detail about Mac &amp; Win behavior.)

On Linux, I crashed when selecting my randomly-selected first message three
times. One time I was able to select two messages, they displayed fine, and then
I crashed when I clicked on the third message. Stack trace follows...this was
from when I crashed on the third message. Stack from crashing on the first
message (randomly selected) was the same except it only got to in _init ().


Program received signal SIGSEGV, Segmentation fault.
0x40550e63 in memcpy (dstpp=0x65004d, srcpp=0x818c14d, len=5) at ../sysdeps/gene
ric/memcpy.c:57
../sysdeps/generic/memcpy.c:57: No such file or directory.
(gdb) where
#0  0x40550e63 in memcpy (dstpp=0x65004d, srcpp=0x818c14d, len=5) at ../sysdeps/
generic/memcpy.c:57
#1  0x40cc5ac4 in MimeRichtextConvert ()
#2  0x40cc3058 in MakeAbsoluteURL ()
#3  0x40cc60a9 in MimeRichtextConvert ()
#4  0x40cb60ba in nsMimeConverter::Release ()
#5  0x401edd37 in NET_PlainTextConverter ()
#6  0x4016d540 in _init ()
#7  0x4016db6a in _init ()
#8  0x40206f3f in NET_ProcessNet ()
#9  0x4020c563 in NET_PollSockets ()
#10 0x40225561 in nsNetlibService::NetPollSocketsCallback ()
#11 0x40144cfa in TimerImpl::FireTimeout ()
#12 0x40145060 in nsTimerExpired ()
#13 0x80e6b6b in g_main_iteration ()
#14 0x80e60f0 in g_list_length ()
#15 0x80e656b in g_list_length ()
#16 0x80e6685 in g_main_iteration ()
#17 0x8084def in gtk_main ()
#18 0x4009281b in nsAppShell::Run ()
#19 0x40018d86 in nsAppShellService::Run ()
#20 0x80512d3 in main ()</pre></div><div class="change-set" id="c1"><div class="comment" data-id="50223" data-no="1"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-1" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4109" ><img src="https://secure.gravatar.com/avatar/aece125ebee292ccda96380d51c81b27?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4109" ><a class="email disabled" href="/user_profile?user_id=4109" > <span class="fna">pmock</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-1"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-1" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c1">Comment 1</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-19 12:09 PDT" data-time="927140999">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-1">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-1" data-comment-id="50223">Correction on Mac behavior.  On today Mac May 19 Seamonkey (1999051909), you do
not crash when you select the message.  It behaves like windows where it
displays at most the header of the message.  It fails to displays the message
body.</pre></div><div class="change-set" id="a668_4080"><div class="change" id="aa668_4080">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4080" id="a668_4080"><img src="https://secure.gravatar.com/avatar/41b4ffbe29291f5bf19a7eb729331dda?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_4080" id="a668_4080"><a class="email disabled" href="/user_profile?user_id=4080" > <span class="fna">lchiang</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a668_4080"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a668_4080">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#a668_4080">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-19 12:14 PDT" data-time="927141251">22 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Assignee: phil &rarr; mscott</div><div class="change">Hardware: PC &rarr; All</div><div class="change">Summary: regression:crashing when displaying messages &rarr; regression:crashing when displaying html messages</div></div></div><div class="change-set" id="c2"><div class="comment" data-id="50224" data-no="2"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-2" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4080" id="a668_4080"><img src="https://secure.gravatar.com/avatar/41b4ffbe29291f5bf19a7eb729331dda?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4080" id="a668_4080"><a class="email disabled" href="/user_profile?user_id=4080" > <span class="fna">lchiang</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-2"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-2" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c2">Comment 2</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-19 12:14 PDT" data-time="927141299">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-2">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-2" data-comment-id="50224">Actually, on Windows, you keep losing system resources.</pre></div><div class="change-set" id="c3"><div class="comment" data-id="50225" data-no="3"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-3" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4080" id="a668_4080"><img src="https://secure.gravatar.com/avatar/41b4ffbe29291f5bf19a7eb729331dda?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4080" id="a668_4080"><a class="email disabled" href="/user_profile?user_id=4080" > <span class="fna">lchiang</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-3"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-3" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c3">Comment 3</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-19 12:17 PDT" data-time="927141479">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-3">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-3" data-comment-id="50225">Peter sees this problem on Mac on an html and a plain text message.
Stacey sees this problem on only html messages on Linux.  Plain text msgs sent
from 4.6 are fine.</pre><div class="activity"><div class="change">Summary: regression:crashing when displaying html messages &rarr; regression:crashing when displaying messages</div></div></div><div class="change-set" id="a1859_4098"><div class="change" id="aa1859_4098">
    <table class="layout-table change-head reporter" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4098" id="a1859_4098"><img src="https://secure.gravatar.com/avatar/00ebaf04a035d2efa7ff97b8ccb575cd?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_4098" id="a1859_4098"><a class="email disabled" href="/user_profile?user_id=4098" > <span class="fna">scurtis</span></a>
</div>
            <span class="user-role">Reporter</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a1859_4098"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a1859_4098">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#a1859_4098">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-19 12:34 PDT" data-time="927142442">22 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Hardware: All &rarr; PC</div></div></div><div class="change-set" id="c4"><div class="comment" data-id="50226" data-no="4"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-4" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4098" id="a1859_4098"><img src="https://secure.gravatar.com/avatar/00ebaf04a035d2efa7ff97b8ccb575cd?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4098" id="a1859_4098"><a class="email disabled" href="/user_profile?user_id=4098" > <span class="fna">scurtis</span></a>
</div>
            <span class="user-role">Reporter</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-4"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-4" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c4">Comment 4</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-19 12:34 PDT" data-time="927142499">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-4">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-4" data-comment-id="50226">For a while, I thought this was Ok with plain text messages on Linux, but it
appears that message selection just gets lucky sometimes. After a bit more
playing around, it appears that I'm still crashing the vast majority of the
time, with both html and plain text msgs.</pre></div><div class="change-set" id="a4220_4080"><div class="change" id="aa4220_4080">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4080" id="a4220_4080"><img src="https://secure.gravatar.com/avatar/41b4ffbe29291f5bf19a7eb729331dda?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_4080" id="a4220_4080"><a class="email disabled" href="/user_profile?user_id=4080" > <span class="fna">lchiang</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a4220_4080"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a4220_4080">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#a4220_4080">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-19 13:13 PDT" data-time="927144803">22 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Severity: critical &rarr; blocker</div><div class="change">Priority: P3 &rarr; P1</div></div></div><div class="change-set" id="a4255_1869"><div class="change" id="aa4255_1869">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1869" id="a4255_1869"><img src="https://secure.gravatar.com/avatar/95bb32dbcdb50fbea24ccd93a553eb7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1869" id="a4255_1869"><a class="email disabled" href="/user_profile?user_id=1869" > <span class="fna">Phil Peterson</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a4255_1869"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a4255_1869">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#a4255_1869">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-19 13:13 PDT" data-time="927144838">22 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Severity: blocker &rarr; critical</div><div class="change">Target Milestone: M6</div></div></div><div class="change-set" id="c5"><div class="comment" data-id="50227" data-no="5"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-5" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1869" id="a4255_1869"><img src="https://secure.gravatar.com/avatar/95bb32dbcdb50fbea24ccd93a553eb7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_1869" id="a4255_1869"><a class="email disabled" href="/user_profile?user_id=1869" > <span class="fna">Phil Peterson</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-5"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-5" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c5">Comment 5</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-19 13:13 PDT" data-time="927144839">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-5">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-5" data-comment-id="50227">M6</pre></div><div class="change-set" id="a4308_4080"><div class="change" id="aa4308_4080">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4080" id="a4308_4080"><img src="https://secure.gravatar.com/avatar/41b4ffbe29291f5bf19a7eb729331dda?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_4080" id="a4308_4080"><a class="email disabled" href="/user_profile?user_id=4080" > <span class="fna">lchiang</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a4308_4080"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a4308_4080">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#a4308_4080">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-19 13:14 PDT" data-time="927144891">22 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Severity: critical &rarr; blocker</div><div class="change">Hardware: PC &rarr; All</div><div class="change">Target Milestone: <span class="activity-deleted">M6</span></div></div></div><div class="change-set" id="a20139_1869"><div class="change" id="aa20139_1869">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1869" id="a20139_1869"><img src="https://secure.gravatar.com/avatar/95bb32dbcdb50fbea24ccd93a553eb7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1869" id="a20139_1869"><a class="email disabled" href="/user_profile?user_id=1869" > <span class="fna">Phil Peterson</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a20139_1869"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a20139_1869">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#a20139_1869">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-19 17:38 PDT" data-time="927160722">22 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Target Milestone: M6</div></div></div><div class="change-set" id="a23100_93208"><div class="change" id="aa23100_93208">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_93208" id="a23100_93208"><img src="https://secure.gravatar.com/avatar/81927006e32b6874ba18489885babf50?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_93208" id="a23100_93208"><a class="email disabled" href="/user_profile?user_id=93208" > <span class="fna">Scott MacGregor</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a23100_93208"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a23100_93208">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#a23100_93208">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-19 18:28 PDT" data-time="927163683">22 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Assignee: mscott &rarr; ftang</div></div></div><div class="change-set" id="c6"><div class="comment" data-id="50228" data-no="6"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-6" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_93208" id="a23100_93208"><img src="https://secure.gravatar.com/avatar/81927006e32b6874ba18489885babf50?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_93208" id="a23100_93208"><a class="email disabled" href="/user_profile?user_id=93208" > <span class="fna">Scott MacGregor</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-6"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-6" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c6">Comment 6</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-19 18:28 PDT" data-time="927163739">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-6">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-6" data-comment-id="50228">Ughhh, 6 hours of debugging later and we finally found it. We ended up just
backing out changes from yesterday. Scott Putterman backed out some changes by
ftang which eventually did the trick.

Frank, your checkins into nsMetaCharsetObserver.cpp and nsHTMLDocument.cpp broke
message display pretty badly last night. On windows we infinetly attempt to
reload the message body into the message frame. We end up crashing on Linux and
Mac due to this bug.

I don't know if you are still in or not tonight, but we need this fixed for the
QA builds tomorrow morning. If you aren't around, I'll back out the changes
tonight for these two files and you can take a better look at this tomorrow.

Thanks to sspitzer, rhp, ducarroz &amp; putterman for spending their afternoon with
me trying to track this nasty one down.</pre></div><div class="change-set" id="c7"><div class="comment" data-id="50229" data-no="7"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-7" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4172" id="a23100_93208"><img src="https://secure.gravatar.com/avatar/ae38d7c76e7b07cbdb077ac8a1087603?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4172" id="a23100_93208"><a class="email disabled" href="/user_profile?user_id=4172" > <span class="fna">rhp (gone)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-7"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-7" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c7">Comment 7</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-19 19:06 PDT" data-time="927166019">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-7">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-229"
         class="attachment"
         data-id="229" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="blinkBug.eml">
      <meta itemprop="contentSize" content="7176">
      <meta itemprop="encodingFormat" content="message/rfc822">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=229" itemprop="contentUrl">
        <span id="att-229-description" itemprop="description">If you view this attachment with apprunner, you should see the problem</span></a>
        — <a href="attachment.cgi?id=229&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div></div><div class="change-set" id="c8"><div class="comment" data-id="50230" data-no="8"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-8" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4172" id="a23100_93208"><img src="https://secure.gravatar.com/avatar/ae38d7c76e7b07cbdb077ac8a1087603?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4172" id="a23100_93208"><a class="email disabled" href="/user_profile?user_id=4172" > <span class="fna">rhp (gone)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-8"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-8" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c8">Comment 8</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-19 19:09 PDT" data-time="927166199">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-8">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-8" data-comment-id="50230">The file I attached isn't working right with apprunner, but if you browse to it
with 4.x and save the document to TempMessage.eml then you can load that file
into apprunner.</pre></div><div class="change-set" id="c9"><div class="comment" data-id="50231" data-no="9"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-9" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_93208" id="a23100_93208"><img src="https://secure.gravatar.com/avatar/81927006e32b6874ba18489885babf50?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_93208" id="a23100_93208"><a class="email disabled" href="/user_profile?user_id=93208" > <span class="fna">Scott MacGregor</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-9"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-9" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c9">Comment 9</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-19 19:14 PDT" data-time="927166499">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-9">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-9" data-comment-id="50231">Frank, I'm going to take it that you aren't in tonight. I'm going to back out
your changes so mailnews will be able to run in tomorrows builds.</pre></div><div class="change-set" id="c10"><div class="comment" data-id="50232" data-no="10"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-10" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_93208" id="a23100_93208"><img src="https://secure.gravatar.com/avatar/81927006e32b6874ba18489885babf50?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_93208" id="a23100_93208"><a class="email disabled" href="/user_profile?user_id=93208" > <span class="fna">Scott MacGregor</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-10"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-10" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c10">Comment 10</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-19 20:31 PDT" data-time="927171119">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-10">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-10" data-comment-id="50232">the changes have been backed out.</pre></div><div class="change-set" id="c11"><div class="comment" data-id="50233" data-no="11"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-11" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1193" id="a23100_93208"><img src="https://secure.gravatar.com/avatar/30bea03e99e03d3de54f7653bdb4e023?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_1193" id="a23100_93208"><a class="email disabled" href="/user_profile?user_id=1193" > <span class="fna">(not reading, please use seth&#64;sspitzer.org instead)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-11"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-11" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c11">Comment 11</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-19 20:54 PDT" data-time="927172499">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-11">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-11" data-comment-id="50233">frank, when you figure out the problem, please explain in the bug report.  We
were all really stumped today.

something to note:  make sure you verify that loading rfc822 message works from
inside apprunner.  rich showed us earlier that it worked fine in viewer, but in
apprunner we saw the problems.</pre></div><div class="change-set" id="c12"><div class="comment" data-id="50234" data-no="12"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-12" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1308" id="a23100_93208"><img src="https://secure.gravatar.com/avatar/f876f649c463562da857f5609d8a58d5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_1308" id="a23100_93208"><a class="email disabled" href="/user_profile?user_id=1308" > <span class="fna">Katsuhiko Momoi</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-12"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-12" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c12">Comment 12</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-19 23:58 PDT" data-time="927183539">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-12">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-12" data-comment-id="50234">I've exchanged some messages with mscott on this. Just FYI, let me insert
relevant parts of my comments into this bug:

I've been using 5/19 Win32 build for last 30 minutes to look at some 144
messages and so far only a few messages get into an infinite loop and
those are the  messages I sent out using recent 5.0 Messenger. It seems
to me that kostello, ducarroz and nhotta discussed a related issue
yesterday in connection with <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - META tag in HTML is not correct"
   href="/show_bug.cgi?id=6675">Bug 6675</a>. Recently (in the last few days),
Mail started putting in a  meta charset tag that it gets from Ender
when composing a new message. It's only these messages which have the
meta tags that seem to be failing with Frank's new Meta Charset checkin.

This seems to me to be a collision of these 2 recent changes. Prior to the
arrival of the meta charset tag  into a newly composed mail, we were already
paying attention to the charset parameter in Content-Type header and so
 something in the new code didn't agree with that, I guess. In 4.x, we
don't put a meta charset tag into a Mail composer generated HTML
messages. So Naoki asked whether or not it was necessary to insert a
meta tag into the main body. I also question if it is really necessary
(though IE4/5 does it.)

So, it seems to me another option is not to insert the meta tag into new
messages.

In any case, as an experiment, I removed the meta tag lines from the
messages which caused the hang problem for me above, and the problem
stopped.</pre></div><div class="change-set" id="c13"><div class="comment" data-id="50235" data-no="13"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-13" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1308" id="a23100_93208"><img src="https://secure.gravatar.com/avatar/f876f649c463562da857f5609d8a58d5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_1308" id="a23100_93208"><a class="email disabled" href="/user_profile?user_id=1308" > <span class="fna">Katsuhiko Momoi</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-13"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-13" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c13">Comment 13</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-20 05:07 PDT" data-time="927202079">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-13">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-13" data-comment-id="50235">Let me add a few things we probably should be concerned about in
fixing this bug. (Maybe these will be taken care of anyway but
to be sure, let me verbalize them below.)

As I understand it, we convert all msgs from a native charset (
based on the charset parameter in the Content-Type header)to UTF-8.
They will be in HTML format and will bear an UTF-8 Meta
tag and then we reply on Meta-charset handling code in the layout
to automatically display it, i.e. no menu handling is required.

What if the original message contained its own meta charset tag
like &quot;iso-8859-1&quot;? The 2 charset tags don't match and will be in
conflict unless we somehow ignore the document's charset tag.

1. Issue 1: If charset honoring is in effect, we probably need to
            let the charset parameter in Content-Type line predominate
            over a document charset tag and convert to UTF-8 accordingly
            and also ignore an embedded charset tag in display.

2. Issue 2: We are now able to turn off charset honoring via an insertion of
            a prefs50.js line. (There is no UI yet for this, and charset
            honoring is the default if this line does not exist.)
            In such a case, we face a choice:
            Should we let the user's encoding menu predominate or
            the document embedded charset tag? Probaly the encoding
            menu selection.

            Actually this might also be related to an issue of a
            general charset override we need to implement in mail
            display. I don't think we have a nailed-down spec for this yet,
            however.
Issue 3: How about attachments? and maybe there are other issues to
         think about?

Added nhotta to the cc line.</pre></div><div class="change-set" id="c14"><div class="comment" data-id="50236" data-no="14"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-14" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1308" id="a23100_93208"><img src="https://secure.gravatar.com/avatar/f876f649c463562da857f5609d8a58d5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_1308" id="a23100_93208"><a class="email disabled" href="/user_profile?user_id=1308" > <span class="fna">Katsuhiko Momoi</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-14"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-14" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c14">Comment 14</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-20 05:26 PDT" data-time="927203219">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-14">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-14" data-comment-id="50236">I guess I should have said that the layout uses &quot;UCS-2&quot;
rather than &quot;UTF-8 -- please substitute &quot;UCS-2&quot; for &quot;UTF-8&quot; above.
In any case, I'm hoping that rhp and nhotta addressed these
issues already.</pre></div><div class="change-set" id="a85466_1904"><div class="change" id="aa85466_1904">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1904" id="a85466_1904"><img src="https://secure.gravatar.com/avatar/944bd43fe0fa3f3f51596ebd0267af9c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1904" id="a85466_1904"><a class="email disabled" href="/user_profile?user_id=1904" > <span class="fna">Frank Tang</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a85466_1904"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a85466_1904">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#a85466_1904">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-20 11:47 PDT" data-time="927226049">22 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Status: NEW &rarr; ASSIGNED</div></div></div><div class="change-set" id="c15"><div class="comment" data-id="50237" data-no="15"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-15" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1904" id="a85466_1904"><img src="https://secure.gravatar.com/avatar/944bd43fe0fa3f3f51596ebd0267af9c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_1904" id="a85466_1904"><a class="email disabled" href="/user_profile?user_id=1904" > <span class="fna">Frank Tang</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-15"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-15" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c15">Comment 15</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-20 11:47 PDT" data-time="927226079">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-15">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-15" data-comment-id="50237">I will look at it now</pre></div><div class="change-set" id="c16"><div class="comment" data-id="50238" data-no="16"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-16" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1904" id="a85466_1904"><img src="https://secure.gravatar.com/avatar/944bd43fe0fa3f3f51596ebd0267af9c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_1904" id="a85466_1904"><a class="email disabled" href="/user_profile?user_id=1904" > <span class="fna">Frank Tang</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-16"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-16" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c16">Comment 16</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-20 15:40 PDT" data-time="927240059">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-16">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-16" data-comment-id="50238">Naoki update the tree, and them back out the back out of my file in his local
tree. But now we cannot recreate this problem on Window. Can someone have a
build which can recreat the problem ?</pre></div><div class="change-set" id="a105767_1904"><div class="change" id="aa105767_1904">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1904" id="a105767_1904"><img src="https://secure.gravatar.com/avatar/944bd43fe0fa3f3f51596ebd0267af9c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1904" id="a105767_1904"><a class="email disabled" href="/user_profile?user_id=1904" > <span class="fna">Frank Tang</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a105767_1904"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a105767_1904">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#a105767_1904">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-20 17:25 PDT" data-time="927246350">22 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Whiteboard: Have the fixed, already verify on Mac and Window. sspitzer is verifing the UNIX now</div></div></div><div class="change-set" id="c17"><div class="comment" data-id="50239" data-no="17"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-17" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1904" id="a105767_1904"><img src="https://secure.gravatar.com/avatar/944bd43fe0fa3f3f51596ebd0267af9c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_1904" id="a105767_1904"><a class="email disabled" href="/user_profile?user_id=1904" > <span class="fna">Frank Tang</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-17"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-17" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c17">Comment 17</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-20 17:25 PDT" data-time="927246359">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-17">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-17" data-comment-id="50239">Have the fixed, already verify on Mac and Window. sspitzer is verifing the UNIX
now</pre></div><div class="change-set" id="c18"><div class="comment" data-id="50240" data-no="18"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-18" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1193" id="a105767_1904"><img src="https://secure.gravatar.com/avatar/30bea03e99e03d3de54f7653bdb4e023?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_1193" id="a105767_1904"><a class="email disabled" href="/user_profile?user_id=1193" > <span class="fna">(not reading, please use seth&#64;sspitzer.org instead)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-18"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-18" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c18">Comment 18</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-20 17:49 PDT" data-time="927247799">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-18">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-18" data-comment-id="50240">mozilla/intl/chardet/src/nsMetaCharsetObserver.cpp at 1.6
mozilla/layout/html/document/src/nsHTMLDocument.cpp at 3.115 + franks patch

no other differences in my tree.

still crashes for me on Linux.

Here's the stack trace:

#0  0x4080fe18 in memcpy (dstpp=0x0, srcpp=0x80b9e47, len=45) at
../sysdeps/generic/memcpy.c:51
#1  0x400939f3 in nsCRT::memcpy (aDest=0x0, aSrc=0x80b9e47, aCount=45) at
nsCRT.h:81
#2  0x411ab63b in mime_LineBuffer (net_buffer=0x80b9e47 &quot;This is a multi-part
message in MIME format.\n&quot;, '-' &lt;repeats 14 times&gt;,
&quot;90894A908EF7655CA0F23E98\nContent-Type: multipart/related; boundary=\&quot;&quot;, '-'
&lt;repeats 12 times&gt;, &quot;10C1211A25B32D92B6ECF47E\&quot;\n\n\n&quot;, '-' &lt;repeats 14 times&gt;,
&quot;10C1211A25B32D92B6E&quot;..., net_buffer_size=7505, bufferP=0x82cede8,
buffer_sizeP=0x82cedf0, buffer_fpP=0x82cedf8, convert_newlines_p=1,
per_line_fn=0x411a2fcc &lt;MimeMessage_parse_line(char *, int, MimeObject *)&gt;,
closure=0x82cedc0) at mimebuf.cpp:220
#3  0x411a6f55 in MimeObject_parse_buffer (buffer=0x80b9b98 &quot;From - Mon Jun 02
12:00:00 1997\nX-Mozilla-Status: 00011\nReturn-Path:
&lt;<a href="mailto:info&#64;netscape.com">info&#64;netscape.com</a>&gt;\nReceived: from info.mcom.com ([205.217.228.199]) by
tintin.netscape.com\n          (Netscape Messaging Server 3.&quot;..., size=8192,
obj=0x82cedc0) at mimeobj.cpp:218
#4  0x411abfca in mime_display_stream_write (stream=0x82cee20, buf=0x80b9b98
&quot;From - Mon Jun 02 12:00:00 1997\nX-Mozilla-Status: 00011\nReturn-Path:
&lt;<a href="mailto:info&#64;netscape.com">info&#64;netscape.com</a>&gt;\nReceived: from info.mcom.com ([205.217.228.199]) by
tintin.netscape.com\n          (Netscape Messaging Server 3.&quot;..., size=8192) at
mimemoz2.cpp:282
#5  0x41191e3f in MimePluginInstance::Write (this=0x83135d0, aBuf=0x80b9b98
&quot;From - Mon Jun 02 12:00:00 1997\nX-Mozilla-Status: 00011\nReturn-Path:
&lt;<a href="mailto:info&#64;netscape.com">info&#64;netscape.com</a>&gt;\nReceived: from info.mcom.com ([205.217.228.199]) by
tintin.netscape.com\n          (Netscape Messaging Server 3.&quot;..., aCount=8192,
aWriteCount=0xbffff408) at plugin_inst.cpp:379
#6  0x40256d31 in plugin_stream_write (stream=0x82cee68, str=0x80b9b98 &quot;From -
Mon Jun 02 12:00:00 1997\nX-Mozilla-Status: 00011\nReturn-Path:
&lt;<a href="mailto:info&#64;netscape.com">info&#64;netscape.com</a>&gt;\nReceived: from info.mcom.com ([205.217.228.199]) by
tintin.netscape.com\n          (Netscape Messaging Server 3.&quot;..., len=8192) at
cvplugin.cpp:68
#7  0x401c1bae in net_read_file_chunk (cur_entry=0x829dd58) at mkfile.c:956
#8  0x401c2549 in net_ProcessFile (cur_entry=0x829dd58) at mkfile.c:1327
#9  0x40276f17 in NET_ProcessNet (ready_fd=0x0, fd_type=1) at mkgeturl.c:3355
#10 0x4027edf9 in NET_PollSockets () at mkselect.c:298
#11 0x402a124a in ?? () from
/builds/sspitzer/MOZILLA/05.18.1999/04.30/mozilla/dist/bin/libnetlib.so
#12 0x4018bde9 in TimerImpl::FireTimeout (this=0x84bd918) at nsTimer.cpp:73
#13 0x4018c2d2 in nsTimerExpired (aCallData=0x84bd918) at nsTimer.cpp:189
#14 0x4066dc11 in ?? () from /usr/lib/libglib-1.2.so.0
#15 0x4066cdd2 in ?? () from /usr/lib/libglib-1.2.so.0
#16 0x4066d3bb in ?? () from /usr/lib/libglib-1.2.so.0
#17 0x4066d571 in ?? () from /usr/lib/libglib-1.2.so.0
#18 0x4059415b in ?? () from /usr/lib/libgtk-1.2.so.0
#19 0x400c1bdd in ?? () from
/builds/sspitzer/MOZILLA/05.18.1999/04.30/mozilla/dist/bin/libwidgetgtk.so
#20 0x40020f9d in ?? () from
/builds/sspitzer/MOZILLA/05.18.1999/04.30/mozilla/dist/bin/libnsappshell.so
#21 0x804bbb8 in main (argc=2, argv=0xbffffa24) at nsAppRunner.cpp:482</pre></div><div class="change-set" id="c19"><div class="comment" data-id="50241" data-no="19"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-19" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1193" id="a105767_1904"><img src="https://secure.gravatar.com/avatar/30bea03e99e03d3de54f7653bdb4e023?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_1193" id="a105767_1904"><a class="email disabled" href="/user_profile?user_id=1193" > <span class="fna">(not reading, please use seth&#64;sspitzer.org instead)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-19"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-19" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c19">Comment 19</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-20 17:50 PDT" data-time="927247859">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-19">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-19" data-comment-id="50241">since it works on mac and windows, I'm going to double check everything.

I'll report back in as soon as possible.</pre></div><div class="change-set" id="c20"><div class="comment" data-id="50242" data-no="20"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-20" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1193" id="a105767_1904"><img src="https://secure.gravatar.com/avatar/30bea03e99e03d3de54f7653bdb4e023?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_1193" id="a105767_1904"><a class="email disabled" href="/user_profile?user_id=1193" > <span class="fna">(not reading, please use seth&#64;sspitzer.org instead)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-20"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-20" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c20">Comment 20</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-20 18:22 PDT" data-time="927249779">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-20">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-20" data-comment-id="50242">yes, I still think it is happening on linux.

Repository revision: 3.115 mozilla/layout/html/document/src/nsHTMLDocument.cpp
Repository revision: 1.6 mozilla/intl/chardet/src/nsMetaCharsetObserver.cpp

plus franks patch.

#0  0x411a57b5 in MimeMessage_close_headers (obj=0x82cebf8) at mimemsg.cpp:381
#1  0x411a536d in MimeMessage_parse_line (line=0x8314100 &quot;\nontent-Type:
multipart/related; boundary=\&quot;&quot;, '-' &lt;repeats 12 times&gt;,
&quot;10C1211A25B32D92B6ECF47E\&quot;\n&quot;, ', length=1, obj=0x82cebf8) at mimemsg.cpp:211
#2  0x411ad439 in convert_and_send_buffer (buf=0x8314100 &quot;\nontent-Type:
multipart/related; boundary=\&quot;&quot;, '-' &lt;repeats 12 times&gt;,
&quot;10C1211A25B32D92B6ECF47E\&quot;\n&quot;, ', length=1, convert_newlines_p=1,
per_line_fn=0x411a4fcc &lt;MimeMessage_parse_line(char *, int, MimeObject *)&gt;,
closure=0x82cebf8) at mimebuf.cpp:148
#3  0x411ad679 in mime_LineBuffer (net_buffer=0x80bb03c &quot;\n\n&quot;, '-' &lt;repeats 14
times&gt;, &quot;10C1211A25B32D92B6ECF47E\nContent-Type: text/html;
charset=us-ascii\nContent-Transfer-Encoding: 7bit\n\n&lt;HTML&gt;\n&lt;BODY
BACKGROUND=\&quot;<a rel="nofollow" href="cid:part1.33833388.2ECC9355&#64;netscape.com">cid:part1.33833388.2ECC9355&#64;netscape.com</a>\&quot;&gt;\n\n&lt;CENTER&gt;&lt;TABLE &quot;...,
net_buffer_size=7340, bufferP=0x82cec20, buffer_sizeP=0x82cec28,
buffer_fpP=0x82cec30, convert_newlines_p=1, per_line_fn=0x411a4fcc
&lt;MimeMessage_parse_line(char *, int, MimeObject *)&gt;, closure=0x82cebf8) at
mimebuf.cpp:235
#4  0x411a8f55 in MimeObject_parse_buffer (buffer=0x80bace8 &quot;From - Mon Jun 02
12:00:00 1997\nX-Mozilla-Status: 00011\nReturn-Path:
&lt;<a href="mailto:info&#64;netscape.com">info&#64;netscape.com</a>&gt;\nReceived: from info.mcom.com ([205.217.228.199]) by
tintin.netscape.com\n          (Netscape Messaging Server 3.&quot;..., size=8192,
obj=0x82cebf8) at mimeobj.cpp:218
#5  0x411adfca in mime_display_stream_write (stream=0x82cec58, buf=0x80bace8
&quot;From - Mon Jun 02 12:00:00 1997\nX-Mozilla-Status: 00011\nReturn-Path:
&lt;<a href="mailto:info&#64;netscape.com">info&#64;netscape.com</a>&gt;\nReceived: from info.mcom.com ([205.217.228.199]) by
tintin.netscape.com\n          (Netscape Messaging Server 3.&quot;..., size=8192) at
mimemoz2.cpp:282
#6  0x41193e3f in MimePluginInstance::Write (this=0x8492a10, aBuf=0x80bace8
&quot;From - Mon Jun 02 12:00:00 1997\nX-Mozilla-Status: 00011\nReturn-Path:
&lt;<a href="mailto:info&#64;netscape.com">info&#64;netscape.com</a>&gt;\nReceived: from info.mcom.com ([205.217.228.199]) by
tintin.netscape.com\n          (Netscape Messaging Server 3.&quot;..., aCount=8192,
aWriteCount=0xbffff408) at plugin_inst.cpp:379
#7  0x40256d31 in plugin_stream_write (stream=0x82ceca0, str=0x80bace8 &quot;From -
Mon Jun 02 12:00:00 1997\nX-Mozilla-Status: 00011\nReturn-Path:
&lt;<a href="mailto:info&#64;netscape.com">info&#64;netscape.com</a>&gt;\nReceived: from info.mcom.com ([205.217.228.199]) by
tintin.netscape.com\n          (Netscape Messaging Server 3.&quot;..., len=8192) at
cvplugin.cpp:68
#8  0x401c1bae in net_read_file_chunk (cur_entry=0x8313bc0) at mkfile.c:956
#9  0x401c2549 in net_ProcessFile (cur_entry=0x8313bc0) at mkfile.c:1327
#10 0x40276f17 in NET_ProcessNet (ready_fd=0x0, fd_type=1) at mkgeturl.c:3355
#11 0x4027edf9 in NET_PollSockets () at mkselect.c:298
#12 0x402a124a in ?? () from
/builds/sspitzer/MOZILLA/05.18.1999/04.30/mozilla/dist/bin/libnetlib.so
#13 0x4018bde9 in ?? () from
/builds/sspitzer/MOZILLA/05.18.1999/04.30/mozilla/dist/bin/libgmbasegtk.so
#14 0x4018c2d2 in ?? () from
/builds/sspitzer/MOZILLA/05.18.1999/04.30/mozilla/dist/bin/libgmbasegtk.so
#15 0x4066dc11 in ?? () from /usr/lib/libglib-1.2.so.0
#16 0x4066cdd2 in ?? () from /usr/lib/libglib-1.2.so.0
#17 0x4066d3bb in ?? () from /usr/lib/libglib-1.2.so.0
#18 0x4066d571 in ?? () from /usr/lib/libglib-1.2.so.0
#19 0x4059415b in ?? () from /usr/lib/libgtk-1.2.so.0
#20 0x400c1bdd in ?? () from
/builds/sspitzer/MOZILLA/05.18.1999/04.30/mozilla/dist/bin/libwidgetgtk.so
#21 0x40020f5d in ?? () from
/builds/sspitzer/MOZILLA/05.18.1999/04.30/mozilla/dist/bin/libnsappshell.so
#22 0x804bbb8 in main (argc=2, argv=0xbffffa24) at nsAppRunner.cpp:482
(gdb)</pre></div><div class="change-set" id="c21"><div class="comment" data-id="50243" data-no="21"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-21" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1904" id="a105767_1904"><img src="https://secure.gravatar.com/avatar/944bd43fe0fa3f3f51596ebd0267af9c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_1904" id="a105767_1904"><a class="email disabled" href="/user_profile?user_id=1904" > <span class="fna">Frank Tang</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-21"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-21" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c21">Comment 21</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-20 19:10 PDT" data-time="927252659">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-21">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-21" data-comment-id="50243">sspitzer, could you do me a favor. set a break point at nsHTMLDocument.cpp line
mParser-&gt;SetDocumentCharset( charset, charsetSource);

and see do they get called repeatly when you open one message. It should be
break only once or twice (twice is reasonable) for viewing one message. If it
happen multiple time, could you tell me what are the value of charset (the
string it point to) and charsetSource (the integer value)</pre></div><div class="change-set" id="c22"><div class="comment" data-id="50244" data-no="22"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-22" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1193" id="a105767_1904"><img src="https://secure.gravatar.com/avatar/30bea03e99e03d3de54f7653bdb4e023?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_1193" id="a105767_1904"><a class="email disabled" href="/user_profile?user_id=1193" > <span class="fna">(not reading, please use seth&#64;sspitzer.org instead)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-22"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-22" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c22">Comment 22</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-20 20:17 PDT" data-time="927256679">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-22">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-22" data-comment-id="50244">frank, I don't think we're going to be able to fix this over the phone tonight.

it's very reproducable...it makes sense to debug it tomorrow.</pre></div><div class="change-set" id="c23"><div class="comment" data-id="50245" data-no="23"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-23" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_93208" id="a105767_1904"><img src="https://secure.gravatar.com/avatar/81927006e32b6874ba18489885babf50?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_93208" id="a105767_1904"><a class="email disabled" href="/user_profile?user_id=93208" > <span class="fna">Scott MacGregor</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-23"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-23" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c23">Comment 23</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-21 15:56 PDT" data-time="927327419">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-23">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-23" data-comment-id="50245">Okay, I think I found the problem. But I don't think anyone is going to like it
ands it is going to be a bear to fix. The problem currently only occurrs on
Linux because netlib runs in the same thread as the app. The bug DOES occurr on
windows &amp; mac as well but we don't see it because there is a race ccondition
(due to netlib running in a separate thread) that conviently lets it work.

This explanation will be long, but hopefully, I'll be able to convey the
problem.

Here's the short simplified summary:
we have a mime converter which just converted a message body into html. It
writes the html into a stream listener which is the raptor document loader. At
this point we are about 10 functions deep on the call stack inside if mime &amp; the
plugin converter. Since there is only one thread on linux, writing the data into
the document loader immediately causes raptor to start processing data. This
causes Frank's new code to get called which says we need to reload. So raptor
interrupts the file we are tryoing to display. This then interrupts the current
mime converter saying interrupt. The mime converter &amp; emitter are then all
released &amp; destroyed. But wait! There are all these functions still on the call
stack on objects which have just been released. Now raptor is done interrupting
all the streams associated with the window being reloaded so we start to move
back down the stack trace and start jumping into code that has been released
because of the reload.

Note: the same problem occurrs on windows except because netlib is in a separate
thread, there is a gap btw the time mime writes the data &amp; when layout actually
lays it out. That race condition allows us to back up the stack so we don't run
into the problem.

Ugghhh, so this looks like an architecture problem between callingg reloads from
a document loader &amp; objects writing data into the document loader. I think this
is going t be very hard for all of us to fix.

One short term solution is to move enough of Frank's charset detection code into
mime such that we'll never have to issue a reload when displaying the message.
This would have the added benefit of not seeing the black window &amp; then the
reload of mail messages that you see now on windows.

I think this problem has been so hard to track down because by the time you
crash, your stack trace is garbage &amp; pointing off to different functions that
don't reflect reality.</pre></div><div class="change-set" id="c24"><div class="comment" data-id="50246" data-no="24"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-24" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1193" id="a105767_1904"><img src="https://secure.gravatar.com/avatar/30bea03e99e03d3de54f7653bdb4e023?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_1193" id="a105767_1904"><a class="email disabled" href="/user_profile?user_id=1193" > <span class="fna">(not reading, please use seth&#64;sspitzer.org instead)</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-24"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-24" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c24">Comment 24</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-21 16:02 PDT" data-time="927327779">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-24">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-24" data-comment-id="50246">three cheers for mscott for spending days tracking down this bug!</pre></div><div class="change-set" id="a354475_93208"><div class="change" id="aa354475_93208">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_93208" id="a354475_93208"><img src="https://secure.gravatar.com/avatar/81927006e32b6874ba18489885babf50?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_93208" id="a354475_93208"><a class="email disabled" href="/user_profile?user_id=93208" > <span class="fna">Scott MacGregor</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a354475_93208"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a354475_93208">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#a354475_93208">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-23 14:30 PDT" data-time="927495058">22 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Whiteboard: Have the fixed, already verify on Mac and Window. sspitzer is verifing the UNIX now &rarr; Fix causes a re-entrancy problem that we don't know how to fix</div></div></div><div class="change-set" id="c25"><div class="comment" data-id="50247" data-no="25"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-25" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_93208" id="a354475_93208"><img src="https://secure.gravatar.com/avatar/81927006e32b6874ba18489885babf50?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_93208" id="a354475_93208"><a class="email disabled" href="/user_profile?user_id=93208" > <span class="fna">Scott MacGregor</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-25"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-25" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c25">Comment 25</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-23 14:30 PDT" data-time="927495059">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-25">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-25" data-comment-id="50247">Well, I've tried to modify the plugin instance manger &amp; the mime converter
several times to try to fix this problem. I can get us out of trouble for the
converter but the problem still exists for the core netlib calls which are still
on the stack (where core in this case is mkhttp, mkfile, etc.)

Basically, I rewrote the contract for abort with the plugin manager in network
such that abort only closes....the plugin objects aren't necessarily released.

However, the crash will now just be pushed down into the network protocol being
run (http, file, etc.) because the I18N reload causes the doc loader to call
interrupt. When a url is interrupted, the protocol instance is always destroyed.
With the I18N change, it is making us re-entrant &amp; that code just wasn't
designed for it. In short, I don't believe I can fix it w/o serious effort
invested in changing mkfile, mkhttp, etc. And this is high risk. Basically,  I
would need to be modifying the definition of how we interrupt urls such that it
doesn't destroy the protocol connection for each old-netlib world protocol. This
is not easy.

The short: there is no &quot;quick&quot; or easy design solution to fixing the re-entrancy
problems introduced by Frank's code to call reload from within the parser.

I'll continue to look at the problem for the rest of today but I am not
optimistic =(.</pre></div><div class="change-set" id="c26"><div class="comment" data-id="50248" data-no="26"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-26" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_93208" id="a354475_93208"><img src="https://secure.gravatar.com/avatar/81927006e32b6874ba18489885babf50?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_93208" id="a354475_93208"><a class="email disabled" href="/user_profile?user_id=93208" > <span class="fna">Scott MacGregor</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-26"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-26" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c26">Comment 26</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-23 16:35 PDT" data-time="927502559">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-26">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-26" data-comment-id="50248">Seth mentioned one possibility to me which I thought I'd bring up here which
could fix the re-entrancy problem for mail but not for other stream
converters.We could basically &quot;rig&quot; it such that Frank's code never needs to
trigger a reload when displaing messages. We would copy the logic he is using to
determine if a reload is necessary into the mime converter. There, we could make
sure that his conditions are always met (I assume the conditions are charset
related) b4 writing to the parser.

This would fix the problem for mail. But it would be a fragile fix as we'd have
the same problem if anyone else started calling reload from w/in the parser. In
addition, other pluggable stream converters will still have the re-entrancy
problem. And we realy, aren't fixing the problem, we're just trying to prevent
the case that causes re-entrancy from happening for mail....

I wish I was able to come up with a real solution this weekend but it doesn't
look like I am.</pre></div><div class="change-set" id="c27"><div class="comment" data-id="50249" data-no="27"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-27" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1904" id="a354475_93208"><img src="https://secure.gravatar.com/avatar/944bd43fe0fa3f3f51596ebd0267af9c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_1904" id="a354475_93208"><a class="email disabled" href="/user_profile?user_id=1904" > <span class="fna">Frank Tang</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-27"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-27" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c27">Comment 27</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-23 21:18 PDT" data-time="927519539">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-27">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-27" data-comment-id="50249">mscott: could you kindly point out which object on the stack have been destroed,
and by what call ? Also, in my funciton, I have to do two thing
1. StopDocumentLoad
2. ReloadDocument
I wonder is that 1 or 2 destory the object on the stack, or the combination of
these two.
Also, is this cause by some code pattern below?
nsIObject *obj = this-&gt;GetMeSomeObejct();
FunctionCouldReEnt();
FunctionWhichCrash(obj);

If we do ref count correctly, we should do a obj-&gt;AddRef(); after
GetMeSomeObject(); and a obj-&gt;Rlease() after FunctionWhichCrash(obj);
(Assume does not do that for you.).

I will try to put some sleep (several second) code in the nsMetaCharsetObserver
, NotifyWebShell method on window/mac to force the reproduction on Windown.
Hopefully this could help me debug it easier....</pre></div><div class="change-set" id="c28"><div class="comment" data-id="50250" data-no="28"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-28" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_93208" id="a354475_93208"><img src="https://secure.gravatar.com/avatar/81927006e32b6874ba18489885babf50?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_93208" id="a354475_93208"><a class="email disabled" href="/user_profile?user_id=93208" > <span class="fna">Scott MacGregor</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-28"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-28" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c28">Comment 28</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-24 09:13 PDT" data-time="927562439">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-28">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-28" data-comment-id="50250">Frank, you might see function calls like the following:
mkfile: net_read_next_chunk
cnvtsplugin: plugin_write
plugin_instance: Mime code to convert data to html.
*old jwz c functions attached to data objects* then get called
mimeEmitter: emits the html code to the doc loader
doc loader: processes data, eventually falls into I18N code which triggers
reload / stop
mkfile: net_InterruptFile --&gt; url gets interrupted. active entry for the file
then goes away. as part of freeing the active entry state, we interrupt the
plugin by calling:

cnvtsplugin: plugin_abort which in turn calls into mime:
plugin_inst.cpp MimePluginInstance::Abort.

I can fix it such that the mime plugin code is safe for reentrancy &amp; have done
this on my linux build this weekend. However we will still crash because the
mkfile protocol instance for the active entry is still on the stack but it is
getting a re-entrant call to file interrupt which by design destroys the current
protocol instance.

I don't believe it is a simple matter of ref counting objects because the old
networking code in mkfile knows nothing about ref counted objects. According to
the networking model that old cruft is built on, when you are interupted, the
protocol instance is torn down. This is why ref counting will not solve this
problem without redesigning interrupt behavior for the old protocols: mkfile,
mkhttp, etc . Ref counting &amp; some other tricks I tried only push the problem
down into core netlib but it still persists there.</pre></div><div class="change-set" id="c29"><div class="comment" data-id="50251" data-no="29"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-29" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4467" id="a354475_93208"><img src="https://secure.gravatar.com/avatar/4bf552ae2539db4a738d6c00c01a5628?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4467" id="a354475_93208"><a class="email disabled" href="/user_profile?user_id=4467" > <span class="fna">nhottanscp</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-29"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-29" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c29">Comment 29</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-24 14:57 PDT" data-time="927583079">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-29">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-29" data-comment-id="50251">ftang use nhotta's account
We should try a hacky fix which temp put some hard wired code in nsParser....

nsresult nsParser::Parse(nsIURL* aURL,nsIStreamObserver* aListener,PRBool
aVerifyEnabled, void* aKey) {
  NS_PRECONDITION(0!=aURL,kNullURL);

  nsresult result=kBadURL;
  mDTDVerification=aVerifyEnabled;
  if(aURL) {
    const char* spec;
    nsresult rv = aURL-&gt;GetSpec(&amp;spec);
    if (rv != NS_OK) return rv;
    nsAutoString theName(spec);

    // Temp hack to prevent reload on mail message
    if(-1 != theName.Find(&quot;tempMessage.eml&quot;))
    {
      nsAutoString utf8(&quot;UTF-8&quot;);
      SetDocumentCharset(utf8, kCharsetFromPreviousLoading);
    }</pre></div><div class="change-set" id="a446594_1904"><div class="change" id="aa446594_1904">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1904" id="a446594_1904"><img src="https://secure.gravatar.com/avatar/944bd43fe0fa3f3f51596ebd0267af9c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1904" id="a446594_1904"><a class="email disabled" href="/user_profile?user_id=1904" > <span class="fna">Frank Tang</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a446594_1904"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a446594_1904">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#a446594_1904">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-24 16:06 PDT" data-time="927587177">22 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Whiteboard: Fix causes a re-entrancy problem that we don't know how to fix &rarr; Have temp fix in local tree, wait branch open to check in.</div></div></div><div class="change-set" id="c30"><div class="comment" data-id="50252" data-no="30"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-30" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1904" id="a446594_1904"><img src="https://secure.gravatar.com/avatar/944bd43fe0fa3f3f51596ebd0267af9c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_1904" id="a446594_1904"><a class="email disabled" href="/user_profile?user_id=1904" > <span class="fna">Frank Tang</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-30"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-30" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c30">Comment 30</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-24 16:06 PDT" data-time="927587219">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-30">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-30" data-comment-id="50252">will check into branch and tip tonight</pre></div><div class="change-set" id="a460027_1904"><div class="change" id="aa460027_1904">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1904" id="a460027_1904"><img src="https://secure.gravatar.com/avatar/944bd43fe0fa3f3f51596ebd0267af9c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1904" id="a460027_1904"><a class="email disabled" href="/user_profile?user_id=1904" > <span class="fna">Frank Tang</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a460027_1904"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a460027_1904">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#a460027_1904">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-24 19:50 PDT" data-time="927600610">22 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Assignee: ftang &rarr; nhotta</div><div class="change">Status: ASSIGNED &rarr; NEW</div></div></div><div class="change-set" id="c31"><div class="comment" data-id="50253" data-no="31"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-31" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1904" id="a460027_1904"><img src="https://secure.gravatar.com/avatar/944bd43fe0fa3f3f51596ebd0267af9c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_1904" id="a460027_1904"><a class="email disabled" href="/user_profile?user_id=1904" > <span class="fna">Frank Tang</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-31"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-31" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c31">Comment 31</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-24 19:50 PDT" data-time="927600659">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-31">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-31" data-comment-id="50253">The following file have been check in
files in tip:
mozilla/intl/chardet/src/nsMetaCharsetObserver.cpp 1.8
mozilla/layout/html/document/src/nsHTMLDocument.cpp 3.117
mozilla/htmlparser/src/nsParser.cpp 3.95

files in branch:
mozilla/intl/chardet/src/nsMetaCharsetObserver.cpp 1.7.4.1
mozilla/layout/html/document/src/nsHTMLDocument.cpp 3.116.4.1
mozilla/htmlparser/src/nsParser.cpp 3.94.4.1
Move this to M7 and reassing this to nhotta so we will rememeber to move the
code out of nsParser</pre></div><div class="change-set" id="a460450_1904"><div class="change" id="aa460450_1904">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1904" id="a460450_1904"><img src="https://secure.gravatar.com/avatar/944bd43fe0fa3f3f51596ebd0267af9c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1904" id="a460450_1904"><a class="email disabled" href="/user_profile?user_id=1904" > <span class="fna">Frank Tang</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a460450_1904"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a460450_1904">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#a460450_1904">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-24 19:57 PDT" data-time="927601033">22 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Whiteboard: Have temp fix in local tree, wait branch open to check in. &rarr; Fix causes a re-entrancy problem that we don't know how to fix</div><div class="change">Target Milestone: M6 &rarr; M7</div></div></div><div class="change-set" id="a460643_1214"><div class="change" id="aa460643_1214">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1214" id="a460643_1214"><img src="https://secure.gravatar.com/avatar/c936d5fc7ef09504480b9d8aafb7e8a0?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1214" id="a460643_1214"><a class="email " href="/user_profile?user_id=1214" > <span class="fna">Brendan Eich [:brendan]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a460643_1214"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a460643_1214">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#a460643_1214">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-24 20:00 PDT" data-time="927601226">22 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Whiteboard: Fix causes a re-entrancy problem that we don't know how to fix &rarr; Have temp fix in local tree, wait branch open to check in.</div><div class="change">Target Milestone: M7 &rarr; M6</div></div></div><div class="change-set" id="c32"><div class="comment" data-id="50254" data-no="32"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-32" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_10219" id="a460643_1214"><img src="https://secure.gravatar.com/avatar/fb1ec8d659a27f8cc60e77bfa010428d?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_10219" id="a460643_1214"><a class="email disabled" href="/user_profile?user_id=10219" > <span class="fna">brendan-obsolete</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-32"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-32" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c32">Comment 32</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-24 20:00 PDT" data-time="927601259">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-32">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-32" data-comment-id="50254">Adding warren and rpotts.  Is Linux truly not running netlib in a separate
thread?  Or is it just scheduling the netlib thread less favorably?

/be</pre></div><div class="change-set" id="c33"><div class="comment" data-id="50255" data-no="33"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-33" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_93208" id="a460643_1214"><img src="https://secure.gravatar.com/avatar/81927006e32b6874ba18489885babf50?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_93208" id="a460643_1214"><a class="email disabled" href="/user_profile?user_id=93208" > <span class="fna">Scott MacGregor</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-33"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-33" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c33">Comment 33</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-24 20:10 PDT" data-time="927601859">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-33">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-33" data-comment-id="50255">Yes netlib is truly not running in a separate thread on linux. Spence was
working on getting this working b4 he left but didn't.</pre></div><div class="change-set" id="a589319_2687"><div class="change" id="aa589319_2687">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_2687" id="a589319_2687"><img src="https://secure.gravatar.com/avatar/16d8dd535dd864f9058fd5152440db74?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_2687" id="a589319_2687"><a class="email " href="/user_profile?user_id=2687" > <span class="fna">chris hofmann</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a589319_2687"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a589319_2687">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#a589319_2687">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-26 07:45 PDT" data-time="927729902">22 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Status: NEW &rarr; RESOLVED</div><div class="change">Closed: <span class="rel-time" title="1999-05-26 07:45 PDT" data-time="927729902">22 years ago</span></div><div class="change">Resolution: --- &rarr; FIXED</div></div></div><div class="change-set" id="c34"><div class="comment" data-id="50256" data-no="34"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-34" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_2687" id="a589319_2687"><img src="https://secure.gravatar.com/avatar/16d8dd535dd864f9058fd5152440db74?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_2687" id="a589319_2687"><a class="email " href="/user_profile?user_id=2687" > <span class="fna">chris hofmann</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-34"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-34" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c34">Comment 34</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-26 07:45 PDT" data-time="927729959">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-34">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-34" data-comment-id="50256">marking this fixed. so the hack will get some testing.
open a new bug for additional changes.</pre></div><div class="change-set" id="a613900_4080"><div class="change" id="aa613900_4080">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4080" id="a613900_4080"><img src="https://secure.gravatar.com/avatar/41b4ffbe29291f5bf19a7eb729331dda?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_4080" id="a613900_4080"><a class="email disabled" href="/user_profile?user_id=4080" > <span class="fna">lchiang</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a613900_4080"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a613900_4080">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#a613900_4080">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-26 14:34 PDT" data-time="927754483">22 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">QA Contact: 4080 &rarr; 1308</div></div></div><div class="change-set" id="c35"><div class="comment" data-id="50257" data-no="35"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-35" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_4080" id="a613900_4080"><img src="https://secure.gravatar.com/avatar/41b4ffbe29291f5bf19a7eb729331dda?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_4080" id="a613900_4080"><a class="email disabled" href="/user_profile?user_id=4080" > <span class="fna">lchiang</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-35"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-35" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c35">Comment 35</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-26 14:34 PDT" data-time="927754499">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-35">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-35" data-comment-id="50257">Well, the original bug in this bug report (crash displaying messages) has been
verified since 5/19 when mscott backed out of ftang's changes.   So, far no
problem displaying messages in English.  I'm going to change the QA assigned to
momoi to check for international messages.  mscott, momoi, others: if there is a
new bug against netlib, pls file it. Thanks.</pre></div><div class="change-set" id="a616291_1308"><div class="change" id="aa616291_1308">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1308" id="a616291_1308"><img src="https://secure.gravatar.com/avatar/f876f649c463562da857f5609d8a58d5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1308" id="a616291_1308"><a class="email disabled" href="/user_profile?user_id=1308" > <span class="fna">Katsuhiko Momoi</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a616291_1308"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a616291_1308">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#a616291_1308">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-26 15:14 PDT" data-time="927756874">22 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Status: RESOLVED &rarr; VERIFIED</div></div></div><div class="change-set" id="c36"><div class="comment" data-id="50258" data-no="36"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-36" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1308" id="a616291_1308"><img src="https://secure.gravatar.com/avatar/f876f649c463562da857f5609d8a58d5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>

        <td class="change-author"><div class="vcard vcard_1308" id="a616291_1308"><a class="email disabled" href="/user_profile?user_id=1308" > <span class="fna">Katsuhiko Momoi</span></a>
</div>
        </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-36"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-36" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#c36">Comment 36</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="1999-05-26 15:14 PDT" data-time="927756899">22 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-36">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-36" data-comment-id="50258">There were 2 types of crashes for this bug.

1. On Linux: just about any messages crashed.
2. On Win and Mac, the crashing messages were those which
   contained a meta charset tag either in the body or in the
   attachments. This is what ftang's initial check-in fixed.

I take it that Lisa's group's had done tesing on Linux on
the 5/25/99 Linux M6 build. If you haven't seen crashes on this
build then, the fix for Type 1 crash has been verified -- ftang's
temporary fix.

For type 2 bugs on Windows, I have been looking at the
5/25/99 M6 build since last night. No messages matching
Type 2 description above has caused crashes or infinite loops.

Based on these results, I'm making this temporary fix verified as
working as intended.
Someone please open a new bug as lchiang suggests -- that should be
mscott, sspitzer or ftang.</pre></div><div class="change-set" id="a174032622_27300"><div class="change" id="aa174032622_27300">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_27300" id="a174032622_27300"><img src="https://secure.gravatar.com/avatar/c8a27f1c79d0e7fafc8faa2c5ab6df3a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_27300" id="a174032622_27300"><a class="email " href="/user_profile?user_id=27300" > <span class="fna">Myk Melez [:myk] [&#64;mykmelez]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a174032622_27300"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a174032622_27300">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#a174032622_27300">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2004-11-22 17:26 PST" data-time="1101173205">16 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Product: MailNews &rarr; Core</div></div></div><div class="change-set" id="a290363217_1"><div class="change" id="aa290363217_1">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1" id="a290363217_1"><img src="https://secure.gravatar.com/avatar/eaa3c40fff208819d0810fc338eea0aa?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1" id="a290363217_1"><a class="email " href="/user_profile?user_id=1" > <span class="fna">Nobody; OK to take it and work on it</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a290363217_1"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a290363217_1">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=6740#a290363217_1">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2008-07-31 04:30 PDT" data-time="1217503800">12 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Product: Core &rarr; MailNews Core</div></div></div><div id="new-comment-notice">
          You need to <a href="/show_bug.cgi?id=6740&amp;GoAheadAndLogIn=1">log in</a>
          before you can comment on or make changes to this bug.
        </div>



<div id="bottom-actions">
  <div id="bottom-right-actions">
    <button type="button" id="top-btn" class="secondary" aria-label="Go to Page Top">Top &uarr;</button>
  </div>
</div></div> 
</main> 
</div> 


</body>
</html>